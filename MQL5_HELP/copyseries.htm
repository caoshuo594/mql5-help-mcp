<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" />
  <title>CopySeries</title>
  <meta name="keywords" content="CopySeries" />
  <link type="text/css" href="default.css" rel="stylesheet" />
  <link type="text/css" href="screenshot.css" rel="stylesheet" />
  

   
   
   


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Reference </a> / <a class="h_m" href="series.htm"> Timeseries and Indicators Access </a>/ CopySeries
          </td>
          <td width="70" align="right">
          <a href="copyrates.htm"><img style="vertical-align:middle;" src="previous.png" alt="Previous" width="27" height="27" border=0></a>&nbsp;
          <a href="copytime.htm"><img style="vertical-align:middle;" src="next.png" alt="Next" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H1"><span class="f_H1">CopySeries</span></p>
<p class="p_Function"><span class="f_Function">Gets the synchronized timeseries from the <a href="mqlrates.htm" class="topiclink">MqlRates</a> structure for the specified symbol-period and the specified amount. The data is received into the specified set of arrays. Elements are counted down from the present to the past, which means that the starting position equal to 0 means the current bar.</span></p>
<p class="p_Function"><img class="help" alt="copyseries" width="656" height="463" style="margin:0;width:656px;height:463px;border:none" src="copyseries.png"/></p>
<p class="p_Function"><span class="f_Function">If the data amount to be copied is unknown, it is recommended to use the <a href="dynamic_array.htm" class="topiclink">dynamic array</a> for the receiving arrays, since if the data amount exceeds what an array can contain, this can cause the attempt to redistribute the array to fit all of the requested data.</span></p>
<p class="p_Function"><span class="f_Function">If you need to copy a predetermined amount of data, it is recommended to use a <a href="dynamic_array.htm#static_array" class="topiclink">statistically allocated buffer</a> to avoid unnecessary memory reallocation.</span></p>
<p class="p_Function"><span class="f_Function">The property of the receiving array — as_series=true or as_series=false — will be ignored: during copying, the oldest timeseries element will be copied to the beginning of the physical memory allocated for the array.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_Keywords">int&nbsp;&nbsp;</span><span class="f_Functions">CopySeries</span><span class="f_CodeExample">(</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">symbol_name</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;symbol&nbsp;name</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">ENUM_TIMEFRAMES</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_Param">timeframe</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;period</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">int</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">start_pos</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;start&nbsp;position</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">int</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">count</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;amount&nbsp;to&nbsp;copy</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">ulong&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">rates_mask</span><span class="f_CodeExample">,</span><span class="f_Param">&nbsp;</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;combination&nbsp;of&nbsp;flags&nbsp;to&nbsp;specify&nbsp;the&nbsp;requested&nbsp;series</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">void&amp;&nbsp;</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">array1[]</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;array&nbsp;to&nbsp;receive&nbsp;the&nbsp;data&nbsp;of&nbsp;the&nbsp;first&nbsp;copies&nbsp;timeseries</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">void&amp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">array2[]</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;array&nbsp;to&nbsp;receive&nbsp;the&nbsp;data&nbsp;of&nbsp;the&nbsp;second&nbsp;copied&nbsp;timeseries</span>
<br><span class="f_Comments">&nbsp;&nbsp;&nbsp;...</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;);</span></p>
</td>
</tr>
</table>
</div>
<p class="p_BoldTitles"><span class="f_BoldTitles">Parameters</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">symbol_name</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Symbol.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">timeframe</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Period.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">start_pos</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;First copied element index.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">count</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Number of copied elements.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">rates_mask</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;A combination of flags from the <a href="matrix_copyrates.htm#enum_copy_rates" class="topiclink">ENUM_COPY_RATES</a> enumeration.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">array1, array2,...</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[out] &nbsp;Array of the appropriate type to receive the timeseries from the <a href="mqlrates.htm" class="topiclink">MqlRates</a> structure. The order of the arrays passed to the function must match the order of the fields in the MqlRates structure. </span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">Return Value</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">The number of copied elements or -1 if <a href="errorcodes.htm" class="topiclink">error</a> occurs.</span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">Note</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">If the entire interval of the requested data is beyond the data available on the server, the function returns -1. If the requested data is beyond <a href="terminalstatus.htm" class="topiclink">TERMINAL_MAXBARS</a> (the maximum number of bars on the chart), the function also returns -1.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">When requesting data from an indicator, the function immediately returns -1 if requested timeseries are not constructed yet or they should be downloaded from the server. However, this will initiate data download/constructing itself.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">When requesting data from an Expert Advisor or a script, <a href="timeseries_access.htm#synchronized" class="topiclink">download from the server</a> is initiated if the terminal does not have the appropriate data locally, or construction of the necessary timeseries starts if the data can be constructed from the local history but they are not ready yet. The function returns the amount of data that is ready by the time the timeout expires, however the history download continues, and the function returns more data during the next similar request.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">&nbsp;</span></p>
<p class="p_H3"><span class="f_H3">Difference between CopySeries and CopyRates</span></p>
<p class="p_Function"><span class="f_Function">The CopySeries function allows obtaining only the necessary timeseries into different specified arrays during one call, while all of timeseries data will be synchronized. This means that all values in the resulting arrays at a certain index N will belong to the same bar on the specified Symbol/Timeframe pair. Therefore, there is no need for the programmer to ensure the synchronization of all received timeseries by the bar opening time.</span></p>
<p class="p_Function"><span class="f_Function">Unlike CopyRates, which returns the full set of timeseries as an MqlRates array, the CopySeries function allows the programmer to get only the required timeseries as separate arrays. This can be done by specifying a combination of flags to select the type of timeseries. The order of the arrays passed to the function must match the order of the fields in the <a href="mqlrates.htm" class="topiclink">MqlRates</a> structure:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #0000ff;">struct</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">MqlRates</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">time</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;period&nbsp;start&nbsp;time</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">open</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;open&nbsp;price</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">high</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;high&nbsp;price&nbsp;for&nbsp;the&nbsp;period</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">low</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;low&nbsp;price&nbsp;for&nbsp;the&nbsp;period</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;close&nbsp;price</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">long</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">tick_volume</span><span class="f_CodeExample">;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;tick&nbsp;volume</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">spread</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;spread</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">long</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">real_volume</span><span class="f_CodeExample">;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;exchange&nbsp;volume</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Thus, if you need to get the values of the </span><span class="f_Text" style="font-style: italic;">time</span><span class="f_Text">, </span><span class="f_Text" style="font-style: italic;">close</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">real_volume</span><span class="f_Text"> timeseries for the last 100 bars of the current Symbol/Timeframe, you should use the following call:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">time</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample" style="color: #0000ff;">long</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">volume</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample" style="color: #0000ff;">CopySeries</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">NULL</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #333333;">100</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_TIME</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_CLOSE</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_VOLUME_REAL</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #333333;">time</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #333333;">volume</span><span class="f_CodeExample">);</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Mind the order of the arrays &quot;</span><span class="f_Text" style="font-style: italic;">time</span><span class="f_Text">, </span><span class="f_Text" style="font-style: italic;">close</span><span class="f_Text">, </span><span class="f_Text" style="font-style: italic;">volume</span><span class="f_Text">&quot; — it must match the order of the fields in the </span><span class="f_Function"> <a href="mqlrates.htm" class="topiclink">MqlRates</a></span><span class="f_Text"> structure. The order of values in the </span><span class="f_Text" style="font-style: italic;">rates_mask</span><span class="f_Text"> does not matter. The mask could be as follows:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_VOLUME_REAL</span><span class="f_CodeExample" style="color: #0000ff;">|</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_TIME</span><span class="f_CodeExample" style="color: #0000ff;">|</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_CLOSE</span></p>
</td>
</tr>
</table>
</div>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">&nbsp;</span></p>
<p class="p_Text"><span class="f_Text" style="font-weight: bold;">Example:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;input&nbsp;parameters</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">InpDateFrom</span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #333333;">D</span><span class="f_CodeExample">'</span><span class="f_CodeExample" style="color: #333333;">2022</span><span class="f_CodeExample">.</span><span class="f_CodeExample" style="color: #333333;">01</span><span class="f_CodeExample">.</span><span class="f_CodeExample" style="color: #333333;">01</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">00</span><span class="f_CodeExample">:</span><span class="f_CodeExample" style="color: #333333;">00</span><span class="f_CodeExample">:</span><span class="f_CodeExample" style="color: #333333;">00</span><span class="f_CodeExample">';</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">InpDateTo</span><span class="f_CodeExample">&nbsp;&nbsp;=</span><span class="f_CodeExample" style="color: #333333;">D</span><span class="f_CodeExample">'</span><span class="f_CodeExample" style="color: #333333;">2023</span><span class="f_CodeExample">.</span><span class="f_CodeExample" style="color: #333333;">01</span><span class="f_CodeExample">.</span><span class="f_CodeExample" style="color: #333333;">01</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">00</span><span class="f_CodeExample">:</span><span class="f_CodeExample" style="color: #333333;">00</span><span class="f_CodeExample">:</span><span class="f_CodeExample" style="color: #333333;">00</span><span class="f_CodeExample">';</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">uint</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">InpCount</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;=</span><span class="f_CodeExample" style="color: #333333;">20</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;arrays&nbsp;to&nbsp;get&nbsp;timeseries&nbsp;from&nbsp;the&nbsp;MqlRates&nbsp;price&nbsp;structure</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">open</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">float</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">closef</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">time1</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">time2</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;request&nbsp;close&nbsp;prices&nbsp;to&nbsp;a&nbsp;double&nbsp;array</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">ResetLastError</span><span class="f_CodeExample">();</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">res1</span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #333333;">CopySeries</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff0000;">NULL</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PERIOD_CURRENT</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">InpCount</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_TIME</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_CLOSE</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">time1</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;1.&nbsp;CopySeries&nbsp;&nbsp;returns&nbsp;%d&nbsp;values.&nbsp;Error&nbsp;code=%d&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">res1</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">GetLastError</span><span class="f_CodeExample">());</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">ArrayPrint</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;now&nbsp;also&nbsp;request&nbsp;open&nbsp;prices;&nbsp;use&nbsp;float&nbsp;array&nbsp;for&nbsp;close&nbsp;prices</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">ResetLastError</span><span class="f_CodeExample">();</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">res2</span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #333333;">CopySeries</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff0000;">NULL</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PERIOD_CURRENT</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">InpCount</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_TIME</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_CLOSE</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #ff0000;">COPY_RATES_OPEN</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">time2</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">open</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">closef</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;2.&nbsp;CopySeries&nbsp;&nbsp;returns&nbsp;%d&nbsp;values.&nbsp;Error&nbsp;code=%d&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">res2</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">GetLastError</span><span class="f_CodeExample">());</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">ArrayPrint</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">closef</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Compare&nbsp;the&nbsp;received&nbsp;data</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">((</span><span class="f_CodeExample" style="color: #333333;">res1</span><span class="f_CodeExample">==</span><span class="f_CodeExample" style="color: #333333;">res2</span><span class="f_CodeExample">)&nbsp;&amp;&amp;&nbsp;(</span><span class="f_CodeExample" style="color: #333333;">time1</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">]==</span><span class="f_CodeExample" style="color: #333333;">time2</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">]))</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;&nbsp;&nbsp;|&nbsp;Time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Close&nbsp;double&nbsp;|&nbsp;Close&nbsp;float&nbsp;|&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&lt;</span><span class="f_CodeExample" style="color: #333333;">10</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;%d&nbsp;|&nbsp;%s&nbsp;|&nbsp;&nbsp;&nbsp;%.5f&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;%.5f&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;%.5f&nbsp;&nbsp;&nbsp;|&quot;</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">TimeToString</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">time1</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]),&nbsp;</span><span class="f_CodeExample" style="color: #333333;">open</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">closef</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Result</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">1.&nbsp;CopySeries&nbsp;&nbsp;returns&nbsp;20&nbsp;values.&nbsp;Error&nbsp;code=0</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">[&nbsp;0]&nbsp;1.06722&nbsp;1.06733&nbsp;1.06653&nbsp;1.06520&nbsp;1.06573&nbsp;1.06649&nbsp;1.06694&nbsp;1.06675&nbsp;1.06684&nbsp;1.06604</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">[10]&nbsp;1.06514&nbsp;1.06557&nbsp;1.06456&nbsp;1.06481&nbsp;1.06414&nbsp;1.06394&nbsp;1.06364&nbsp;1.06386&nbsp;1.06239&nbsp;1.06247</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">2.&nbsp;CopySeries&nbsp;&nbsp;returns&nbsp;20&nbsp;values.&nbsp;Error&nbsp;code=0</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">[&nbsp;0]&nbsp;1.06722&nbsp;1.06733&nbsp;1.06653&nbsp;1.06520&nbsp;1.06573&nbsp;1.06649&nbsp;1.06694&nbsp;1.06675&nbsp;1.06684&nbsp;1.06604</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">[10]&nbsp;1.06514&nbsp;1.06557&nbsp;1.06456&nbsp;1.06481&nbsp;1.06414&nbsp;1.06394&nbsp;1.06364&nbsp;1.06386&nbsp;1.06239&nbsp;1.06247</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">&nbsp;&nbsp;|&nbsp;Time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Close&nbsp;double&nbsp;|&nbsp;Close&nbsp;float&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">0&nbsp;|&nbsp;2023.03.01&nbsp;17:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06660&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06722&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06722&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">1&nbsp;|&nbsp;2023.03.01&nbsp;18:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06722&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06733&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06733&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">2&nbsp;|&nbsp;2023.03.01&nbsp;19:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06734&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06653&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06653&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">3&nbsp;|&nbsp;2023.03.01&nbsp;20:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06654&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06520&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06520&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">4&nbsp;|&nbsp;2023.03.01&nbsp;21:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06520&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06573&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06573&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">5&nbsp;|&nbsp;2023.03.01&nbsp;22:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06572&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06649&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06649&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">6&nbsp;|&nbsp;2023.03.01&nbsp;23:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06649&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06694&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06694&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">7&nbsp;|&nbsp;2023.03.02&nbsp;00:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06683&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06675&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06675&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">8&nbsp;|&nbsp;2023.03.02&nbsp;01:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06675&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06684&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06684&nbsp;&nbsp;&nbsp;|</span>
<br><span style="width:43px;display:inline-block">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">9&nbsp;|&nbsp;2023.03.02&nbsp;02:00&nbsp;|&nbsp;&nbsp;&nbsp;1.06687&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06604&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;1.06604&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//---</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_BoldTitles"><span class="f_BoldTitles">&nbsp;</span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">See also</span></p>
<p class="p_SeeAlso"><span class="f_SeeAlso"><a href="classes.htm" class="topiclink">Structures and classes</a>,  <a href="copyrates.htm" class="topiclink">CopyRates</a></span></p>

</div>

</body>
</html>
