<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" />
  <title>FileSelectDialog</title>
  <meta name="keywords" content="FileSelectDialog,FSD_ALLOW_MULTISELECT,FSD_COMMON_FOLDER,FSD_FILE_MUST_EXIST,FSD_SELECT_FOLDER,FSD_WRITE_FILE" />
  <link type="text/css" href="default.css" rel="stylesheet" />
  <link type="text/css" href="screenshot.css" rel="stylesheet" />
  

   
   
   


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Reference </a> / <a class="h_m" href="files.htm"> File Functions </a>/ FileSelectDialog
          </td>
          <td width="70" align="right">
          <a href="files.htm"><img style="vertical-align:middle;" src="previous.png" alt="Previous" width="27" height="27" border=0></a>&nbsp;
          <a href="filefindfirst.htm"><img style="vertical-align:middle;" src="next.png" alt="Next" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H1"><span class="f_H1">FileSelectDialog</span></p>
<p class="p_Function"><span class="f_Function">Create a file or folder opening/creation dialog.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_Keywords">int&nbsp;&nbsp;</span><span class="f_Functions">FileSelectDialog</span><span class="f_CodeExample">(</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Param">caption</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;window&nbsp;header</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Param">initial_dir</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;initial&nbsp;directory</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Param">filter</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;extension&nbsp;filter</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">uint</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">flags</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;combination&nbsp;of&nbsp;flags</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">string&amp;</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_Param">filenames[]</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;array&nbsp;with&nbsp;file&nbsp;names</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Param">default_filename&nbsp;</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;default&nbsp;file&nbsp;name</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;);</span></p>
</td>
</tr>
</table>
</div>
<p class="p_BoldTitles"><span class="f_BoldTitles">Parameters</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">caption</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Dialog window header.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">initial_dir</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Initial directory name relative to MQL5\Files, the contents of which is to be displayed in the dialog box. If the value is <a href="void.htm" class="topiclink">NULL</a>, MQL5\Files is displayed in the dialog.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">filter</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Extension filter of the files to be displayed in the selection dialog window. Files of other formats are hidden.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">flags</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] <a href="fileflags.htm" class="topiclink">Combination of flags</a> defining the dialog window mode. The flags are defined as follows: </span><br>
<span class="f_ParameterDesrciption">FSD_WRITE_FILE – file open dialog;</span><br>
<span class="f_ParameterDesrciption">FSD_SELECT_FOLDER – allow selection of folders only;</span><br>
<span class="f_ParameterDesrciption">FSD_ALLOW_MULTISELECT – allow selection of multiple files;</span><br>
<span class="f_ParameterDesrciption">FSD_FILE_MUST_EXIST – selected files should exist;</span><br>
<span class="f_ParameterDesrciption">FSD_COMMON_FOLDER – file is located in the common folder of all client terminals \Terminal\Common\Files.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">filenames[]</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[out] &nbsp;Array of strings the names of selected files/folders are placed to.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">default_filename</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Default file/folder name. If specified, a name is automatically added to the open dialog and returned in the </span><span class="f_ParameterDesrciption" style="font-style: italic;">filenames[]</span><span class="f_ParameterDesrciption"> array when testing.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">&nbsp;</span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">Return Value</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">In case of a successful completion, the function returns the number of selected files whose names can be obtained in </span><span class="f_FunctionRemark" style="font-style: italic;">filenames[]</span><span class="f_FunctionRemark">. If a user closes the dialog without selecting a file, the function returns 0. In case of unsuccessful execution, </span><span class="f_fortable">a value less than 0 is returned. </span><span class="f_FunctionRemark">The error code can be obtained using <a href="getlasterror.htm" class="topiclink">GetLastError()</a>.</span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">Note</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">For reasons of security, working with files is strictly controlled in MQL5 language. Files used in file operations by means of MQL5 language cannot be located outside the file sandbox (namely, outside the MQL5\Files directory).</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">The </span><span class="f_FunctionRemark" style="font-style: italic;">initial_dir</span><span class="f_FunctionRemark"> name is searched in the client terminal's directory in MQL5\Files (or testing_agent_directory\MQL5\Files in case of testing). If FSD_COMMON_FOLDER is set among the flags, the search for the initial directory is performed in the common folder of all client terminals \</span><span class="f_ParameterDesrciption">Terminal\Common\Files.</span></p>
<p class="p_FunctionRemLI"><span class="f_FunctionRemLI">The </span><span class="f_FunctionRemLI" style="font-style: italic;">filter</span><span class="f_FunctionRemLI"> parameter indicates valid files and should be set in the &quot;&lt;description 1&gt;|&lt;extension 1&gt;|&lt;description 2&gt;|&lt;extension 2&gt;...&quot; format, for example, &quot;Text files (*.txt)|*.txt|All files (*.*)|*.*&quot;. The first extension &quot;Text files (*.txt)|*.txt&quot; is selected as a default file type.</span></p>
<p class="p_FunctionRemLI"><span class="f_FunctionRemLI">If </span><span class="f_FunctionRemLI" style="font-style: italic;">filter</span><span class="f_FunctionRemLI">=NULL, the mask of file selection in the dialog window is &quot;All Files (*.*)|*.*|&quot;</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">If the </span><span class="f_FunctionRemark" style="font-style: italic;">default_filename</span><span class="f_FunctionRemark"> parameter is set, calling </span><span class="f_FunctionRemark" style="color: #0000ff;">FileSelectDialog()</span><span class="f_FunctionRemark"> returns 1, while the </span><span class="f_FunctionRemark" style="font-style: italic;">default_filename</span><span class="f_FunctionRemark"> value itself is copied to the </span><span class="f_FunctionRemark" style="font-style: italic;">filenames[]</span><span class="f_FunctionRemark"> array during the non-visualized testing.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">The function cannot be used in custom indicators since calling FileSelectDialog() suspends the <a href="running.htm" class="topiclink">thread of execution</a> for the whole time while waiting for the user's response. Since all indicators for each symbol are executed in a single thread, such suspension makes the operation of all charts on all timeframes for this symbol impossible.</span></p>
<p class="p_Text"><span class="f_Text" style="font-weight: bold;">Example:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;get&nbsp;the&nbsp;names&nbsp;of&nbsp;text&nbsp;files&nbsp;for&nbsp;downloading&nbsp;from&nbsp;the&nbsp;common&nbsp;folder&nbsp;of&nbsp;the&nbsp;client&nbsp;terminals</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">filenames</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileSelectDialog</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Select&nbsp;files&nbsp;to&nbsp;download&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">NULL</span><span class="f_CodeExample">,&nbsp;</span>
<br><span class="f_CodeExample" style="color: #008080;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Text&nbsp;files&nbsp;(*.txt)|*.txt|All&nbsp;files&nbsp;(*.*)|*.*&quot;</span><span class="f_CodeExample">,&nbsp;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FSD_ALLOW_MULTISELECT</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #ff0000;">FSD_COMMON_FOLDER</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">filenames</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;data.txt&quot;</span><span class="f_CodeExample">)&gt;</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;display&nbsp;the&nbsp;name&nbsp;of&nbsp;each&nbsp;selected&nbsp;file</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #0000ff;">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">filenames</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&lt;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;:&nbsp;&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">filenames</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">else</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Files&nbsp;not&nbsp;selected&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_BoldTitles"><span class="f_BoldTitles">See also</span></p>
<p class="p_SeeAlso"><span class="f_SeeAlso"><a href="fileopen.htm" class="topiclink">FileOpen</a>, <a href="fileisexist.htm" class="topiclink">FileIsExist</a>, <a href="filedelete.htm" class="topiclink">FileDelete</a>, <a href="filemove.htm" class="topiclink">FileMove</a>, <a href="foldercreate.htm" class="topiclink">FolderCreate</a>, <a href="folderdelete.htm" class="topiclink">FolderDelete</a>, <a href="folderclean.htm" class="topiclink">FolderClean</a>, <a href="fileflags.htm" class="topiclink">Flags of opening files</a></span></p>

</div>

</body>
</html>
