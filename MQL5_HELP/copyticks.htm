<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252" />
  <title>CopyTicks</title>
  <meta name="keywords" content="COPY_TICKS_ALL,COPY_TICKS_INFO,COPY_TICKS_TRADE,CopyTicks" />
  <link type="text/css" href="default.css" rel="stylesheet" />
  <link type="text/css" href="screenshot.css" rel="stylesheet" />
  

   
   
   


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Reference </a> / <a class="h_m" href="series.htm"> Timeseries and Indicators Access </a>/ CopyTicks
          </td>
          <td width="70" align="right">
          <a href="copyspread.htm"><img style="vertical-align:middle;" src="previous.png" alt="Previous" width="27" height="27" border=0></a>&nbsp;
          <a href="copyticksrange.htm"><img style="vertical-align:middle;" src="next.png" alt="Next" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H1"><span class="f_H1">CopyTicks</span></p>
<p class="p_Function"><span class="f_Function">The function receives ticks in the </span><span class="f_ParameterDesrciption"><a href="mqltick.htm" class="topiclink">MqlTick</a> format into ticks_array.</span><span class="f_Function"> In this case, ticks are indexed from the past to the present, i.e. the 0 indexed tick is the oldest one in the array. For tick analysis, check the </span><span class="f_Function" style="font-style: italic;">flags</span><span class="f_Function"> field, which shows what exactly has changed in the tick.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_Keywords">int&nbsp;&nbsp;</span><span class="f_Functions">CopyTicks</span><span class="f_CodeExample">(</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">symbol_name</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;Symbol&nbsp;name</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">MqlTick&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">ticks_array[]</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;Tick&nbsp;receiving&nbsp;array</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">uint</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">flags=COPY_TICKS_ALL</span><span class="f_CodeExample">,&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;The&nbsp;flag&nbsp;that&nbsp;determines&nbsp;the&nbsp;type&nbsp;of&nbsp;received&nbsp;ticks</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">ulong</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">from=0</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;The&nbsp;date&nbsp;from&nbsp;which&nbsp;you&nbsp;want&nbsp;to&nbsp;request&nbsp;ticks</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Keywords">uint</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Param">count=0</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Comments">//&nbsp;The&nbsp;number&nbsp;of&nbsp;ticks&nbsp;that&nbsp;you&nbsp;want&nbsp;to&nbsp;receive</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;);</span></p>
</td>
</tr>
</table>
</div>
<p class="p_BoldTitles"><span class="f_BoldTitles">Parameters</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">symbol_name</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;Symbol.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">ticks_array</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[out] &nbsp;An array of the <a href="mqltick.htm" class="topiclink">MqlTick</a> type for receiving ticks.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">flags</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;A flag to define the type of the requested ticks. </span><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_INFO</span><span class="f_ParameterDesrciption"> – ticks with Bid and/or Ask changes, </span><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_TRADE</span><span class="f_ParameterDesrciption"> – ticks with changes in Last and Volume, </span><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_ALL</span><span class="f_ParameterDesrciption"> – all ticks. For any type of request, the values of the previous tick are added to the remaining fields of the MqlTick structure. </span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">from</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp; The date from which you want to request ticks. In milliseconds since 1970.01.01. If </span><span class="f_ParameterDesrciption" style="font-style: italic;">from</span><span class="f_ParameterDesrciption">=0, the last </span><span class="f_ParameterDesrciption" style="font-style: italic;">count</span><span class="f_ParameterDesrciption"> ticks will be returned.</span></p>
<p class="p_FunctionParameter"><span class="f_FunctionParameter">count</span></p>
<p class="p_ParameterDesrciption"><span class="f_ParameterDesrciption">[in] &nbsp;The number of requested ticks. If the 'from' and 'count' parameters are not specified, all available recent ticks (but not more than 2000) will be written to ticks_array[].</span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">Returned value</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">The number of copied tick or -1 in case of an <a href="errorcodes.htm" class="topiclink">error</a>.</span></p>
<p class="p_BoldTitles"><span class="f_BoldTitles">Note</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">The CopyTicks() function allows requesting and analyzing all received ticks. </span><span class="f_FunctionRemark">The first call of CopyTicks() initiates synchronization of the symbol's tick database stored on the hard disk. If the local database does not provide all the requested ticks, then missing ticks will be automatically downloaded from the trade server. Ticks beginning with the </span><span class="f_FunctionRemark" style="font-style: italic; font-weight: bold;">from</span><span class="f_FunctionRemark"> date specified in CopyTicks() till the current moment will be synchronized. After that, all ticks arriving for this symbol will be added to the tick database thus keeping it in the synchronized state.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">If the </span><span class="f_FunctionRemark" style="font-style: italic;">from</span><span class="f_FunctionRemark"> and </span><span class="f_FunctionRemark" style="font-style: italic;">count</span><span class="f_FunctionRemark"> parameters are not specified, all available recent ticks (but not more than 2000) will be written to </span><span class="f_FunctionRemark" style="font-style: italic;">ticks_array[]</span><span class="f_FunctionRemark">. The </span><span class="f_FunctionRemark" style="font-style: italic;">flags</span><span class="f_FunctionRemark"> parameter allows specifying the type of required ticks. </span></p>
<p class="p_FunctionRemark"><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_INFO </span><span class="f_ParameterDesrciption">– ticks with Bid and/or Ask price changes are returned. Data of other fields will also be added. For example, if only the Bid has changed, the </span><span class="f_ParameterDesrciption" style="font-style: italic;">ask</span><span class="f_ParameterDesrciption"> and </span><span class="f_ParameterDesrciption" style="font-style: italic;">volume</span><span class="f_ParameterDesrciption"> fields will be filled with last known values. To find out exactly what has changed, analyze the </span><span class="f_ParameterDesrciption" style="font-style: italic;">flags</span><span class="f_ParameterDesrciption"> field, which will have the value of TICK_FLAG_BID and/or TICK_FLAG_ASK. If a tick has zero values of the Bid and Ask prices, and the flags show that these data have changed (</span><span class="f_ParameterDesrciption" style="font-style: italic;">flags</span><span class="f_ParameterDesrciption">=TICK_FLAG_BID|TICK_FLAG_ASK), this means that the order book (Market Depth) is empty. In other words, there are no buy and sell orders.</span></p>
<p class="p_FunctionRemark"><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_TRADE </span><span class="f_ParameterDesrciption">– ticks with the Last price and volume changes are returned. Data of other fields will also be added, i.e. last known values of Bid and Ask will be specified in the appropriate fields. To find out exactly what has changed, analyze the </span><span class="f_ParameterDesrciption" style="font-style: italic;">flags</span><span class="f_ParameterDesrciption"> field, which will have the TICK_FLAG_LAST and TICK_FLAG_VOLUME value. </span></p>
<p class="p_FunctionRemark"><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_ALL </span><span class="f_ParameterDesrciption">– all ticks with any change are returned. Unchanged fields will be filled with last known values.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">Call of CopyTicks() with the COPY_TICKS_ALL flag immediately returns all ticks from the request interval, while calls in other modes require some time to process and select ticks, therefore they do not provide significant speed advantage.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark">When requesting ticks (either </span><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_INFO</span><span class="f_ParameterDesrciption"> or </span><span class="f_ParameterDesrciption" style="color: #0000ff;">COPY_TICKS_TRADE</span><span class="f_FunctionRemark">), every tick contains full price information as of the time of the tick (</span><span class="f_FunctionRemark" style="font-style: italic;">bid, ask, last </span><span class="f_FunctionRemark">and</span><span class="f_FunctionRemark" style="font-style: italic;"> volume</span><span class="f_FunctionRemark">). This feature is provided for an easier analysis of the trade state at the time of each tick, so there is no need to request a deep tick history and search for the values of other fields.</span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark" style="font-weight: bold;">In indicators, the CopyTicks() function returns the result:</span><span class="f_FunctionRemark"> when called from an indicator, CopyTick() immediately returns all available ticks of a symbol, and will launch synchronization of the tick database, if available data is not enough. All indicators in one symbol operate in one common thread, so the indicator cannot wait for the completion of synchronization. After synchronization, CopyTicks() will return all requested ticks during the next call. In indicators, the <a href="oncalculate.htm" class="topiclink">OnCalculate()</a> function is called after the arrival of each tick. </span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark" style="font-weight: bold;">CopyTicks() can wait for the result for 45 seconds in Expert Advisors and scripts:</span><span class="f_FunctionRemark"> as distinct from indicators, every Expert Advisor and script operate in a separate thread, and therefore can wait 45 seconds till the completion of synchronization. If the required amount of ticks fails to be synchronized during this time, CopyTicks() will return available ticks by timeout and will continue synchronization. <a href="ontick.htm" class="topiclink">OnTick()</a> in Expert Advisor is not a handler of every tick, it only notifies an Expert Advisor about changes in the market. It can be a batch of changes: the terminal can simultaneously make a few ticks, but OnTick() will be called only once to notify the EA of the latest market state. </span></p>
<p class="p_FunctionRemark"><span class="f_FunctionRemark" style="font-weight: bold;">The rate of data return:</span><span class="f_FunctionRemark"> the terminal stores in the fast access cache 4,096 last ticks for each instrument (65,536 ticks for symbols with a running Market Depth). If requested ticks for the current trading session are beyond the cache, CopyTicks() calls the ticks stored in the terminal memory. These requests require more time for execution. The slowest requests are those requesting ticks for other days, since the data is read from the disk in this case.</span></p>
<p class="p_Text"><span class="f_Text" style="font-weight: bold;">Example:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">copyright</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;Copyright&nbsp;2000-2024,&nbsp;MetaQuotes&nbsp;Ltd.&quot;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">link</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;https://www.mql5.com&quot;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">version</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;1.00&quot;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">script_show_inputs</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Requesting&nbsp;100&nbsp;million&nbsp;ticks&nbsp;to&nbsp;be&nbsp;sure&nbsp;we&nbsp;receive&nbsp;the&nbsp;entire&nbsp;tick&nbsp;history</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #c0504d;">getticks</span><span class="f_CodeExample">=100000000;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;The&nbsp;number&nbsp;of&nbsp;required&nbsp;ticks</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attempts=0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Count&nbsp;of&nbsp;attempts</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;success=</span><span class="f_CodeExample" style="color: #0000ff;">false</span><span class="f_CodeExample">;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;The&nbsp;flag&nbsp;of&nbsp;a&nbsp;successful&nbsp;copying&nbsp;of&nbsp;ticks</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">MqlTick</span><span class="f_CodeExample">&nbsp;tick_array[];&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Tick&nbsp;receiving&nbsp;array</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">MqlTick</span><span class="f_CodeExample">&nbsp;lasttick;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;To&nbsp;receive&nbsp;last&nbsp;tick&nbsp;data</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">SymbolInfoTick</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff00ff;">_Symbol</span><span class="f_CodeExample">,lasttick);</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Make&nbsp;3&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;ticks</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">while</span><span class="f_CodeExample">(attempts&lt;3)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Measuring&nbsp;start&nbsp;time&nbsp;before&nbsp;receiving&nbsp;the&nbsp;ticks</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">uint</span><span class="f_CodeExample">&nbsp;start=</span><span class="f_CodeExample" style="color: #0000ff;">GetTickCount</span><span class="f_CodeExample">();</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Requesting&nbsp;the&nbsp;tick&nbsp;history&nbsp;since&nbsp;1970.01.01&nbsp;00:00.001&nbsp;(parameter&nbsp;from=1&nbsp;ms)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;received=</span><span class="f_CodeExample" style="color: #0000ff;">CopyTicks</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff00ff;">_Symbol</span><span class="f_CodeExample">,tick_array,</span><span class="f_CodeExample" style="color: #0000ff;">COPY_TICKS_ALL</span><span class="f_CodeExample">,1,</span><span class="f_CodeExample" style="color: #c0504d;">getticks</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(received!=-1)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Showing&nbsp;information&nbsp;about&nbsp;the&nbsp;number&nbsp;of&nbsp;ticks&nbsp;and&nbsp;spent&nbsp;time</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;%s:&nbsp;received&nbsp;%d&nbsp;ticks&nbsp;in&nbsp;%d&nbsp;ms&quot;</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #ff00ff;">_Symbol</span><span class="f_CodeExample">,received,</span><span class="f_CodeExample" style="color: #0000ff;">GetTickCount</span><span class="f_CodeExample">()-start);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;If&nbsp;the&nbsp;tick&nbsp;history&nbsp;is&nbsp;synchronized,&nbsp;the&nbsp;error&nbsp;code&nbsp;is&nbsp;equal&nbsp;to&nbsp;zero</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">GetLastError</span><span class="f_CodeExample">()==0)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success=</span><span class="f_CodeExample" style="color: #0000ff;">true</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">break</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">else</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;%s:&nbsp;Ticks&nbsp;are&nbsp;not&nbsp;synchronized&nbsp;yet,&nbsp;%d&nbsp;ticks&nbsp;received&nbsp;for&nbsp;%d&nbsp;ms.&nbsp;Error=%d&quot;</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">_Symbol</span><span class="f_CodeExample">,received,</span><span class="f_CodeExample" style="color: #0000ff;">GetTickCount</span><span class="f_CodeExample">()-start,</span><span class="f_CodeExample" style="color: #0000ff;">_LastError</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Counting&nbsp;attempts</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attempts++;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;A&nbsp;one-second&nbsp;pause&nbsp;to&nbsp;wait&nbsp;for&nbsp;the&nbsp;end&nbsp;of&nbsp;synchronization&nbsp;of&nbsp;the&nbsp;tick&nbsp;database</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Sleep</span><span class="f_CodeExample">(1000);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Receiving&nbsp;the&nbsp;requested&nbsp;ticks&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;tick&nbsp;history&nbsp;failed&nbsp;in&nbsp;three&nbsp;attempts</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(!success)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Error!&nbsp;Failed&nbsp;to&nbsp;receive&nbsp;%d&nbsp;ticks&nbsp;of&nbsp;%s&nbsp;in&nbsp;three&nbsp;attempts&quot;</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #c0504d;">getticks</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #ff00ff;">_Symbol</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;ticks=</span><span class="f_CodeExample" style="color: #0000ff;">ArraySize</span><span class="f_CodeExample">(tick_array);</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Showing&nbsp;the&nbsp;time&nbsp;of&nbsp;the&nbsp;first&nbsp;tick&nbsp;in&nbsp;the&nbsp;array</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;firstticktime=tick_array[ticks-1].time;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Last&nbsp;tick&nbsp;time&nbsp;=&nbsp;%s.%03I64u&quot;</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">TimeToString</span><span class="f_CodeExample">(firstticktime,</span><span class="f_CodeExample" style="color: #0000ff;">TIME_DATE</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #0000ff;">TIME_MINUTES</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #0000ff;">TIME_SECONDS</span><span class="f_CodeExample">),tick_array[ticks-1].time_msc%1000);</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Show&nbsp;the&nbsp;time&nbsp;of&nbsp;the&nbsp;last&nbsp;tick&nbsp;in&nbsp;the&nbsp;array</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;lastticktime=tick_array[0].time;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;First&nbsp;tick&nbsp;time&nbsp;=&nbsp;%s.%03I64u&quot;</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">TimeToString</span><span class="f_CodeExample">(lastticktime,</span><span class="f_CodeExample" style="color: #0000ff;">TIME_DATE</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #0000ff;">TIME_MINUTES</span><span class="f_CodeExample">|</span><span class="f_CodeExample" style="color: #0000ff;">TIME_SECONDS</span><span class="f_CodeExample">),tick_array[0].time_msc%1000);</span>
<br><span class="f_CodeExample">&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff00ff;">MqlDateTime</span><span class="f_CodeExample">&nbsp;today;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;current_time=</span><span class="f_CodeExample" style="color: #0000ff;">TimeCurrent</span><span class="f_CodeExample">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">TimeToStruct</span><span class="f_CodeExample">(current_time,today);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;current_time=%s&quot;</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #0000ff;">TimeToString</span><span class="f_CodeExample">(current_time));&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;today.hour=0;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;today.min=0;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;today.sec=0;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;startday=</span><span class="f_CodeExample" style="color: #0000ff;">StructToTime</span><span class="f_CodeExample">(today);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;endday=startday+24*60*60;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">((ticks=</span><span class="f_CodeExample" style="color: #0000ff;">CopyTicksRange</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">_Symbol</span><span class="f_CodeExample">,tick_array,</span><span class="f_CodeExample" style="color: #0000ff;">COPY_TICKS_ALL</span><span class="f_CodeExample">,startday*1000,endday*1000))==-1)&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;CopyTicksRange(%s,tick_array,COPY_TICKS_ALL,%s,%s)&nbsp;failed,&nbsp;error&nbsp;%d&quot;</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff00ff;">_Symbol</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #0000ff;">TimeToString</span><span class="f_CodeExample">(startday),</span><span class="f_CodeExample" style="color: #0000ff;">TimeToString</span><span class="f_CodeExample">(endday),</span><span class="f_CodeExample" style="color: #0000ff;">GetLastError</span><span class="f_CodeExample">());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;ticks=</span><span class="f_CodeExample" style="color: #0000ff;">MathMax</span><span class="f_CodeExample">(100,ticks);</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Showing&nbsp;the&nbsp;first&nbsp;100&nbsp;ticks&nbsp;of&nbsp;the&nbsp;last&nbsp;day</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;counter=0;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;i=0;i&lt;ticks;i++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;time=tick_array[i].time;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">((time&gt;=startday)&nbsp;&amp;&amp;&nbsp;(time&lt;endday)&nbsp;&amp;&amp;&nbsp;counter&lt;100)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counter++;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;%d.&nbsp;%s&quot;</span><span class="f_CodeExample">,counter,GetTickDescription(tick_array[i]));</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Showing&nbsp;the&nbsp;first&nbsp;100&nbsp;deals&nbsp;of&nbsp;the&nbsp;last&nbsp;day</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;counter=0;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;i=0;i&lt;ticks;i++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;time=tick_array[i].time;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">((time&gt;=startday)&nbsp;&amp;&amp;&nbsp;(time&lt;endday)&nbsp;&amp;&amp;&nbsp;counter&lt;100)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(((tick_array[i].flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_BUY</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_BUY</span><span class="f_CodeExample">)&nbsp;||&nbsp;((tick_array[i].flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_SELL</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_SELL</span><span class="f_CodeExample">))</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counter++;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;%d.&nbsp;%s&quot;</span><span class="f_CodeExample">,counter,GetTickDescription(tick_array[i]));</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Returns&nbsp;the&nbsp;string&nbsp;description&nbsp;of&nbsp;a&nbsp;tick&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;GetTickDescription(</span><span class="f_CodeExample" style="color: #0000ff;">MqlTick</span><span class="f_CodeExample">&nbsp;&amp;tick)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;desc=</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;%s.%03d&nbsp;&quot;</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">TimeToString</span><span class="f_CodeExample">(tick.time),tick.time_msc%1000);</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Checking&nbsp;flags</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;buy_tick=((tick.flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_BUY</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_BUY</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;sell_tick=((tick.flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_SELL</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_SELL</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;ask_tick=((tick.flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_ASK</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_ASK</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;bid_tick=((tick.flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_BID</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_BID</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;last_tick=((tick.flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_LAST</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_LAST</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">volume_tick</span><span class="f_CodeExample">=((tick.flags&amp;</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_VOLUME</span><span class="f_CodeExample">)==</span><span class="f_CodeExample" style="color: #0000ff;">TICK_FLAG_VOLUME</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Checking&nbsp;trading&nbsp;flags&nbsp;in&nbsp;a&nbsp;tick&nbsp;first</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(buy_tick&nbsp;||&nbsp;sell_tick)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Forming&nbsp;an&nbsp;output&nbsp;for&nbsp;the&nbsp;trading&nbsp;tick</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(buy_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Buy&nbsp;Tick:&nbsp;Last=%G&nbsp;Volume=%d&nbsp;&quot;</span><span class="f_CodeExample">,tick.last,tick.volume):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(sell_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Sell&nbsp;Tick:&nbsp;Last=%G&nbsp;Volume=%d&nbsp;&quot;</span><span class="f_CodeExample">,tick.last,tick.volume):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(ask_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Ask=%G&nbsp;&quot;</span><span class="f_CodeExample">,tick.ask):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(bid_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Bid=%G&nbsp;&quot;</span><span class="f_CodeExample">,tick.ask):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+</span><span class="f_CodeExample" style="color: #008080;">&quot;(Trade&nbsp;tick)&quot;</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">else</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Form&nbsp;a&nbsp;different&nbsp;output&nbsp;for&nbsp;an&nbsp;info&nbsp;tick</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(ask_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Ask=%G&nbsp;&quot;</span><span class="f_CodeExample">,tick.ask):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(bid_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Bid=%G&nbsp;&quot;</span><span class="f_CodeExample">,tick.ask):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(last_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Last=%G&nbsp;&quot;</span><span class="f_CodeExample">,tick.last):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+(volume_tick?</span><span class="f_CodeExample" style="color: #0000ff;">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Volume=%d&nbsp;&quot;</span><span class="f_CodeExample">,tick.volume):</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc=desc+</span><span class="f_CodeExample" style="color: #008080;">&quot;(Info&nbsp;tick)&quot;</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Returning&nbsp;tick&nbsp;description</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">&nbsp;desc;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">/*&nbsp;Example&nbsp;of&nbsp;the&nbsp;output</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">Si-12.16:&nbsp;received&nbsp;11048387&nbsp;ticks&nbsp;in&nbsp;4937&nbsp;ms</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">Last&nbsp;tick&nbsp;time&nbsp;=&nbsp;2016.09.26&nbsp;18:32:59.775&nbsp;</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">First&nbsp;tick&nbsp;time&nbsp;=&nbsp;2015.06.18&nbsp;09:45:01.000&nbsp;</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">1.&nbsp;&nbsp;2016.09.26&nbsp;09:45.249&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">2.&nbsp;&nbsp;2016.09.26&nbsp;09:47.420&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">3.&nbsp;&nbsp;2016.09.26&nbsp;09:50.893&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">4.&nbsp;&nbsp;2016.09.26&nbsp;09:51.827&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">5.&nbsp;&nbsp;2016.09.26&nbsp;09:53.810&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">6.&nbsp;&nbsp;2016.09.26&nbsp;09:54.491&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">7.&nbsp;&nbsp;2016.09.26&nbsp;09:55.913&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">8.&nbsp;&nbsp;2016.09.26&nbsp;09:59.350&nbsp;Ask=65370&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">9.&nbsp;&nbsp;2016.09.26&nbsp;09:59.678&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">10.&nbsp;2016.09.26&nbsp;10:00.000&nbsp;Sell&nbsp;Tick:&nbsp;Last=65367&nbsp;Volume=3&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">11.&nbsp;2016.09.26&nbsp;10:00.000&nbsp;Sell&nbsp;Tick:&nbsp;Last=65335&nbsp;Volume=45&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">12.&nbsp;2016.09.26&nbsp;10:00.000&nbsp;Sell&nbsp;Tick:&nbsp;Last=65334&nbsp;Volume=95&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">13.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65319&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">14.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65317&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">15.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65316&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">16.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65316&nbsp;Volume=10&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">17.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65315&nbsp;Volume=5&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">18.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65313&nbsp;Volume=3&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">19.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65307&nbsp;Volume=25&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">20.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65304&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">21.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65301&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">22.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65301&nbsp;Volume=10&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">23.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65300&nbsp;Volume=5&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">24.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65300&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">25.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65300&nbsp;Volume=6&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">26.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Sell&nbsp;Tick:&nbsp;Last=65299&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">27.&nbsp;2016.09.26&nbsp;10:00.191&nbsp;Bid=65370&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">28.&nbsp;2016.09.26&nbsp;10:00.232&nbsp;Ask=65297&nbsp;(Info&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">29.&nbsp;2016.09.26&nbsp;10:00.276&nbsp;Sell&nbsp;Tick:&nbsp;Last=65291&nbsp;Volume=31&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">30.&nbsp;2016.09.26&nbsp;10:00.276&nbsp;Sell&nbsp;Tick:&nbsp;Last=65290&nbsp;Volume=1&nbsp;(Trade&nbsp;tick)</span>
<br><span class="f_CodeExample" style="color: #7f7f7f;">*/</span></p>
</td>
</tr>
</table>
</div>
<p class="p_BoldTitles"><span class="f_BoldTitles">See also</span></p>
<p class="p_SeeAlso"><span class="f_SeeAlso"><a href="symbolinfotick.htm" class="topiclink">SymbolInfoTick</a>, <a href="mqltick.htm" class="topiclink">Structure for Current Prices</a>, <a href="ontick.htm" class="topiclink">OnTick()</a></span></p>

</div>

</body>
</html>
