<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>3.9 Creating training and testing samples</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          Neural Networks for Algorithmic Trading with MQL5 </a> / <a class="h_m" href="3_realization.htm"> 3. Building the first neural network model in MQL5 </a>/ 3.9 Creating training and testing samples
          </td>
          <td width="70" align="right">
          <a href="3_8_pr_py.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="3_10_check_gradient.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H2"><span class="f_H2">3.9 Creating training and testing samples</span></p>
<p class="p_Text"><span class="f_Text">We have come quite a long way in building our library for building neural networks. We have completed the work on constructing the basic dispatcher class for our neural network and have created everything necessary for building a fully connected neural layer. We still have a lot of work to do. However, we can already build our first neural network and test its performance using real data. Since we will have several implementations of various architectural solutions, to compare the results of model performance, we will take a small data subset. Let's create two data samples: a larger one for training the neural network and a smaller one for testing the trained neural network.</span></p>
<p class="p_Text"><span class="f_Text">Allocating a separate sample for training is a common practice. During the training process of a neural network, weights are adjusted in such a way that the neural network accurately describes the training dataset to the best extent possible. By using a sufficiently large number of weights, the neural network is able to learn the training sample down to the smallest detail. However, in doing so, the neural network loses the ability to generalize the data. In such a state, the neural network is called &quot;</span><span class="f_Text" style="font-style: italic;">overfitted</span><span class="f_Text">&quot;. It is not possible to detect this in a training sample. However, if you compare the performance of the neural network on the training dataset and on data that is not part of the training dataset, the difference in results will clearly indicate this. A slight deterioration of the results on the test sample is allowed, but it should not be drastic. Of course, the data in the samples should be comparable. Most often, to achieve this, the overall available data is randomly divided into two sets in a ratio of 70-80% for the training dataset and 20-30% for the testing dataset. In most cases, it will be necessary to divide the general population into three subsamples:</span></p>
<ul style="list-style-type:disc">
<li class="p_li"><span class="f_li">training 60%</span></li>
<li class="p_li"><span class="f_li">validation 20%</span></li>
<li class="p_li"><span class="f_li">test 20%</span></li>
</ul>
<p class="p_Text"><span class="f_Text">The validation dataset is used to select the best training parameters and neural network architecture. However, we will not be using a validation dataset at this point, as we would like to compare different implementations under otherwise equal conditions.</span></p>
<p class="p_Text"><span class="f_Text">To generate samples, let's create the script </span><span class="f_Text" style="font-style: italic;">create_initial_data.mq5</span><span class="f_Text">. In the script we will specify the following parameters:</span></p>
<ul style="list-style-type:disc">
<li class="p_li"><span class="f_li">The period for loading data is specified as a start date and an end date; within this period, we will retrieve historical data and indicator data from the server;</span></li>
<li class="p_li"><span class="f_li">Timeframe used to load the analyzed data;</span></li>
<li class="p_li"><span class="f_li">Number of analyzed historical bars per pattern;</span></li>
<li class="p_li"><span class="f_li">Name of files for recording training and test samples;</span></li>
<li class="p_li"><span class="f_li">Data normalization flag.</span></li>
</ul>
<p class="p_Text"><span class="f_Text">Earlier, we discussed extensively the importance of normalizing the data that is fed into the neural network as input. Now, we can practically verify how data normalization affects the results of training the neural network. It is to assess the impact of this factor that I introduced the data normalization parameter. Here, it's important to note that the data fed into the neural network as input should be comparable both in the testing and training datasets, as well as during the practical application operation of the neural network. Therefore, in practice, it will be necessary to store the normalization parameters and use them when normalizing data coming in during the practical application of the neural network.</span></p>
<p class="p_Text"><span class="f_Text">Recall that in the section on <a href="3_3_initial_data.htm" class="topiclink">selecting the input data</a> to feed into the neural network, we selected two indicators: RSI and MACD. We will use them during the process of training neural networks within the practical experiments outlined in this book.</span></p>
<p class="p_Text"><span class="f_Text">Let's look at the script algorithm. Initially, following the analogy with the scripts discussed while selecting the source data, we will connect the selected indicators to the chart and obtain handles for accessing the indicator data.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;External&nbsp;parameters&nbsp;for&nbsp;script&nbsp;operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;Beginning&nbsp;of&nbsp;the&nbsp;period&nbsp;of&nbsp;the&nbsp;general&nbsp;population</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">Start</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">D'2015.01.01&nbsp;00:00:00'</span><span class="f_CodeExample">;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;End&nbsp;of&nbsp;the&nbsp;period&nbsp;of&nbsp;the&nbsp;general&nbsp;population</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">End</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">D'2020.12.31&nbsp;23:59:00'</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;Timeframe&nbsp;for&nbsp;data&nbsp;loading</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_Definition">ENUM_TIMEFRAMES</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TimeFrame</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Definition">PERIOD_M5</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;Number&nbsp;of&nbsp;historical&nbsp;bars&nbsp;in&nbsp;one&nbsp;pattern</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">BarsToLine</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample">40</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;File&nbsp;name&nbsp;for&nbsp;recording&nbsp;the&nbsp;training&nbsp;sample</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">StudyFileName</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;study_data.csv&quot;</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;File&nbsp;name&nbsp;for&nbsp;recording&nbsp;the&nbsp;test&nbsp;sample</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TestFileName</span><span class="f_CodeExample">&nbsp;&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;test_data.csv&quot;</span><span class="f_CodeExample">;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;Data&nbsp;normalization&nbsp;flag</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">NormalizeData</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">true</span><span class="f_CodeExample">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Beginning&nbsp;of&nbsp;the&nbsp;script&nbsp;program&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_Functions">OnStart</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Connect&nbsp;indicators&nbsp;to&nbsp;the&nbsp;chart</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">h_ZZ</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">iCustom</span><span class="f_CodeExample">(</span><span class="f_Definition">_Symbol</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TimeFrame</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;Examples\\ZigZag.ex5&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">48</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">47</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">h_RSI</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">iRSI</span><span class="f_CodeExample">(</span><span class="f_Definition">_Symbol</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TimeFrame</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">12</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">PRICE_TYPICAL</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">h_MACD</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">iMACD</span><span class="f_CodeExample">(</span><span class="f_Definition">_Symbol</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TimeFrame</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">12</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">48</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">12</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">PRICE_TYPICAL</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_Functions">CopyClose</span><span class="f_CodeExample">(</span><span class="f_Definition">_Symbol</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TimeFrame</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">Start</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">End</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_li">After that, we check the validity of the obtained handles and load the historical data of indicators into dynamic arrays. It should be noted that for the ZigZag indicator, we will load a bit more data. The reason for this is the specifics of this indicator. The buffer of this indicator points only to the found extrema. In other cases, the indicator returns zero values. Therefore, for the last patterns analyzed, the target values may be outside the analyzed period.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Load&nbsp;indicator&nbsp;data&nbsp;into&nbsp;dynamic&nbsp;arrays</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">zz</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">rsi</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">end_zz</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">End</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_Functions">PeriodSeconds</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #b22222;">TimeFrame</span><span class="f_CodeExample">)&nbsp;*&nbsp;</span><span class="f_CodeExample">500</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">h_ZZ</span><span class="f_CodeExample">&nbsp;==&nbsp;</span><span class="f_Definition">INVALID_HANDLE</span><span class="f_CodeExample">&nbsp;||&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">CopyBuffer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">h_ZZ</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">Start</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">end_zz</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">zz</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Error&nbsp;loading&nbsp;indicator&nbsp;%s&nbsp;data&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;ZigZag&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">h_RSI</span><span class="f_CodeExample">&nbsp;==&nbsp;</span><span class="f_Definition">INVALID_HANDLE</span><span class="f_CodeExample">&nbsp;||&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">CopyBuffer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">h_RSI</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">Start</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">End</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">rsi</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Error&nbsp;loading&nbsp;indicator&nbsp;%s&nbsp;data&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;RSI&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">h_MACD</span><span class="f_CodeExample">&nbsp;==&nbsp;</span><span class="f_Definition">INVALID_HANDLE</span><span class="f_CodeExample">&nbsp;||&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">CopyBuffer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">h_MACD</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">MAIN_LINE</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">Start</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">End</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">&nbsp;||</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">CopyBuffer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">h_MACD</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">SIGNAL_LINE</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">Start</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">End</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Error&nbsp;loading&nbsp;indicator&nbsp;%s&nbsp;data&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;MACD&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">In addition to the selected indicators, let's load the candlestick closing prices. We will use these handles to determine the direction of price movement towards the nearest extremum and the strength of the upcoming movement.</span></p>
<p class="p_Text"><span class="f_Text">After loading the data, we organize the process of determining the target values at each step of the historical data. To do this, we will create a reverse loop and loop through all the values of the ZigZag indicator and if the value differs from zero, we will save it to the extremum variable. Simultaneously, we will iterate through closing price values, and by measuring the deviation of the last recorded extremum from the closing price, we will determine the direction and strength of the upcoming movement. Let's save the obtained values into dynamic arrays target1 and target2.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">target1</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #333333;">test</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_Functions">ArrayResize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">target1</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">&nbsp;||&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">ArrayResize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">&nbsp;||</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">ArrayResize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">test</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">&nbsp;||&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">ArrayResize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">)&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Calculate&nbsp;targets:&nbsp;direction&nbsp;and&nbsp;distance&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;to&nbsp;the&nbsp;nearest&nbsp;extremum</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">extremum</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample">-1</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">zz</span><span class="f_CodeExample">)&nbsp;-&nbsp;</span><span class="f_CodeExample">2</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&gt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">--)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">zz</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">]&nbsp;&gt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">&nbsp;&amp;&amp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">zz</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">]&nbsp;!=&nbsp;</span><span class="f_Definition">EMPTY_VALUE</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">extremum</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">zz</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&gt;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">continue</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">extremum</span><span class="f_CodeExample">&nbsp;-&nbsp;</span><span class="f_CodeExample" style="color: #333333;">close</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">target1</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;=&nbsp;(</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;&gt;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">&nbsp;:&nbsp;</span><span class="f_CodeExample">-1</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;-&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Here, it's important to note that on a time chart, the extremum should always come after the analyzed closing price. Therefore, the closing price is taken from the previous bar compared to the last checked value of the ZigZag indicator.</span></p>
<p class="p_Text"><span class="f_Text">In the same loop, we will determine the distance between the main and signal lines of the MACD indicator and store them in a separate dynamic array called macd_delta.</span></p>
<p class="p_Text"><span class="f_Text">After calculating the targets and the distance between the MACD indicator lines, we normalize the data. Of course, we will perform normalization only when this requirement is specified by the user in the script parameters. The purpose of normalization is to transform the original data so that its values are in the range of -1 to 1 centered on point 0. It's important to pay attention to a series of introductory aspects that stem from the characteristics of the indicators themselves.</span></p>
<p class="p_Text"><span class="f_Text">The RSI indicator is constructed in such a way that its values are normalized within a range from 0 to 100. Hence, we do not need to determine the maximum and minimum data value of this indicator to normalize it. Therefore, the algorithm for normalizing the readings of this indicator is limited by the constant 50 which is the middle of the range of possible indicator values. The formula for normalizing the values is as follows.</span></p>
<p class="p_li" style="text-align: center;"><span style="display:inline-block;width:170px;height:41px;padding:0 0;overflow:visible"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;overflow:visible" viewBox="0 0 680 164"><path d="M30 89 C31 90,32 91,33 92 C34 93,34 95,35 97 L36 102 C36 103,36 104,37 105 C37 106,37 107,38 108 C38 109,39 109,39 110 C40 110,41 110,42 110 L42 112 L31 112 C31 110,30 107,29 104 L28 96 C28 95,27 94,27 93 C26 92,26 91,25 90 C25 90,24 90,24 89 C23 89,22 89,21 89 L17 89 L14 101 C14 102,14 103,14 103 C14 104,14 105,14 105 C14 106,14 106,14 107 C14 108,14 108,14 109 C14 109,15 109,15 110 C16 110,16 110,18 110 L17 112 L2 112 L2 110 C3 110,4 110,5 109 C5 109,5 109,6 108 C6 107,6 107,7 106 C7 105,7 103,8 101 L14 73 C15 71,15 69,15 67 C15 66,15 65,14 65 C14 64,13 64,11 64 L12 62 L28 62 C31 62,33 62,34 63 C36 63,37 63,39 64 C40 65,41 65,41 66 C42 67,43 68,43 69 C44 71,44 72,44 73 C44 77,43 80,40 82 C38 85,35 87,30 88 L30 89 Z M22 86 C25 86,28 86,30 85 C32 84,34 82,35 80 C36 78,37 76,37 73 C37 72,37 71,37 70 C36 70,36 69,36 68 C36 68,35 67,35 67 C34 67,34 66,33 66 C32 66,31 65,30 65 C29 65,28 65,26 65 C25 65,24 65,22 65 L18 86 L22 86 Z" fill="#212121"/><path d="M54 101 C54 104,55 106,56 108 C58 109,60 110,63 110 C66 110,69 109,71 107 C72 105,73 103,73 99 C73 98,73 96,73 95 C72 94,71 93,70 92 C69 91,68 90,66 88 C64 87,62 86,61 84 C60 83,59 82,58 81 C58 79,57 77,57 76 C57 73,58 70,59 68 C61 66,63 64,65 63 C68 62,71 61,74 61 C76 61,78 61,80 62 C82 62,84 62,87 63 L85 72 L81 72 C81 70,81 69,80 67 C80 66,79 65,78 65 C77 64,75 64,74 64 C72 64,70 65,68 65 C67 66,66 67,65 69 C64 70,64 72,64 74 C64 75,64 77,65 78 C66 80,68 82,71 83 C73 85,75 87,76 88 C77 89,78 91,79 92 C80 94,80 96,80 97 C80 101,79 103,78 106 C76 108,74 110,72 111 C69 112,66 113,63 113 C61 113,58 113,56 113 C53 112,51 112,49 111 L51 101 L54 101 Z" fill="#212121"/><path d="M102 101 C102 103,102 104,102 105 C102 106,102 106,102 107 C102 108,102 109,102 109 C103 110,104 110,105 110 L105 112 L90 112 L90 110 C91 110,92 110,93 109 C93 109,93 109,94 108 C94 107,94 107,95 106 C95 105,95 103,96 101 L102 73 C103 71,103 69,103 67 C103 66,103 65,102 65 C101 64,101 64,99 64 L100 62 L114 62 L114 64 C113 64,112 65,112 65 C112 65,111 65,111 66 C111 66,110 67,110 68 C110 69,109 71,109 73 L102 101 Z" fill="#212121"/><path d="M142 71 C142 70,142 68,143 67 C143 65,143 64,144 62 C144 61,144 59,145 58 C145 57,145 55,146 54 C146 53,146 52,146 51 C146 50,146 49,146 48 C146 48,146 47,146 47 C145 46,145 46,144 46 L144 44 L154 44 L154 46 C153 46,152 46,152 47 C152 47,151 47,151 47 C151 48,151 48,150 49 C150 50,150 51,150 52 L144 79 L140 79 C139 77,138 74,137 72 C136 69,135 67,134 64 C133 62,132 59,131 57 C130 54,129 52,129 50 L128 50 C128 50,128 51,128 52 C128 52,128 53,127 54 C127 55,127 56,127 57 C127 57,127 58,126 59 C126 60,126 61,126 62 C126 62,125 63,125 64 C125 65,125 67,125 68 C124 69,124 70,124 71 C124 72,124 72,123 73 C123 74,123 75,123 75 C123 76,123 76,124 77 C124 77,125 77,126 77 L126 79 L116 79 L116 77 C117 77,117 77,117 77 C118 77,118 76,118 76 C119 76,119 75,119 74 C119 74,120 73,120 71 L124 52 C125 51,125 51,125 50 C125 49,125 49,125 48 C125 47,125 47,124 47 C124 46,123 46,122 46 L122 44 L132 44 C133 46,133 49,134 51 C135 53,136 55,137 58 C138 60,139 62,139 64 C140 67,141 69,142 71 L142 71 Z" fill="#212121"/><path d="M169 79 C168 79,166 79,165 78 C164 78,163 77,162 77 C161 76,161 75,160 74 C160 73,159 71,159 70 C159 67,160 65,161 63 C162 61,163 59,164 57 C165 56,167 54,169 53 C171 53,173 52,175 52 C177 52,178 52,179 53 C181 53,182 54,183 55 C183 56,184 57,184 58 C185 59,185 60,185 62 C185 64,185 67,184 69 C183 71,182 73,180 74 C179 76,177 77,175 78 C173 79,171 79,169 79 L169 79 Z M165 70 C165 72,165 74,166 75 C167 76,168 76,170 76 C171 76,172 76,173 75 C174 75,174 74,175 74 C176 73,176 72,177 71 C178 70,178 69,178 68 C179 67,179 66,179 64 C180 63,180 62,180 61 C180 59,179 58,178 57 C178 56,176 55,175 55 C174 55,173 55,172 56 C171 56,170 57,170 57 C169 58,168 59,168 60 C167 61,166 62,166 63 C166 64,165 66,165 67 C165 68,165 69,165 70 L165 70 Z" fill="#212121"/><path d="M197 62 C197 61,197 60,197 60 C197 59,197 58,197 58 C197 57,197 56,196 56 C195 56,195 56,195 56 C194 56,194 57,194 57 C193 57,193 58,192 58 C192 58,192 59,191 59 L189 58 C190 57,191 56,192 55 C192 54,193 54,194 53 C194 53,195 53,196 52 C196 52,197 52,198 52 C199 52,200 53,201 53 C202 54,202 55,202 57 C202 58,202 58,202 59 L202 59 C204 57,206 55,207 54 C209 53,211 52,213 52 C213 52,214 52,214 52 C215 52,216 52,216 52 L215 59 L212 59 C212 58,211 57,211 57 C211 56,210 56,209 56 C209 56,209 56,208 56 C207 57,207 57,206 58 C206 58,205 59,204 59 C204 60,203 61,203 62 C202 62,202 63,201 64 C201 65,201 66,201 67 L198 79 L193 79 L197 62 Z" fill="#212121"/><path d="M243 79 L237 79 C238 78,238 77,238 76 C239 74,239 73,239 72 C240 70,240 69,240 68 C240 67,241 65,241 64 C241 63,241 62,242 61 C242 60,242 60,242 59 C242 58,242 57,241 57 C241 56,240 56,239 56 C238 56,237 56,236 57 C235 58,234 58,233 59 C233 61,232 62,231 63 C230 64,230 65,230 67 L227 79 L222 79 L226 62 C226 61,226 60,226 60 C226 59,226 58,226 58 C226 57,226 56,225 56 C224 56,224 56,224 56 C223 56,223 57,223 57 C222 57,222 58,221 58 C221 58,221 59,220 59 L218 58 C219 57,220 56,221 55 C221 54,222 54,223 53 C223 53,224 53,225 52 C225 52,226 52,227 52 C228 52,229 53,230 53 C231 54,231 55,231 57 C231 57,231 58,231 58 C231 58,231 59,231 59 L231 59 C233 57,234 55,236 54 C238 53,239 52,241 52 C243 52,245 53,246 54 C246 55,247 56,247 58 C247 58,247 58,247 58 C247 58,247 59,247 59 L247 59 C249 56,250 55,252 54 C254 53,255 52,257 52 C259 52,260 53,261 54 C262 55,263 56,263 58 C263 58,263 59,262 60 C262 61,262 62,262 63 C262 64,261 65,261 66 C261 67,260 68,260 69 C260 70,260 70,260 71 C260 71,260 72,260 72 C259 72,259 72,259 73 C259 73,259 73,259 73 C259 74,259 74,260 75 C260 75,260 75,261 75 C261 75,262 75,262 75 C262 75,263 75,263 74 C263 74,264 74,264 73 C265 73,265 72,266 72 L267 73 C267 75,266 75,265 76 C264 77,264 77,263 78 C262 78,262 79,261 79 C260 79,259 79,259 79 C258 79,257 79,257 79 C256 79,256 78,255 78 C255 77,255 77,255 76 C254 76,254 75,254 74 C254 73,255 71,255 69 C256 68,256 67,256 66 C256 65,257 64,257 63 C257 62,257 62,257 61 C257 60,257 60,257 59 C257 58,257 57,257 57 C256 56,256 56,255 56 C254 56,254 56,253 57 C252 57,252 57,251 58 C251 58,250 59,249 59 C249 60,248 61,248 62 C247 62,247 63,246 64 C246 65,246 66,245 67 L243 79 Z" fill="#212121"/><path d="M124 100 L122 106 L117 106 L118 100 L124 100 Z M117 128 C117 129,117 130,117 131 C117 131,117 132,117 132 C117 133,117 133,117 134 C117 134,118 134,118 134 C119 134,119 134,119 134 C120 134,120 134,120 133 C121 133,121 133,121 132 C122 132,122 131,123 131 L125 133 C124 134,123 135,122 135 C121 136,121 136,120 137 C119 137,119 138,118 138 C117 138,117 138,116 138 C115 138,115 138,114 138 C114 138,113 137,113 137 C112 136,112 136,112 135 C112 135,111 134,111 133 C111 133,112 132,112 131 C112 130,112 129,112 128 C113 127,113 126,113 125 C113 124,114 123,114 122 C114 121,114 120,114 119 C115 118,115 117,115 116 C115 116,115 116,115 115 C115 115,115 115,115 115 C115 114,115 114,114 114 C114 113,113 113,112 113 L112 111 L120 111 L121 111 L117 128 Z" fill="#212121"/><path d="M297 86 L297 81 L343 81 L343 86 L297 86 Z M297 101 L297 96 L343 96 L343 101 L297 101 Z" fill="#212121"/><path d="M399 29 C400 30,401 31,402 32 C403 33,403 35,404 37 L405 42 C405 43,405 44,406 45 C406 46,406 47,407 48 C407 49,408 49,408 50 C409 50,410 50,411 50 L411 52 L400 52 C400 50,399 47,398 44 L397 36 C397 35,396 34,396 33 C395 32,395 31,394 30 C394 30,393 30,393 29 C392 29,391 29,390 29 L386 29 L383 41 C383 42,383 43,383 43 C383 44,383 45,383 45 C383 46,383 46,383 47 C383 48,383 48,383 49 C383 49,384 49,384 50 C385 50,385 50,387 50 L386 52 L371 52 L371 50 C372 50,373 50,374 49 C374 49,374 49,375 48 C375 47,375 47,376 46 C376 45,376 43,377 41 L383 13 C384 11,384 9,384 7 C384 6,384 5,383 5 C383 4,382 4,380 4 L381 2 L397 2 C400 2,402 2,403 3 C405 3,406 3,408 4 C409 5,410 5,410 6 C411 7,412 8,412 9 C413 11,413 12,413 13 C413 17,412 20,409 22 C407 25,404 27,399 28 L399 29 Z M391 26 C394 26,397 26,399 25 C401 24,403 22,404 20 C405 18,406 16,406 13 C406 12,406 11,406 10 C405 10,405 9,405 8 C405 8,404 7,404 7 C403 7,403 6,402 6 C401 6,400 5,399 5 C398 5,397 5,395 5 C394 5,393 5,391 5 L387 26 L391 26 Z" fill="#212121"/><path d="M423 41 C423 44,424 46,425 48 C427 49,429 50,432 50 C435 50,438 49,440 47 C441 45,442 43,442 39 C442 38,442 36,442 35 C441 34,440 33,439 32 C438 31,437 30,435 28 C433 27,431 26,430 24 C429 23,428 22,427 21 C427 19,426 17,426 16 C426 13,427 10,428 8 C430 6,432 4,434 3 C437 2,440 1,443 1 C445 1,447 1,449 2 C451 2,453 2,456 3 L454 12 L450 12 C450 10,450 9,449 7 C449 6,448 5,447 5 C446 4,444 4,443 4 C441 4,439 5,437 5 C436 6,435 7,434 9 C433 10,433 12,433 14 C433 15,433 17,434 18 C435 20,437 22,440 23 C442 25,444 27,445 28 C446 29,447 31,448 32 C449 34,449 36,449 37 C449 41,448 43,447 46 C445 48,443 50,441 51 C438 52,435 53,432 53 C430 53,427 53,425 53 C422 52,420 52,418 51 L420 41 L423 41 Z" fill="#212121"/><path d="M471 41 C471 43,471 44,471 45 C471 46,471 46,471 47 C471 48,471 49,471 49 C472 50,473 50,474 50 L474 52 L459 52 L459 50 C460 50,461 50,462 49 C462 49,462 49,463 48 C463 47,463 47,464 46 C464 45,464 43,465 41 L471 13 C472 11,472 9,472 7 C472 6,472 5,471 5 C470 4,470 4,468 4 L469 2 L483 2 L483 4 C482 4,481 5,481 5 C481 5,480 5,480 6 C480 6,479 7,479 8 C479 9,478 11,478 13 L471 41 Z" fill="#212121"/><path d="M493 40 L491 46 L486 46 L487 40 L493 40 Z M486 68 C486 69,486 70,486 71 C486 71,486 72,486 72 C486 73,486 73,486 74 C486 74,487 74,487 74 C488 74,488 74,488 74 C489 74,489 74,489 73 C490 73,490 73,490 72 C491 72,491 71,492 71 L494 73 C493 74,492 75,491 75 C490 76,490 76,489 77 C488 77,488 78,487 78 C486 78,486 78,485 78 C484 78,484 78,483 78 C483 78,482 77,482 77 C481 76,481 76,481 75 C481 75,480 74,480 73 C480 73,481 72,481 71 C481 70,481 69,481 68 C482 67,482 66,482 65 C482 64,483 63,483 62 C483 61,483 60,483 59 C484 58,484 57,484 56 C484 56,484 56,484 55 C484 55,484 55,484 55 C484 54,484 54,483 54 C483 53,482 53,481 53 L481 51 L489 51 L490 51 L486 68 Z" fill="#212121"/><path d="M520 33 L520 28 L566 28 L566 33 L520 33 Z" fill="#212121"/><path d="M594 51 L594 43 L598 43 C599 46,600 47,601 48 C603 50,605 50,607 50 C610 50,613 49,615 47 C616 45,617 42,617 38 C617 36,617 34,616 32 C615 30,614 29,612 28 C611 27,609 27,607 27 C605 27,604 27,603 27 C602 28,600 28,599 28 L596 26 L596 2 L616 2 C616 2,617 2,617 2 C618 2,618 2,618 1 C619 1,619 1,619 0 L622 0 L621 8 L601 8 L601 25 C602 24,604 24,605 23 C607 23,608 23,609 23 C612 23,615 24,617 25 C619 26,621 28,622 30 C623 32,624 35,624 37 C624 41,623 44,622 46 C621 48,619 50,616 51 C614 52,611 53,607 53 C603 53,599 52,594 51 L594 51 Z M651 53 C645 53,641 51,639 47 C636 43,635 36,635 28 C635 23,635 19,636 16 C637 12,638 10,640 7 C641 5,643 4,645 3 C647 2,649 1,651 1 C657 1,661 3,663 7 C666 12,667 18,667 26 C667 35,666 42,663 46 C660 51,656 53,651 53 L651 53 Z M642 26 C642 35,643 41,644 44 C646 48,648 50,651 50 C654 50,656 48,658 45 C659 41,660 36,660 28 C660 22,660 18,659 14 C658 11,657 8,656 6 C655 5,653 4,651 4 C649 4,648 5,647 6 C646 7,645 8,644 10 C643 12,643 14,642 17 C642 20,642 23,642 26 L642 26 Z" fill="#212121"/><path d="M484 161 L484 153 L488 153 C489 156,490 157,491 158 C493 160,495 160,497 160 C500 160,503 159,505 157 C506 155,507 152,507 148 C507 146,507 144,506 142 C505 140,504 139,502 138 C501 137,499 137,497 137 C495 137,494 137,493 137 C492 138,490 138,489 138 L486 136 L486 112 L506 112 C506 112,507 112,507 112 C508 112,508 112,508 111 C509 111,509 111,509 110 L512 110 L511 118 L491 118 L491 135 C492 134,494 134,495 133 C497 133,498 133,499 133 C502 133,505 134,507 135 C509 136,511 138,512 140 C513 142,514 145,514 147 C514 151,513 154,512 156 C511 158,509 160,506 161 C504 162,501 163,497 163 C493 163,489 162,484 161 L484 161 Z M541 163 C535 163,531 161,529 157 C526 153,525 146,525 138 C525 133,525 129,526 126 C527 122,528 120,530 117 C531 115,533 114,535 113 C537 112,539 111,541 111 C547 111,551 113,553 117 C556 122,557 128,557 136 C557 145,556 152,553 156 C550 161,546 163,541 163 L541 163 Z M532 136 C532 145,533 151,534 154 C536 158,538 160,541 160 C544 160,546 158,548 155 C549 151,550 146,550 138 C550 132,550 128,549 124 C548 121,547 118,546 116 C545 115,543 114,541 114 C539 114,538 115,537 116 C536 117,535 118,534 120 C533 122,533 124,532 127 C532 130,532 133,532 136 L532 136 Z" fill="#212121"/><rect x="369" y="88" width="303" height="5" fill="#212121"/></svg></span></p>
<p class="p_Text"><span class="f_Text">The values of the MACD indicator do not have an upper and lower boundary of the range, but they are centered around point 0. This is because, based on the construction principles of the indicator, it reflects whether the price is above or below the moving average. The same can be said about the calculated distance between the base and signal lines of the indicator. The signal line can be either above or below the base line. However, at the moment the lines cross, the distance between them is 0. Therefore, for normalizing the data, we will take the value of the indicator and divide it by the absolute value of the maximum deviation over the analyzed period</span><span class="f_li">.</span></p>
<p class="p_li" style="text-align: center;"><span style="display:inline-block;width:385px;height:46px;padding:0 0;overflow:visible"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;overflow:visible" viewBox="0 0 1540 184"><path d="M50 61 L62 61 L61 63 C60 63,60 63,59 64 C59 64,59 64,58 65 C58 65,58 66,57 67 C57 68,57 70,56 72 L50 100 C49 102,49 103,49 104 C49 105,49 105,49 106 C49 107,49 108,50 108 C50 109,51 109,53 109 L52 111 L38 111 L38 109 C39 109,40 109,40 108 C41 108,41 108,41 107 C42 106,42 106,42 105 C42 104,43 102,43 100 L48 78 C49 75,50 72,50 69 L50 69 C49 70,48 73,45 78 L28 105 L24 105 L21 81 C21 78,20 74,20 68 L19 68 C18 74,17 79,16 83 L12 100 C12 103,12 104,12 106 C12 107,12 108,12 108 C13 109,14 109,15 109 L15 111 L2 111 L2 109 C3 109,4 109,5 108 C5 108,5 108,6 107 C6 106,6 106,7 105 C7 104,7 102,8 100 L14 72 C14 71,14 70,15 69 C15 68,15 67,15 66 C15 65,15 64,14 64 C13 63,12 63,11 63 L12 61 L25 61 L29 96 L50 61 Z" fill="#212121"/><path d="M92 111 L92 109 C94 109,95 108,95 107 C96 106,96 105,96 102 C96 101,96 100,96 99 L96 94 L80 94 L78 98 C77 100,76 101,76 102 C75 104,75 105,75 105 C75 108,76 109,79 109 L79 111 L64 111 L64 109 C65 109,65 109,66 108 C67 108,67 107,68 106 C69 105,70 103,71 101 L95 60 L100 60 L103 101 C103 103,103 105,104 106 C104 107,104 108,105 108 C106 109,106 109,107 109 L107 111 L92 111 Z M82 91 L96 91 L95 79 C95 78,95 76,95 73 C95 71,95 69,95 68 L95 68 L82 91 Z" fill="#212121"/><path d="M156 62 L153 71 L150 71 C150 68,149 66,148 65 C147 64,145 63,143 63 C139 63,136 65,133 68 C130 72,128 76,126 82 C125 88,124 93,124 98 C124 102,125 105,126 106 C127 108,129 109,132 109 C134 109,135 109,137 108 C138 108,139 107,141 105 C142 104,143 102,144 99 L148 99 L145 110 C141 111,136 112,131 112 C126 112,123 111,121 108 C118 105,117 102,117 96 C117 93,118 88,119 84 C120 79,122 75,124 71 C127 68,129 65,133 63 C136 61,139 60,143 60 C145 60,147 60,149 60 C151 61,153 61,156 62 L156 62 Z" fill="#212121"/><path d="M183 61 C186 61,189 61,192 62 C194 63,196 64,198 65 C200 66,201 68,202 71 C203 73,204 76,204 79 C204 83,204 86,203 89 C202 92,201 95,200 97 C198 100,197 102,195 104 C193 106,191 107,189 108 C187 109,185 110,183 110 C180 111,178 111,174 111 L159 111 L159 109 C160 109,161 109,162 109 C162 108,162 108,163 107 C163 107,163 106,164 105 C164 104,164 103,165 100 L171 72 C172 70,172 68,172 66 C172 65,172 64,171 64 C170 63,170 63,168 63 L169 61 L183 61 Z M170 108 C170 108,172 108,174 108 C178 108,181 107,184 106 C187 105,189 102,191 99 C193 97,194 93,195 90 C196 87,197 83,197 80 C197 74,196 71,193 68 C191 65,187 64,183 64 C182 64,180 64,179 64 L170 108 Z" fill="#212121"/><path d="M235 70 C235 69,235 67,236 66 C236 64,236 63,237 61 C237 60,237 58,238 57 C238 56,238 54,239 53 C239 52,239 51,239 50 C239 49,239 48,239 47 C239 47,239 46,239 46 C238 45,238 45,237 45 L237 43 L247 43 L247 45 C246 45,245 45,245 46 C245 46,244 46,244 46 C244 47,244 47,243 48 C243 49,243 50,243 51 L237 78 L233 78 C232 76,231 73,230 71 C229 68,228 66,227 63 C226 61,225 58,224 56 C223 53,222 51,222 49 L221 49 C221 49,221 50,221 51 C221 51,221 52,220 53 C220 54,220 55,220 56 C220 56,220 57,219 58 C219 59,219 60,219 61 C219 61,218 62,218 63 C218 64,218 66,218 67 C217 68,217 69,217 70 C217 71,217 71,216 72 C216 73,216 74,216 74 C216 75,216 75,217 76 C217 76,218 76,219 76 L219 78 L209 78 L209 76 C210 76,210 76,210 76 C211 76,211 75,211 75 C212 75,212 74,212 73 C212 73,213 72,213 70 L217 51 C218 50,218 50,218 49 C218 48,218 48,218 47 C218 46,218 46,217 46 C217 45,216 45,215 45 L215 43 L225 43 C226 45,226 48,227 50 C228 52,229 54,230 57 C231 59,232 61,232 63 C233 66,234 68,235 70 L235 70 Z" fill="#212121"/><path d="M262 78 C261 78,259 78,258 77 C257 77,256 76,255 76 C254 75,254 74,253 73 C253 72,252 70,252 69 C252 66,253 64,254 62 C255 60,256 58,257 56 C258 55,260 53,262 52 C264 52,266 51,268 51 C270 51,271 51,272 52 C274 52,275 53,276 54 C276 55,277 56,277 57 C278 58,278 59,278 61 C278 63,278 66,277 68 C276 70,275 72,273 73 C272 75,270 76,268 77 C266 78,264 78,262 78 L262 78 Z M258 69 C258 71,258 73,259 74 C260 75,261 75,263 75 C264 75,265 75,266 74 C267 74,267 73,268 73 C269 72,269 71,270 70 C271 69,271 68,271 67 C272 66,272 65,272 63 C273 62,273 61,273 60 C273 58,272 57,271 56 C271 55,269 54,268 54 C267 54,266 54,265 55 C264 55,263 56,263 56 C262 57,261 58,261 59 C260 60,259 61,259 62 C259 63,258 65,258 66 C258 67,258 68,258 69 L258 69 Z" fill="#212121"/><path d="M290 61 C290 60,290 59,290 59 C290 58,290 57,290 57 C290 56,290 55,289 55 C288 55,288 55,288 55 C287 55,287 56,287 56 C286 56,286 57,285 57 C285 57,285 58,284 58 L282 57 C283 56,284 55,285 54 C285 53,286 53,287 52 C287 52,288 52,289 51 C289 51,290 51,291 51 C292 51,293 52,294 52 C295 53,295 54,295 56 C295 57,295 57,295 58 L295 58 C297 56,299 54,300 53 C302 52,304 51,306 51 C306 51,307 51,307 51 C308 51,309 51,309 51 L308 58 L305 58 C305 57,304 56,304 56 C304 55,303 55,302 55 C302 55,302 55,301 55 C300 56,300 56,299 57 C299 57,298 58,297 58 C297 59,296 60,296 61 C295 61,295 62,294 63 C294 64,294 65,294 66 L291 78 L286 78 L290 61 Z" fill="#212121"/><path d="M336 78 L330 78 C331 77,331 76,331 75 C332 73,332 72,332 71 C333 69,333 68,333 67 C333 66,334 64,334 63 C334 62,334 61,335 60 C335 59,335 59,335 58 C335 57,335 56,334 56 C334 55,333 55,332 55 C331 55,330 55,329 56 C328 57,327 57,326 58 C326 60,325 61,324 62 C323 63,323 64,323 66 L320 78 L315 78 L319 61 C319 60,319 59,319 59 C319 58,319 57,319 57 C319 56,319 55,318 55 C317 55,317 55,317 55 C316 55,316 56,316 56 C315 56,315 57,314 57 C314 57,314 58,313 58 L311 57 C312 56,313 55,314 54 C314 53,315 53,316 52 C316 52,317 52,318 51 C318 51,319 51,320 51 C321 51,322 52,323 52 C324 53,324 54,324 56 C324 56,324 57,324 57 C324 57,324 58,324 58 L324 58 C326 56,327 54,329 53 C331 52,332 51,334 51 C336 51,338 52,339 53 C339 54,340 55,340 57 C340 57,340 57,340 57 C340 57,340 58,340 58 L340 58 C342 55,343 54,345 53 C347 52,348 51,350 51 C352 51,353 52,354 53 C355 54,356 55,356 57 C356 57,356 58,355 59 C355 60,355 61,355 62 C355 63,354 64,354 65 C354 66,353 67,353 68 C353 69,353 69,353 70 C353 70,353 71,353 71 C352 71,352 71,352 72 C352 72,352 72,352 72 C352 73,352 73,353 74 C353 74,353 74,354 74 C354 74,355 74,355 74 C355 74,356 74,356 73 C356 73,357 73,357 72 C358 72,358 71,359 71 L360 72 C360 74,359 74,358 75 C357 76,357 76,356 77 C355 77,355 78,354 78 C353 78,352 78,352 78 C351 78,350 78,350 78 C349 78,349 77,348 77 C348 76,348 76,348 75 C347 75,347 74,347 73 C347 72,348 70,348 68 C349 67,349 66,349 65 C349 64,350 63,350 62 C350 61,350 61,350 60 C350 59,350 59,350 58 C350 57,350 56,350 56 C349 55,349 55,348 55 C347 55,347 55,346 56 C345 56,345 56,344 57 C344 57,343 58,342 58 C342 59,341 60,341 61 C340 61,340 62,339 63 C339 64,339 65,338 66 L336 78 Z" fill="#212121"/><path d="M217 99 L215 105 L210 105 L211 99 L217 99 Z M210 127 C210 128,210 129,210 130 C210 130,210 131,210 131 C210 132,210 132,210 133 C210 133,211 133,211 133 C212 133,212 133,212 133 C213 133,213 133,213 132 C214 132,214 132,214 131 C215 131,215 130,216 130 L218 132 C217 133,216 134,215 134 C214 135,214 135,213 136 C212 136,212 137,211 137 C210 137,210 137,209 137 C208 137,208 137,207 137 C207 137,206 136,206 136 C205 135,205 135,205 134 C205 134,204 133,204 132 C204 132,205 131,205 130 C205 129,205 128,205 127 C206 126,206 125,206 124 C206 123,207 122,207 121 C207 120,207 119,207 118 C208 117,208 116,208 115 C208 115,208 115,208 114 C208 114,208 114,208 114 C208 113,208 113,207 113 C207 112,206 112,205 112 L205 110 L213 110 L214 110 L210 127 Z" fill="#212121"/><path d="M390 85 L390 80 L436 80 L436 85 L390 85 Z M390 100 L390 95 L436 95 L436 100 L390 100 Z" fill="#212121"/><path d="M933 1 L945 1 L944 3 C943 3,943 3,942 4 C942 4,942 4,941 5 C941 5,941 6,940 7 C940 8,940 10,939 12 L933 40 C932 42,932 43,932 44 C932 45,932 45,932 46 C932 47,932 48,933 48 C933 49,934 49,936 49 L935 51 L921 51 L921 49 C922 49,923 49,923 48 C924 48,924 48,924 47 C925 46,925 46,925 45 C925 44,926 42,926 40 L931 18 C932 15,933 12,933 9 L933 9 C932 10,931 13,928 18 L911 45 L907 45 L904 21 C904 18,903 14,903 8 L902 8 C901 14,900 19,899 23 L895 40 C895 43,895 44,895 46 C895 47,895 48,895 48 C896 49,897 49,898 49 L898 51 L885 51 L885 49 C886 49,887 49,888 48 C888 48,888 48,889 47 C889 46,889 46,890 45 C890 44,890 42,891 40 L897 12 C897 11,897 10,898 9 C898 8,898 7,898 6 C898 5,898 4,897 4 C896 3,895 3,894 3 L895 1 L908 1 L912 36 L933 1 Z" fill="#212121"/><path d="M975 51 L975 49 C977 49,978 48,978 47 C979 46,979 45,979 42 C979 41,979 40,979 39 L979 34 L963 34 L961 38 C960 40,959 41,959 42 C958 44,958 45,958 45 C958 48,959 49,962 49 L962 51 L947 51 L947 49 C948 49,948 49,949 48 C950 48,950 47,951 46 C952 45,953 43,954 41 L978 0 L983 0 L986 41 C986 43,986 45,987 46 C987 47,987 48,988 48 C989 49,989 49,990 49 L990 51 L975 51 Z M965 31 L979 31 L978 19 C978 18,978 16,978 13 C978 11,978 9,978 8 L978 8 L965 31 Z" fill="#212121"/><path d="M1039 2 L1036 11 L1033 11 C1033 8,1032 6,1031 5 C1030 4,1028 3,1026 3 C1022 3,1019 5,1016 8 C1013 12,1011 16,1009 22 C1008 28,1007 33,1007 38 C1007 42,1008 45,1009 46 C1010 48,1012 49,1015 49 C1017 49,1018 49,1020 48 C1021 48,1022 47,1024 45 C1025 44,1026 42,1027 39 L1031 39 L1028 50 C1024 51,1019 52,1014 52 C1009 52,1006 51,1004 48 C1001 45,1000 42,1000 36 C1000 33,1001 28,1002 24 C1003 19,1005 15,1007 11 C1010 8,1012 5,1016 3 C1019 1,1022 0,1026 0 C1028 0,1030 0,1032 0 C1034 1,1036 1,1039 2 L1039 2 Z" fill="#212121"/><path d="M1066 1 C1069 1,1072 1,1075 2 C1077 3,1079 4,1081 5 C1083 6,1084 8,1085 11 C1086 13,1087 16,1087 19 C1087 23,1087 26,1086 29 C1085 32,1084 35,1083 37 C1081 40,1080 42,1078 44 C1076 46,1074 47,1072 48 C1070 49,1068 50,1066 50 C1063 51,1061 51,1057 51 L1042 51 L1042 49 C1043 49,1044 49,1045 49 C1045 48,1045 48,1046 47 C1046 47,1046 46,1047 45 C1047 44,1047 43,1048 40 L1054 12 C1055 10,1055 8,1055 6 C1055 5,1055 4,1054 4 C1053 3,1053 3,1051 3 L1052 1 L1066 1 Z M1053 48 C1053 48,1055 48,1057 48 C1061 48,1064 47,1067 46 C1070 45,1072 42,1074 39 C1076 37,1077 33,1078 30 C1079 27,1080 23,1080 20 C1080 14,1079 11,1076 8 C1074 5,1070 4,1066 4 C1065 4,1063 4,1062 4 L1053 48 Z" fill="#212121"/><path d="M1100 39 L1098 45 L1093 45 L1094 39 L1100 39 Z M1093 67 C1093 68,1093 69,1093 70 C1093 70,1093 71,1093 71 C1093 72,1093 72,1093 73 C1093 73,1094 73,1094 73 C1095 73,1095 73,1095 73 C1096 73,1096 73,1096 72 C1097 72,1097 72,1097 71 C1098 71,1098 70,1099 70 L1101 72 C1100 73,1099 74,1098 74 C1097 75,1097 75,1096 76 C1095 76,1095 77,1094 77 C1093 77,1093 77,1092 77 C1091 77,1091 77,1090 77 C1090 77,1089 76,1089 76 C1088 75,1088 75,1088 74 C1088 74,1087 73,1087 72 C1087 72,1088 71,1088 70 C1088 69,1088 68,1088 67 C1089 66,1089 65,1089 64 C1089 63,1090 62,1090 61 C1090 60,1090 59,1090 58 C1091 57,1091 56,1091 55 C1091 55,1091 55,1091 54 C1091 54,1091 54,1091 54 C1091 53,1091 53,1090 53 C1090 52,1089 52,1088 52 L1088 50 L1096 50 L1097 50 L1093 67 Z" fill="#212121"/><path d="M512 111 L524 111 L523 113 C522 113,522 113,521 114 C521 114,521 114,520 115 C520 115,520 116,519 117 C519 118,519 120,518 122 L512 150 C511 152,511 153,511 154 C511 155,511 155,511 156 C511 157,511 158,512 158 C512 159,513 159,515 159 L514 161 L500 161 L500 159 C501 159,502 159,502 158 C503 158,503 158,503 157 C504 156,504 156,504 155 C504 154,505 152,505 150 L510 128 C511 125,512 122,512 119 L512 119 C511 120,510 123,507 128 L490 155 L486 155 L483 131 C483 128,482 124,482 118 L481 118 C480 124,479 129,478 133 L474 150 C474 153,474 154,474 156 C474 157,474 158,474 158 C475 159,476 159,477 159 L477 161 L464 161 L464 159 C465 159,466 159,467 158 C467 158,467 158,468 157 C468 156,468 156,469 155 C469 154,469 152,470 150 L476 122 C476 121,476 120,477 119 C477 118,477 117,477 116 C477 115,477 114,476 114 C475 113,474 113,473 113 L474 111 L487 111 L491 146 L512 111 Z" fill="#212121"/><path d="M557 128 L561 125 L563 126 L558 150 C557 152,557 154,557 155 C557 156,557 157,557 157 C558 158,558 158,559 158 C560 158,561 158,561 157 C562 157,563 156,565 154 L567 156 C565 158,563 160,561 161 C560 162,558 162,556 162 C555 162,554 162,553 161 C552 160,551 158,551 157 C551 156,552 154,552 153 L552 152 C549 156,547 158,545 160 C543 161,541 162,538 162 C536 162,534 161,532 159 C531 157,530 154,530 150 C530 146,531 142,532 138 C534 134,536 131,539 129 C542 126,545 125,549 125 C550 125,552 125,553 126 C555 126,556 127,557 128 L557 128 Z M554 139 C554 138,555 137,555 136 C555 135,555 135,555 134 C555 132,554 130,554 129 C553 129,551 128,549 128 C547 128,545 129,543 131 C541 133,539 136,538 140 C537 143,536 147,536 150 C536 153,537 155,537 156 C538 157,539 158,541 158 C543 158,544 157,546 156 C547 155,549 152,550 150 C552 147,553 144,554 140 L554 139 Z" fill="#212121"/><path d="M585 144 C585 142,585 141,584 139 C584 137,584 135,583 134 C583 132,582 131,582 130 C582 130,582 130,581 129 C581 129,581 129,580 129 C580 129,579 129,579 129 C578 130,578 130,577 131 C577 131,576 132,575 133 L573 131 C575 129,576 128,577 127 C579 126,581 125,582 125 C583 125,584 125,584 125 C585 126,586 126,586 126 C586 127,587 127,587 128 C588 128,588 129,588 130 C589 131,589 132,589 134 C589 135,590 137,590 138 L590 138 C593 135,594 132,595 131 C597 129,598 128,599 127 C599 126,600 126,601 126 C602 125,603 125,604 125 C605 125,606 125,607 126 L605 133 L603 133 C603 132,602 131,602 131 C601 131,601 131,601 131 C601 131,600 131,600 132 C600 132,599 132,598 133 C598 134,597 135,596 136 C595 137,594 138,593 139 L591 142 C591 145,592 147,592 148 C593 150,593 152,593 153 C594 154,594 155,594 156 C594 156,595 157,595 157 C595 158,595 158,596 158 C596 158,596 158,597 158 C597 158,598 158,598 157 C599 157,600 156,601 154 L604 156 C602 158,600 160,599 161 C598 162,596 162,594 162 C593 162,592 162,591 161 C591 161,590 160,589 160 C589 159,588 157,588 156 C587 152,587 150,587 148 L586 148 C584 152,582 155,580 156 C579 158,578 159,577 160 C577 161,576 161,575 162 C574 162,573 162,572 162 C571 162,570 162,569 162 L571 154 L573 154 C573 155,574 156,574 156 C575 156,575 156,576 156 C576 156,576 155,577 154 C578 154,579 153,580 151 C581 150,583 147,585 144 L585 144 Z" fill="#212121"/><path d="M623 143 C623 151,624 159,627 164 C630 170,634 173,640 175 L639 178 C632 176,626 172,623 166 C619 160,617 152,617 143 C617 134,619 127,623 120 C626 114,632 110,639 108 L640 111 C634 113,630 117,627 122 C624 128,623 134,623 143 L623 143 Z" fill="#212121"/><path d="M669 161 L669 159 C671 159,672 158,672 157 C673 156,673 155,673 152 C673 151,673 150,673 149 L673 144 L657 144 L655 148 C654 150,653 151,653 152 C652 154,652 155,652 155 C652 158,653 159,656 159 L656 161 L641 161 L641 159 C642 159,642 159,643 158 C644 158,644 157,645 156 C646 155,647 153,648 151 L672 110 L677 110 L680 151 C680 153,680 155,681 156 C681 157,681 158,682 158 C683 159,683 159,684 159 L684 161 L669 161 Z M659 141 L673 141 L672 129 C672 128,672 126,672 123 C672 121,672 119,672 118 L672 118 L659 141 Z" fill="#212121"/><path d="M698 160 L695 162 L692 161 L702 119 C702 117,703 115,703 114 C703 113,702 112,702 112 C701 111,700 111,698 111 L699 109 L708 109 L710 109 L704 134 L704 134 C707 131,709 129,711 127 C713 126,715 125,717 125 C720 125,722 126,723 128 C725 130,726 133,726 137 C726 141,725 145,723 149 C722 153,719 156,716 159 C714 161,710 162,707 162 C703 162,701 161,698 160 L698 160 Z M701 148 C701 150,701 152,701 153 C701 155,701 157,702 158 C703 159,704 159,706 159 C707 159,708 159,709 159 C710 158,711 158,712 157 C713 156,714 155,715 154 C715 153,716 151,717 149 C718 147,718 145,719 143 C719 141,719 139,719 137 C719 134,719 132,718 131 C717 130,716 129,715 129 C713 129,712 129,711 130 C710 131,709 132,707 134 C706 136,705 138,704 140 C703 141,702 144,702 147 L701 148 Z" fill="#212121"/><path d="M757 135 C756 133,756 131,754 130 C753 129,752 128,749 128 C747 128,746 129,744 130 C743 131,743 132,743 134 C743 135,743 135,743 136 C743 137,744 138,745 138 C746 139,747 140,749 141 C751 142,752 143,753 144 C754 145,755 146,755 146 C756 147,756 148,756 149 C756 150,757 151,757 152 C757 154,756 156,755 157 C754 159,752 160,750 161 C748 162,746 162,743 162 C741 162,739 162,737 162 C735 161,733 161,731 160 L733 152 L735 152 C736 154,736 156,737 157 C739 159,741 159,743 159 C746 159,747 159,749 158 C750 157,751 155,751 153 C751 152,750 151,750 150 C750 149,749 149,748 148 C747 147,746 146,744 145 C742 144,741 143,740 142 C739 141,738 140,738 139 C737 138,737 136,737 135 C737 133,737 131,738 130 C739 128,741 127,743 126 C745 126,747 125,749 125 C752 125,754 125,756 126 C758 126,759 126,761 127 L760 135 L757 135 Z" fill="#212121"/><path d="M779 143 C779 151,780 159,783 164 C786 170,790 173,796 175 L795 178 C788 176,782 172,779 166 C775 160,773 152,773 143 C773 134,775 127,779 120 C782 114,788 110,795 108 L796 111 C790 113,786 117,783 122 C780 128,779 134,779 143 L779 143 Z" fill="#212121"/><path d="M847 111 L859 111 L858 113 C857 113,857 113,856 114 C856 114,856 114,855 115 C855 115,855 116,854 117 C854 118,854 120,853 122 L847 150 C846 152,846 153,846 154 C846 155,846 155,846 156 C846 157,846 158,847 158 C847 159,848 159,850 159 L849 161 L835 161 L835 159 C836 159,837 159,837 158 C838 158,838 158,838 157 C839 156,839 156,839 155 C839 154,840 152,840 150 L845 128 C846 125,847 122,847 119 L847 119 C846 120,845 123,842 128 L825 155 L821 155 L818 131 C818 128,817 124,817 118 L816 118 C815 124,814 129,813 133 L809 150 C809 153,809 154,809 156 C809 157,809 158,809 158 C810 159,811 159,812 159 L812 161 L799 161 L799 159 C800 159,801 159,802 158 C802 158,802 158,803 157 C803 156,803 156,804 155 C804 154,804 152,805 150 L811 122 C811 121,811 120,812 119 C812 118,812 117,812 116 C812 115,812 114,811 114 C810 113,809 113,808 113 L809 111 L822 111 L826 146 L847 111 Z" fill="#212121"/><path d="M889 161 L889 159 C891 159,892 158,892 157 C893 156,893 155,893 152 C893 151,893 150,893 149 L893 144 L877 144 L875 148 C874 150,873 151,873 152 C872 154,872 155,872 155 C872 158,873 159,876 159 L876 161 L861 161 L861 159 C862 159,862 159,863 158 C864 158,864 157,865 156 C866 155,867 153,868 151 L892 110 L897 110 L900 151 C900 153,900 155,901 156 C901 157,901 158,902 158 C903 159,903 159,904 159 L904 161 L889 161 Z M879 141 L893 141 L892 129 C892 128,892 126,892 123 C892 121,892 119,892 118 L892 118 L879 141 Z" fill="#212121"/><path d="M953 112 L950 121 L947 121 C947 118,946 116,945 115 C944 114,942 113,940 113 C936 113,933 115,930 118 C927 122,925 126,923 132 C922 138,921 143,921 148 C921 152,922 155,923 156 C924 158,926 159,929 159 C931 159,932 159,934 158 C935 158,936 157,938 155 C939 154,940 152,941 149 L945 149 L942 160 C938 161,933 162,928 162 C923 162,920 161,918 158 C915 155,914 152,914 146 C914 143,915 138,916 134 C917 129,919 125,921 121 C924 118,926 115,930 113 C933 111,936 110,940 110 C942 110,944 110,946 110 C948 111,950 111,953 112 L953 112 Z" fill="#212121"/><path d="M980 111 C983 111,986 111,989 112 C991 113,993 114,995 115 C997 116,998 118,999 121 C1000 123,1001 126,1001 129 C1001 133,1001 136,1000 139 C999 142,998 145,997 147 C995 150,994 152,992 154 C990 156,988 157,986 158 C984 159,982 160,980 160 C977 161,975 161,971 161 L956 161 L956 159 C957 159,958 159,959 159 C959 158,959 158,960 157 C960 157,960 156,961 155 C961 154,961 153,962 150 L968 122 C969 120,969 118,969 116 C969 115,969 114,968 114 C967 113,967 113,965 113 L966 111 L980 111 Z M967 158 C967 158,969 158,971 158 C975 158,978 157,981 156 C984 155,986 152,988 149 C990 147,991 143,992 140 C993 137,994 133,994 130 C994 124,993 121,990 118 C988 115,984 114,980 114 C979 114,977 114,976 114 L967 158 Z" fill="#212121"/><path d="M1028 187 L1022 187 C1023 186,1023 185,1023 184 C1024 182,1024 181,1024 180 C1025 178,1025 177,1025 176 C1025 175,1026 173,1026 172 C1026 171,1026 170,1027 169 C1027 168,1027 168,1027 167 C1027 166,1027 165,1026 165 C1026 164,1025 164,1024 164 C1023 164,1022 164,1021 165 C1020 166,1019 166,1018 167 C1018 169,1017 170,1016 171 C1015 172,1015 173,1015 175 L1012 187 L1007 187 L1011 170 C1011 169,1011 168,1011 168 C1011 167,1011 166,1011 166 C1011 165,1011 164,1010 164 C1009 164,1009 164,1009 164 C1008 164,1008 165,1008 165 C1007 165,1007 166,1006 166 C1006 166,1006 167,1005 167 L1003 166 C1004 165,1005 164,1006 163 C1006 162,1007 162,1008 161 C1008 161,1009 161,1010 160 C1010 160,1011 160,1012 160 C1013 160,1014 161,1015 161 C1016 162,1016 163,1016 165 C1016 165,1016 166,1016 166 C1016 166,1016 167,1016 167 L1016 167 C1018 165,1019 163,1021 162 C1023 161,1024 160,1026 160 C1028 160,1030 161,1031 162 C1031 163,1032 164,1032 166 C1032 166,1032 166,1032 166 C1032 166,1032 167,1032 167 L1032 167 C1034 164,1035 163,1037 162 C1039 161,1040 160,1042 160 C1044 160,1045 161,1046 162 C1047 163,1048 164,1048 166 C1048 166,1048 167,1047 168 C1047 169,1047 170,1047 171 C1047 172,1046 173,1046 174 C1046 175,1045 176,1045 177 C1045 178,1045 178,1045 179 C1045 179,1045 180,1045 180 C1044 180,1044 180,1044 181 C1044 181,1044 181,1044 181 C1044 182,1044 182,1045 183 C1045 183,1045 183,1046 183 C1046 183,1047 183,1047 183 C1047 183,1048 183,1048 182 C1048 182,1049 182,1049 181 C1050 181,1050 180,1051 180 L1052 181 C1052 183,1051 183,1050 184 C1049 185,1049 185,1048 186 C1047 186,1047 187,1046 187 C1045 187,1044 187,1044 187 C1043 187,1042 187,1042 187 C1041 187,1041 186,1040 186 C1040 185,1040 185,1040 184 C1039 184,1039 183,1039 182 C1039 181,1040 179,1040 177 C1041 176,1041 175,1041 174 C1041 173,1042 172,1042 171 C1042 170,1042 170,1042 169 C1042 168,1042 168,1042 167 C1042 166,1042 165,1042 165 C1041 164,1041 164,1040 164 C1039 164,1039 164,1038 165 C1037 165,1037 165,1036 166 C1036 166,1035 167,1034 167 C1034 168,1033 169,1033 170 C1032 170,1032 171,1031 172 C1031 173,1031 174,1030 175 L1028 187 Z" fill="#212121"/><path d="M1070 149 L1068 155 L1063 155 L1064 149 L1070 149 Z M1063 177 C1063 178,1063 179,1063 180 C1063 180,1063 181,1063 181 C1063 182,1063 182,1063 183 C1063 183,1064 183,1064 183 C1065 183,1065 183,1065 183 C1066 183,1066 183,1066 182 C1067 182,1067 182,1067 181 C1068 181,1068 180,1069 180 L1071 182 C1070 183,1069 184,1068 184 C1067 185,1067 185,1066 186 C1065 186,1065 187,1064 187 C1063 187,1063 187,1062 187 C1061 187,1061 187,1060 187 C1060 187,1059 186,1059 186 C1058 185,1058 185,1058 184 C1058 184,1057 183,1057 182 C1057 182,1058 181,1058 180 C1058 179,1058 178,1058 177 C1059 176,1059 175,1059 174 C1059 173,1060 172,1060 171 C1060 170,1060 169,1060 168 C1061 167,1061 166,1061 165 C1061 165,1061 165,1061 164 C1061 164,1061 164,1061 164 C1061 163,1061 163,1060 163 C1060 162,1059 162,1058 162 L1058 160 L1066 160 L1067 160 L1063 177 Z" fill="#212121"/><path d="M1086 167 C1088 165,1089 163,1091 162 C1093 161,1095 160,1096 160 C1098 160,1100 161,1101 162 C1102 163,1102 164,1102 166 C1102 166,1102 167,1102 168 C1102 169,1101 170,1101 171 C1101 172,1101 173,1100 174 C1100 175,1100 177,1099 177 C1099 178,1099 179,1099 180 C1099 181,1099 181,1099 181 C1099 182,1099 182,1099 183 C1099 183,1100 183,1100 183 C1101 183,1101 183,1101 183 C1102 183,1102 183,1102 182 C1103 182,1103 182,1103 181 C1104 181,1104 180,1105 180 L1107 181 C1106 183,1105 183,1104 184 C1104 185,1103 185,1102 186 C1102 186,1101 187,1100 187 C1099 187,1099 187,1098 187 C1097 187,1097 187,1096 187 C1096 187,1095 186,1095 186 C1094 185,1094 185,1094 184 C1094 184,1094 183,1094 182 C1094 182,1094 181,1094 180 C1094 179,1094 178,1094 177 C1095 176,1095 175,1095 174 C1096 173,1096 172,1096 171 C1096 170,1096 170,1097 169 C1097 168,1097 168,1097 167 C1097 166,1097 165,1096 165 C1096 164,1095 164,1094 164 C1094 164,1093 164,1092 164 C1092 165,1091 165,1090 166 C1090 166,1089 167,1089 167 C1088 168,1087 169,1087 169 C1086 170,1086 171,1086 172 C1085 173,1085 173,1085 174 L1082 187 L1077 187 L1081 170 C1081 169,1081 169,1081 168 C1081 167,1081 166,1081 166 C1081 165,1081 164,1080 164 C1079 164,1079 164,1079 164 C1078 164,1078 165,1078 165 C1077 165,1077 166,1076 166 C1076 166,1076 167,1075 167 L1073 166 C1074 165,1075 164,1076 163 C1076 162,1077 162,1078 161 C1078 161,1079 161,1080 160 C1080 160,1081 160,1082 160 C1083 160,1084 161,1085 161 C1086 162,1086 163,1086 165 C1086 165,1086 166,1086 166 C1086 166,1086 167,1086 167 L1086 167 Z" fill="#212121"/><path d="M1129 143 C1129 134,1128 128,1125 122 C1122 117,1118 113,1112 111 L1113 108 C1120 110,1126 114,1129 120 C1133 127,1135 134,1135 143 C1135 152,1133 160,1129 166 C1126 172,1120 176,1113 178 L1112 175 C1118 173,1122 170,1125 164 C1128 159,1129 151,1129 143 L1129 143 Z" fill="#212121"/><path d="M1153 152 C1154 154,1154 156,1154 157 C1154 159,1154 161,1153 162 C1153 163,1152 165,1150 166 C1149 168,1147 169,1145 171 L1143 169 C1144 168,1145 167,1146 166 C1146 165,1146 164,1147 162 C1147 161,1147 160,1147 158 C1147 156,1147 154,1147 152 L1153 152 Z" fill="#212121"/><path d="M1220 111 L1232 111 L1231 113 C1230 113,1230 113,1229 114 C1229 114,1229 114,1228 115 C1228 115,1228 116,1227 117 C1227 118,1227 120,1226 122 L1220 150 C1219 152,1219 153,1219 154 C1219 155,1219 155,1219 156 C1219 157,1219 158,1220 158 C1220 159,1221 159,1223 159 L1222 161 L1208 161 L1208 159 C1209 159,1210 159,1210 158 C1211 158,1211 158,1211 157 C1212 156,1212 156,1212 155 C1212 154,1213 152,1213 150 L1218 128 C1219 125,1220 122,1220 119 L1220 119 C1219 120,1218 123,1215 128 L1198 155 L1194 155 L1191 131 C1191 128,1190 124,1190 118 L1189 118 C1188 124,1187 129,1186 133 L1182 150 C1182 153,1182 154,1182 156 C1182 157,1182 158,1182 158 C1183 159,1184 159,1185 159 L1185 161 L1172 161 L1172 159 C1173 159,1174 159,1175 158 C1175 158,1175 158,1176 157 C1176 156,1176 156,1177 155 C1177 154,1177 152,1178 150 L1184 122 C1184 121,1184 120,1185 119 C1185 118,1185 117,1185 116 C1185 115,1185 114,1184 114 C1183 113,1182 113,1181 113 L1182 111 L1195 111 L1199 146 L1220 111 Z" fill="#212121"/><path d="M1262 161 L1262 159 C1264 159,1265 158,1265 157 C1266 156,1266 155,1266 152 C1266 151,1266 150,1266 149 L1266 144 L1250 144 L1248 148 C1247 150,1246 151,1246 152 C1245 154,1245 155,1245 155 C1245 158,1246 159,1249 159 L1249 161 L1234 161 L1234 159 C1235 159,1235 159,1236 158 C1237 158,1237 157,1238 156 C1239 155,1240 153,1241 151 L1265 110 L1270 110 L1273 151 C1273 153,1273 155,1274 156 C1274 157,1274 158,1275 158 C1276 159,1276 159,1277 159 L1277 161 L1262 161 Z M1252 141 L1266 141 L1265 129 C1265 128,1265 126,1265 123 C1265 121,1265 119,1265 118 L1265 118 L1252 141 Z" fill="#212121"/><path d="M1326 112 L1323 121 L1320 121 C1320 118,1319 116,1318 115 C1317 114,1315 113,1313 113 C1309 113,1306 115,1303 118 C1300 122,1298 126,1296 132 C1295 138,1294 143,1294 148 C1294 152,1295 155,1296 156 C1297 158,1299 159,1302 159 C1304 159,1305 159,1307 158 C1308 158,1309 157,1311 155 C1312 154,1313 152,1314 149 L1318 149 L1315 160 C1311 161,1306 162,1301 162 C1296 162,1293 161,1291 158 C1288 155,1287 152,1287 146 C1287 143,1288 138,1289 134 C1290 129,1292 125,1294 121 C1297 118,1299 115,1303 113 C1306 111,1309 110,1313 110 C1315 110,1317 110,1319 110 C1321 111,1323 111,1326 112 L1326 112 Z" fill="#212121"/><path d="M1353 111 C1356 111,1359 111,1362 112 C1364 113,1366 114,1368 115 C1370 116,1371 118,1372 121 C1373 123,1374 126,1374 129 C1374 133,1374 136,1373 139 C1372 142,1371 145,1370 147 C1368 150,1367 152,1365 154 C1363 156,1361 157,1359 158 C1357 159,1355 160,1353 160 C1350 161,1348 161,1344 161 L1329 161 L1329 159 C1330 159,1331 159,1332 159 C1332 158,1332 158,1333 157 C1333 157,1333 156,1334 155 C1334 154,1334 153,1335 150 L1341 122 C1342 120,1342 118,1342 116 C1342 115,1342 114,1341 114 C1340 113,1340 113,1338 113 L1339 111 L1353 111 Z M1340 158 C1340 158,1342 158,1344 158 C1348 158,1351 157,1354 156 C1357 155,1359 152,1361 149 C1363 147,1364 143,1365 140 C1366 137,1367 133,1367 130 C1367 124,1366 121,1363 118 C1361 115,1357 114,1353 114 C1352 114,1350 114,1349 114 L1340 158 Z" fill="#212121"/><path d="M1401 176 L1395 176 C1396 175,1396 174,1396 173 C1397 171,1397 170,1397 169 C1398 167,1398 166,1398 165 C1398 164,1399 162,1399 161 C1399 160,1399 159,1400 158 C1400 157,1400 157,1400 156 C1400 155,1400 154,1399 154 C1399 153,1398 153,1397 153 C1396 153,1395 153,1394 154 C1393 155,1392 155,1391 156 C1391 158,1390 159,1389 160 C1388 161,1388 162,1388 164 L1385 176 L1380 176 L1384 159 C1384 158,1384 157,1384 157 C1384 156,1384 155,1384 155 C1384 154,1384 153,1383 153 C1382 153,1382 153,1382 153 C1381 153,1381 154,1381 154 C1380 154,1380 155,1379 155 C1379 155,1379 156,1378 156 L1376 155 C1377 154,1378 153,1379 152 C1379 151,1380 151,1381 150 C1381 150,1382 150,1383 149 C1383 149,1384 149,1385 149 C1386 149,1387 150,1388 150 C1389 151,1389 152,1389 154 C1389 154,1389 155,1389 155 C1389 155,1389 156,1389 156 L1389 156 C1391 154,1392 152,1394 151 C1396 150,1397 149,1399 149 C1401 149,1403 150,1404 151 C1404 152,1405 153,1405 155 C1405 155,1405 155,1405 155 C1405 155,1405 156,1405 156 L1405 156 C1407 153,1408 152,1410 151 C1412 150,1413 149,1415 149 C1417 149,1418 150,1419 151 C1420 152,1421 153,1421 155 C1421 155,1421 156,1420 157 C1420 158,1420 159,1420 160 C1420 161,1419 162,1419 163 C1419 164,1418 165,1418 166 C1418 167,1418 167,1418 168 C1418 168,1418 169,1418 169 C1417 169,1417 169,1417 170 C1417 170,1417 170,1417 170 C1417 171,1417 171,1418 172 C1418 172,1418 172,1419 172 C1419 172,1420 172,1420 172 C1420 172,1421 172,1421 171 C1421 171,1422 171,1422 170 C1423 170,1423 169,1424 169 L1425 170 C1425 172,1424 172,1423 173 C1422 174,1422 174,1421 175 C1420 175,1420 176,1419 176 C1418 176,1417 176,1417 176 C1416 176,1415 176,1415 176 C1414 176,1414 175,1413 175 C1413 174,1413 174,1413 173 C1412 173,1412 172,1412 171 C1412 170,1413 168,1413 166 C1414 165,1414 164,1414 163 C1414 162,1415 161,1415 160 C1415 159,1415 159,1415 158 C1415 157,1415 157,1415 156 C1415 155,1415 154,1415 154 C1414 153,1414 153,1413 153 C1412 153,1412 153,1411 154 C1410 154,1410 154,1409 155 C1409 155,1408 156,1407 156 C1407 157,1406 158,1406 159 C1405 159,1405 160,1404 161 C1404 162,1404 163,1403 164 L1401 176 Z" fill="#212121"/><path d="M1447 169 C1446 170,1445 171,1444 172 C1443 173,1442 174,1441 174 C1441 175,1440 175,1439 176 C1438 176,1437 176,1436 176 C1434 176,1432 175,1431 174 C1430 172,1429 170,1429 167 C1429 166,1430 164,1430 163 C1430 161,1431 160,1432 158 C1432 157,1433 156,1434 154 C1435 153,1436 152,1437 152 C1438 151,1439 150,1441 150 C1442 149,1443 149,1444 149 C1446 149,1447 149,1448 150 C1449 150,1450 150,1451 151 L1454 149 L1456 150 L1452 166 C1452 167,1452 168,1451 169 C1451 169,1451 170,1451 170 C1451 171,1451 171,1452 172 C1452 172,1452 172,1453 172 C1453 172,1454 172,1454 172 C1454 172,1455 172,1455 171 C1455 171,1456 171,1456 170 C1457 170,1457 169,1458 169 C1458 169,1458 169,1458 170 C1459 170,1459 170,1459 171 C1458 172,1458 172,1457 173 C1456 174,1455 174,1455 175 C1454 175,1453 176,1453 176 C1452 176,1451 176,1451 176 C1449 176,1448 176,1448 175 C1447 174,1447 173,1447 172 C1447 171,1447 170,1447 169 L1447 169 Z M1448 161 C1449 160,1449 159,1449 158 C1449 157,1449 157,1449 156 C1449 154,1449 154,1448 153 C1447 152,1446 152,1445 152 C1444 152,1443 152,1442 153 C1441 153,1440 154,1439 155 C1439 155,1438 156,1437 157 C1437 158,1436 159,1436 160 C1436 161,1435 162,1435 164 C1435 165,1435 166,1435 167 C1435 169,1435 170,1436 171 C1436 172,1437 172,1438 172 C1439 172,1439 172,1440 172 C1441 172,1441 171,1442 171 C1443 170,1445 168,1446 167 C1447 165,1448 163,1448 161 L1448 161 Z" fill="#212121"/><path d="M1474 163 C1474 162,1474 161,1473 159 C1473 158,1473 158,1473 157 C1473 156,1472 156,1472 155 C1472 155,1472 154,1471 154 C1471 154,1471 153,1471 153 C1471 153,1470 153,1470 153 C1470 153,1469 153,1469 153 C1469 153,1469 154,1468 154 C1468 154,1468 154,1467 155 C1467 155,1467 156,1466 157 L1464 155 C1465 154,1466 153,1466 152 C1467 152,1467 151,1468 150 C1469 150,1469 150,1470 149 C1470 149,1471 149,1472 149 C1473 149,1474 149,1474 150 C1475 150,1476 151,1476 152 C1476 152,1477 153,1477 155 C1477 156,1478 157,1478 158 L1478 158 C1479 157,1480 156,1481 155 C1482 154,1482 153,1483 152 C1484 152,1484 151,1485 151 C1485 150,1486 150,1486 150 C1487 150,1487 149,1488 149 C1488 149,1489 149,1489 149 C1490 149,1491 149,1492 150 L1490 156 L1488 156 C1488 155,1488 154,1487 154 C1487 154,1487 154,1487 154 C1486 154,1486 154,1486 155 C1485 155,1485 155,1485 155 C1484 156,1484 156,1483 157 C1483 157,1482 158,1481 159 C1480 160,1480 161,1479 162 C1479 164,1480 166,1480 167 C1480 169,1481 170,1481 170 C1481 171,1482 172,1482 172 C1482 172,1483 172,1483 172 C1483 172,1484 172,1484 172 C1484 172,1484 172,1485 172 C1485 171,1485 171,1486 170 C1486 170,1486 169,1487 169 L1489 170 C1488 171,1487 172,1487 173 C1486 174,1486 175,1485 175 C1484 175,1484 176,1483 176 C1483 176,1482 176,1481 176 C1480 176,1480 176,1479 176 C1479 176,1478 175,1478 175 C1478 175,1477 174,1477 174 C1477 173,1477 173,1476 172 C1476 172,1476 171,1476 170 C1476 170,1476 169,1476 169 C1475 168,1475 168,1475 167 C1475 167,1475 166,1475 166 L1475 166 C1474 168,1473 169,1472 170 C1471 171,1471 172,1470 172 C1469 173,1469 174,1468 174 C1468 175,1467 175,1467 175 C1466 176,1466 176,1465 176 C1465 176,1464 176,1463 176 C1462 176,1462 176,1461 176 L1462 170 L1464 170 C1464 171,1465 172,1465 172 C1466 172,1466 172,1466 172 C1466 172,1466 172,1467 172 C1467 172,1467 171,1468 171 C1468 170,1468 170,1469 169 C1470 169,1470 168,1471 167 C1472 166,1473 165,1474 163 L1474 163 Z" fill="#212121"/><path d="M1514 143 C1514 134,1513 128,1510 122 C1507 117,1503 113,1497 111 L1498 108 C1505 110,1511 114,1514 120 C1518 127,1520 134,1520 143 C1520 152,1518 160,1514 166 C1511 172,1505 176,1498 178 L1497 175 C1503 173,1507 170,1510 164 C1513 159,1514 151,1514 143 L1514 143 Z" fill="#212121"/><rect x="462" y="87" width="1065" height="5" fill="#212121"/></svg></span></p>
<p class="p_Text"><span class="f_Text">Here, I want to once again emphasize the importance of data comparability for the training, testing dataset, and data used during practical application. If we normalize the training and test sample data now, we will have to keep the normalization parameters of all three indicators of the MACD indicator for practical application.</span></p>
<p class="p_Text"><span class="f_Text">After defining the normalization parameters, we will organize a cycle for enumeration and appropriate correction of historical values of indicators.</span></p>
<p class="p_Text"><span class="f_Text">Only the initial data is normalized, not the target values.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Data&nbsp;normalization</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">NormalizeData</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">main_norm</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">MathMax</span><span class="f_CodeExample">(</span><span class="f_Functions">MathAbs</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">[</span><span class="f_Functions">ArrayMinimum</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">)]),</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">[</span><span class="f_Functions">ArrayMaximum</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">)]);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">sign_norm</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">MathMax</span><span class="f_CodeExample">(</span><span class="f_Functions">MathAbs</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">[</span><span class="f_Functions">ArrayMinimum</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">)]),</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">[</span><span class="f_Functions">ArrayMaximum</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">)]);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">delt_norm</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">MathMax</span><span class="f_CodeExample">(</span><span class="f_Functions">MathAbs</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">[</span><span class="f_Functions">ArrayMinimum</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">)]),</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">[</span><span class="f_Functions">ArrayMaximum</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">)]);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">rsi</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;=&nbsp;(</span><span class="f_CodeExample" style="color: #333333;">rsi</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;-&nbsp;</span><span class="f_CodeExample">50.0</span><span class="f_CodeExample">)&nbsp;/&nbsp;</span><span class="f_CodeExample">50.0</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;/=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">main_norm</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;/=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">sign_norm</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;/=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">delt_norm</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Certainly, sometimes it can be useful to normalize the target values to fit them into the range of a specific activation function. However, in such cases, similar to normalizing input data, it's crucial to preserve the normalization parameters for decoding the neural network's outputs in industrial applications. These considerations lie at the interface between the neural network and the main program, and the solution largely depends on the specific task.</span></p>
<p class="p_Text"><span class="f_Text">After preparing the dataset, the next step is to split it into training and testing sets. A common practice is to randomly select records from the entire dataset for the test set, with the remaining data used for training. It is highly discouraged to take consecutive patterns for the test set, whether they are the first or last in the dataset. This is primarily because a small subset of data is more susceptible to the influence of local trends. Such a sample may not be representative for extrapolating the evaluation to the entire dataset. On the other hand, randomly selecting records from the entire dataset provides a higher probability of extracting patterns that differ significantly for the test set. This kind of sample will be more independent of local trends and more representative to enable the evaluation of the neural network performance on the global dataset. However, it should be noted that there are cases where consecutive patterns are chosen for the test set, but these are specific instances related to the architecture of certain models. </span></p>
<p class="p_Text"><span class="f_Text">To split the dataset into training and testing sets, we will create an array of flags called test. This array will have the same size as our global dataset. The values of its elements will indicate the usage direction of the pattern:</span></p>
<ul style="list-style-type:disc">
<li class="p_li"><span class="f_li">0 means the training sample</span></li>
<li class="p_li"><span class="f_li">1 means the testing sample</span></li>
</ul>
<p class="p_Text"><span class="f_Text">For binary classification, you can also use an array of logical values. However, when we need to add a validation dataset, we can easily use the value 2 for it, whereas using an array of logical values doesn't provide us with such flexibility.</span></p>
<p class="p_Text"><span class="f_Text">Our flag array will be first initialized with zero values. In other words, we establish that by default the pattern belongs to the training dataset. We then determine the number of patterns for the test set. Then we create a loop based on the number of elements for the testing dataset, generating random values within this loop. The random value generator should return an integer number between 0 and the size of the general population. In my solution, I used the MQL5 built-in </span><span class="f_Text" style="font-style: italic;">MathRand</span><span class="f_Text"> function to generate pseudo-random numbers. This function returns an integer value in the range of 0 to 32767. However, since the size of the dataset is expected to be over 33,000 elements, I multiplied two random numbers. Such a version is capable of generating more than 1 billion random values. To scale the obtained random number to the size of our population, we first divide the generated random number by the square of 32767, thereby normalizing the random number within the range of 0 to 1. Then multiply by the number of elements in our general population. The resulting number will tell us the ordinal number of the pattern for the test sample.</span></p>
<p class="p_Text"><span class="f_Text">All we have to do is write 1 to the corresponding element of the flag array. However, there is still a chance of landing twice (or even more times) on the same element of the flag array. If we do not control for this, we are very likely to get a test sample smaller than expected. Therefore, before writing 1 to the selected element of the flag array, we first check its current state. If it already contains 1, we decrease the loop iteration count by 1 and generate the next random number. Thus, if we hit the same element, the loop iteration counter will not be incremented, ensuring that we obtain a testing dataset of the expected size as output.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Generate&nbsp;randomly&nbsp;the&nbsp;data&nbsp;indices&nbsp;for&nbsp;the&nbsp;test&nbsp;sample</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">ArrayInitialize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">test</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">for_test</span><span class="f_CodeExample">&nbsp;=&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">)((</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">&nbsp;-&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">BarsToLine</span><span class="f_CodeExample">)&nbsp;*&nbsp;</span><span class="f_CodeExample">0.2</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">for_test</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">t</span><span class="f_CodeExample">&nbsp;=&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">)((</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">)(</span><span class="f_Functions">MathRand</span><span class="f_CodeExample">()&nbsp;*&nbsp;</span><span class="f_Functions">MathRand</span><span class="f_CodeExample">())&nbsp;/&nbsp;</span><span class="f_Functions">MathPow</span><span class="f_CodeExample">(</span><span class="f_CodeExample">32767.0</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample">2</span><span class="f_CodeExample">)&nbsp;*&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">&nbsp;-&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">&nbsp;-&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">BarsToLine</span><span class="f_CodeExample">))&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">BarsToLine</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">test</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">t</span><span class="f_CodeExample">]&nbsp;==&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">--;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">continue</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">test</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">t</span><span class="f_CodeExample">]&nbsp;=&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">This is the end of the preparatory work. The only thing left to do is to save the prepared data into the appropriate files. To write the data, we open two files for writing according to the names specified in the script parameters. An obvious thing to do would be to create binary files to record numeric data. They take up less disk space and are faster to work with. But since we are going to load data from applications written in other programming languages, in particular from Python scripts, the most universal approach is to use CSV files.</span></p>
<p class="p_Text"><span class="f_Text">We open two CSV files for writing and immediately check the resulting handles for accessing the files. Erroneous handles will signal a file opening error. The corresponding message will be displayed in the terminal log.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Open&nbsp;the&nbsp;training&nbsp;sample&nbsp;file&nbsp;for&nbsp;writing</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">Study</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">FileOpen</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #b22222;">StudyFileName</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">FILE_WRITE</span><span class="f_CodeExample">&nbsp;|&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Definition">FILE_CSV</span><span class="f_CodeExample">&nbsp;|&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Definition">FILE_ANSI</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">CP_UTF8</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">Study</span><span class="f_CodeExample">&nbsp;==&nbsp;</span><span class="f_Definition">INVALID_HANDLE</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Error&nbsp;opening&nbsp;file&nbsp;%s:&nbsp;%d&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">StudyFileName</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Functions">GetLastError</span><span class="f_CodeExample">());</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Open&nbsp;the&nbsp;test&nbsp;sample&nbsp;file&nbsp;for&nbsp;writing</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">Test</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">FileOpen</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #b22222;">TestFileName</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">FILE_WRITE</span><span class="f_CodeExample">&nbsp;|&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Definition">FILE_CSV</span><span class="f_CodeExample">&nbsp;|&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Definition">FILE_ANSI</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Definition">CP_UTF8</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">Test</span><span class="f_CodeExample">&nbsp;==&nbsp;</span><span class="f_Definition">INVALID_HANDLE</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Error&nbsp;opening&nbsp;file&nbsp;%s:&nbsp;%d&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TestFileName</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Functions">GetLastError</span><span class="f_CodeExample">());</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">After successfully opening the files, we set up a loop to iterate through all elements of the population. Note that the loop does not start from the zeroth element, but from the element corresponding to the number of bars in the pattern. After all, for a complete pattern record, we must specify the data of several previous candles. We will divide the training and test samples at the stage of writing to the file. By checking the value of the corresponding element in the flag array, we will replace the file handle for pattern recording with the file handle of the correct dataset. The actual pattern writing to the file is encapsulated in a separate function, which we will review a little later. To track the process, we will output the percentage of completion in the comments on the chart.</span></p>
<p class="p_Text"><span class="f_Text">Upon completion of the loop, we will clear the comments on the chart, close the files, and log information about the file names and paths to the journal.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Write&nbsp;samples&nbsp;to&nbsp;files</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">BarsToLine</span><span class="f_CodeExample">&nbsp;-&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">++)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">Comment</span><span class="f_CodeExample">(</span><span class="f_Functions">StringFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;%.2f%%&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;*&nbsp;</span><span class="f_CodeExample">100.0</span><span class="f_CodeExample">&nbsp;/&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">total</span><span class="f_CodeExample">&nbsp;-&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">BarsToLine</span><span class="f_CodeExample">)));</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(!</span><span class="f_CodeExample" style="color: #333333;">WriteData</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">target1</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">rsi</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_main</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_signal</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">macd_delta</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">BarsToLine</span><span class="f_CodeExample">,&nbsp;(</span><span class="f_CodeExample" style="color: #333333;">test</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;==&nbsp;</span><span class="f_CodeExample">1</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">Test</span><span class="f_CodeExample">&nbsp;:&nbsp;</span><span class="f_CodeExample" style="color: #333333;">Study</span><span class="f_CodeExample">)))</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Error&nbsp;to&nbsp;write&nbsp;data:&nbsp;%d&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_Functions">GetLastError</span><span class="f_CodeExample">());</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">break</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Close&nbsp;the&nbsp;files</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">Comment</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">FileFlush</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">Study</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">FileClose</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">Study</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">FileFlush</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">Test</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">FileClose</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">Test</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Study&nbsp;data&nbsp;saved&nbsp;to&nbsp;file&nbsp;%s\\MQL5\\Files\\%s&quot;</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">TerminalInfoString</span><span class="f_CodeExample">(</span><span class="f_Definition">TERMINAL_DATA_PATH</span><span class="f_CodeExample">),&nbsp;</span><span class="f_Functions" style="color: #b22222;">StudyFileName</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">PrintFormat</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Test&nbsp;data&nbsp;saved&nbsp;to&nbsp;file&nbsp;%s\\MQL5\\Files\\%s&quot;</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_Functions">TerminalInfoString</span><span class="f_CodeExample">(</span><span class="f_Definition">TERMINAL_DATA_PATH</span><span class="f_CodeExample">),&nbsp;</span><span class="f_CodeExample" style="color: #b22222;">TestFileName</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">To write information about the pattern to a file, we will create a function called </span><span class="f_Text" style="font-style: italic;">WriteData</span><span class="f_Text">. In the function parameters, we will pass pointers to arrays of source and target data, the sequential number of the last bar in the pattern in the data arrays, the number of bars to analyze for one pattern, and the file handle for writing data. The choice of the last bar in the pattern instead of the first is made in an attempt to approximate the pattern construction to the real conditions of neural network operation. When working with real-time stock price time series, we are always on the latest known bar at the current moment. We analyze information from several recent bars, which already constitute history, and try to understand the most probable upcoming price movement. Similarly, the bar specified in the parameters here represents the &quot;current moment&quot; for us. We take the specified number of bars before it, and all of this constitutes the pattern we analyze. Based on this pattern, our neural network should determine the probable price movement and its strength.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Function&nbsp;for&nbsp;writing&nbsp;a&nbsp;pattern&nbsp;to&nbsp;a&nbsp;file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">WriteData</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&amp;</span><span class="f_CodeExample" style="color: #333333;">target1</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Buffer&nbsp;1&nbsp;of&nbsp;target&nbsp;values</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&amp;</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">[],&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Buffer&nbsp;2&nbsp;target&nbsp;values</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&amp;</span><span class="f_CodeExample" style="color: #333333;">data1</span><span class="f_CodeExample">[],&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Buffer&nbsp;1&nbsp;of&nbsp;historical&nbsp;data</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&amp;</span><span class="f_CodeExample" style="color: #333333;">data2</span><span class="f_CodeExample">[],&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Buffer&nbsp;2&nbsp;of&nbsp;historical&nbsp;data</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&amp;</span><span class="f_CodeExample" style="color: #333333;">data3</span><span class="f_CodeExample">[],&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Buffer&nbsp;2&nbsp;of&nbsp;historical&nbsp;data</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;&amp;</span><span class="f_CodeExample" style="color: #333333;">data4</span><span class="f_CodeExample">[],&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Buffer&nbsp;2&nbsp;of&nbsp;historical&nbsp;data</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">cur_bar</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Current&nbsp;bar&nbsp;of&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;pattern</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bars</span><span class="f_CodeExample">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Number&nbsp;of&nbsp;historical&nbsp;bars&nbsp;</span><br>
<span class="f_CodeExample" style="color: #808080;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;in&nbsp;one&nbsp;pattern</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;Handle&nbsp;of&nbsp;the&nbsp;file&nbsp;to&nbsp;be&nbsp;written</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;{</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Let's first collect the information on the pattern into a string variable of type </span><span class="f_Text" style="font-style: italic;">string</span><span class="f_Text">. In doing so, we don't forget to insert a delimiter between the values of the elements. The delimiter must match the delimiter specified when opening the CSV file. Collecting data into a string variable is a forced compromise. The point is that the </span><span class="f_Text" style="font-style: italic;">FileWrite</span><span class="f_Text"> function for writing to a text file has a limit of 63 parameters to write, and each call to write is terminated with an end-of-line character. Now, we have two problems before us:</span></p>
<ol style="list-style-type:decimal">
<li value="1" class="p_li"><span class="f_li">By specifying all pattern data within one call of the </span><span class="f_li" style="font-style: italic;">WriteData</span><span class="f_li"> function, using 4 indicators per 1 bar, we will be able to describe no more than 15 candlesticks.</span></li>
<li value="2" class="p_li"><span class="f_li">We have to collect information on all the bars at once.</span></li>
</ol>
<p class="p_Text"><span class="f_Text">We cannot use a loop to iterate through the array values. We need to manually specify all the elements to be written in the parameters of the data-writing function. The use of a string variable helps address these issues. In a simple loop, we can collect all values into one text string. In this process, we are not limited in the number of included parameters. Of course, during the collection of indicators into the string, we will need to insert a delimiter between them, thus simulating a CSV file string. Moreover, we will write the already assembled string to the file only once. Consequently, the function will insert an end-of-line character at the end of the write once. Thus, the entire pattern in our file will be recorded in a single line.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;check&nbsp;the&nbsp;file&nbsp;handle</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">&nbsp;==&nbsp;</span><span class="f_Definition">INVALID_HANDLE</span><span class="f_CodeExample">)</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Invalid&nbsp;Handle&quot;</span><span class="f_CodeExample">);</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">false</span><span class="f_CodeExample">;</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample" style="color: #808080;">//---&nbsp;determine&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;record&nbsp;of&nbsp;the&nbsp;historical&nbsp;data&nbsp;of&nbsp;the&nbsp;pattern</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">cur_bar</span><span class="f_CodeExample">&nbsp;-&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bars</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #333333;">1</span><span class="f_CodeExample">;</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">)</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Too&nbsp;small&nbsp;current&nbsp;bar&quot;</span><span class="f_CodeExample">);</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">false</span><span class="f_CodeExample">;</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//---&nbsp;Check&nbsp;the&nbsp;correctness&nbsp;of&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;data&nbsp;and&nbsp;the&nbsp;data&nbsp;written&nbsp;to&nbsp;the&nbsp;file&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size1</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">data1</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size2</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">data2</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size3</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">data3</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size4</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">data4</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">sizet1</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">target1</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">sizet2</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_Functions">ArraySize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">pattern</span><span class="f_CodeExample">&nbsp;=&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size1</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data1</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">)&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">&nbsp;+</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size2</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data2</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">)&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">&nbsp;+</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size3</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data3</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">)&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">&nbsp;+</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size4</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data4</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">for</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #333333;">1</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">cur_bar</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">++)</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">pattern</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">pattern</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">&nbsp;+&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size1</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data1</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">)&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">&nbsp;+</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size2</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data2</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">)&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">&nbsp;+</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size3</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data3</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">)&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;,&quot;</span><span class="f_CodeExample">&nbsp;+</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size4</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">data4</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">i</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0.0</span><span class="f_CodeExample">);</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">FileWrite</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">pattern</span><span class="f_CodeExample">,&nbsp;</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">cur_bar</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">sizet1</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">target1</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">cur_bar</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">),</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">)(</span><span class="f_CodeExample" style="color: #333333;">cur_bar</span><span class="f_CodeExample">&nbsp;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">sizet2</span><span class="f_CodeExample">&nbsp;?&nbsp;</span><span class="f_CodeExample" style="color: #333333;">target2</span><span class="f_CodeExample">[</span><span class="f_CodeExample" style="color: #333333;">cur_bar</span><span class="f_CodeExample">]&nbsp;:&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">))&nbsp;&gt;&nbsp;</span><span class="f_CodeExample">0</span><span class="f_CodeExample">);</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">As a result, we obtain a structured CSV file in which a delimiter is placed between every two adjacent elements and each row represents a separate pattern for analyzing the data.</span></p>
<p class="p_Text"><span class="f_Text">It should also be noted that to prevent an array out-of-bounds error, we should check the index values against the array sizes before accessing the data arrays. In case of an incorrect index, we write 0 instead of the indicator value. During the operation of the neural algorithm, all values of the input indicator vector are multiplied by the weights, and the resulting products are summed into a common sum. Multiplying any weight by 0 always returns 0. Therefore, zero-valued indicators have no direct effect on the outcome of the neuron performance. Of course, we can talk about indirect influence here. Indeed, there could be a situation where the contribution of a particular indicator to the overall sum is insufficient to activate the neuron. However, this is a lesser evil, and we accept these risks.</span></p>
<p class="p_Text"><a name="study_files" class="hmanchor"></a><span class="f_Text">Perhaps, it is worth mentioning that for future tests of our models, we will immediately create two sets of training data:</span></p>
<ul style="list-style-type:disc">
<li class="p_li"><span class="f_li">We will write the training samples with </span><span class="f_li" style="font-style: italic; font-weight: bold;">non-normalized</span><span class="f_li"> initial data to the files </span><span class="f_li" style="font-style: italic;">study_data_not_norm.csv</span><span class="f_li"> and </span><span class="f_li" style="font-style: italic;">test_data_not_norm.csv</span><span class="f_li">.</span></li>
<li class="p_li"><span class="f_li">We will write the training datasets with </span><span class="f_li" style="font-style: italic; font-weight: bold;">non-normalized</span><span class="f_li"> source data into files named </span><span class="f_li" style="font-style: italic;">study_data.csv</span><span class="f_li"> and </span><span class="f_li" style="font-style: italic;">test_data.csv</span><span class="f_li">.</span></li>
</ul>
<p class="p_Text"><span class="f_Text">To create the aforementioned training datasets, we will use the previously described script from the file c</span><span class="f_Text" style="font-style: italic;">reate_initial_data.mq5</span><span class="f_Text">. We will run it twice to collect the same historical data but change the filenames for data recording and the &quot;Data normalization flag.&quot;</span></p>

</div>

</body>
</html>
