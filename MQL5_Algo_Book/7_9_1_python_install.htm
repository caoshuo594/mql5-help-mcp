<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>7.9.1 Installing Python and MetaTrader5 package</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part7.htm"> Part 7. Advanced language tools </a> / <a class="h_m" href="7_9_python.htm"> 7.9 Native python support </a>/ 7.9.1 Installing Python and the MetaTrader5 package
          </td>
          <td width="70" align="right">
          <a href="7_9_python.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="7_9_2_python_funcs_overview.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">7.9.1 Installing Python and the MetaTrader5 package</span></p>
<p class="p_Text"><span class="f_Text">To study the materials in this chapter, Python must be installed on your computer. If you haven't installed it yet, download the latest version of Python (e.g. 3.10 at the time of writing) from </span><span class="f_Text" style="font-style: italic;">https://www.python.org/downloads/windows</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">When installing Python, it is recommended to check the &quot;Add Python to PATH&quot; flag so that you can run Python scripts from the command line from any folder.</span></p>
<p class="p_Text"><span class="f_Text">Once Python is downloaded and running, install the MetaTrader5 module from the command line (here </span><span class="f_Text" style="font-style: italic;">pip</span><span class="f_Text"> is a standard Python package manager program):</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">pip&nbsp;install&nbsp;MetaTrader5</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Subsequently, you can check the package update with the following command line:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">pip&nbsp;install&nbsp;--upgrade&nbsp;MetaTrader5</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">The syntax for adding other commonly used packages is similar. In particular, many scripts require data analysis and visualization packages: </span><span class="f_Text" style="font-style: italic;">pandas</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">matplotlib</span><span class="f_Text">, respectively.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">pip&nbsp;install&nbsp;matplotlib</span>
<br><span class="f_CodeExample">pip&nbsp;install&nbsp;pandas</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">You can create a new Python script directly from the MQL5 Wizard in MetaEditor. In addition to the script name, the user can select options for importing multiple packages, such as </span><span class="f_Text" style="font-style: italic;">TensorFlow</span><span class="f_Text">, </span><span class="f_Text" style="font-style: italic;">NumPy</span><span class="f_Text">, or </span><span class="f_Text" style="font-style: italic;">Datetime</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">Scripts by default are suggested to be placed in the folder </span><span class="f_Text" style="font-style: italic;">MQL5/Scripts</span><span class="f_Text">. Newly created and existing Python scripts are displayed in the MetaTrader 5 Navigator, marked with a special icon, and can be launched from the Navigator in the usual way. Python scripts can be executed on the chart in parallel with other MQL5 scripts and Expert Advisors. To stop a script if its execution is looped, simply remove it from the chart.</span></p>
<p class="p_ImageCaption"><img class="help" alt="Running Python Script in Terminal" title="Running Python Script in Terminal" width="600" height="400" style="margin:0 auto 0 auto;width:600px;height:400px;border:none" src="python_mt5.png"/></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Running Python script in the terminal</span></p>
<p class="p_Text"><span class="f_Text">The Python script launched from the terminal receives the name of the symbol and the timeframe of the chart through command line parameters. For example, we can run the following script on the EURUSD, H1 chart, in which the arguments are available as the </span><span class="f_Text" style="font-style: italic;">sys.argv</span><span class="f_Text"> array:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample">&nbsp;sys</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="font-weight: bold;">print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">'The&nbsp;command&nbsp;line&nbsp;arguments&nbsp;are:'</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample" style="font-weight: bold;">for</span><span class="f_CodeExample">&nbsp;i&nbsp;</span><span class="f_CodeExample" style="font-weight: bold;">in</span><span class="f_CodeExample">&nbsp;sys.argv:</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="font-weight: bold;">print</span><span class="f_CodeExample">(i)</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">It will output to the expert log:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">The&nbsp;command&nbsp;line&nbsp;arguments&nbsp;are:</span>
<br><span class="f_CodeExample">C:\Program&nbsp;Files\MetaTrader&nbsp;5\MQL5\Scripts\MQL5Book\Python\python-args.py</span>
<br><span class="f_CodeExample">EURUSD</span>
<br><span class="f_CodeExample">60</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">In addition, a Python script can be run directly from MetaEditor by specifying the Python installation location in the editor </span><span class="f_Text" style="font-style: italic;">Settings</span><span class="f_Text"> dialog, tab </span><span class="f_Text" style="font-style: italic;">Compilers</span><span class="f_Text"> – then the compilation command for files with the extension </span><span class="f_Text" style="font-style: italic;">*.py</span><span class="f_Text"> becomes a run command.</span></p>
<p class="p_Text"><span class="f_Text">Finally, Python scripts can also be run in their native environment by passing them as parameters in </span><span class="f_Text" style="font-style: italic;">python.exe</span><span class="f_Text"> calls from the command line or from another IDE (Integrated Development Environment) adapted for Python, such as Jupyter Notebook.</span></p>
<p class="p_Text"><span class="f_Text">If algorithmic trading is enabled in the terminal, then trading from Python is also enabled by default. To further protect accounts when using third-party Python libraries, the platform settings provide the option &quot;Disable automatic trading via external Python API&quot;. Thus, Python scripts can selectively block trading, leaving it available to MQL programs. When this option is enabled, trading function calls in a Python script will return error 10027 (TRADE_RETCODE_CLIENT_DISABLES_AT) indicating that algorithmic trading is disabled by the client terminal.</span></p>
<p class="p_Quote"><span class="f_Quote" style="font-weight: bold;">MQL5 vs Python</span><br>
<span class="f_Quote" style="font-weight: bold;">&nbsp;</span><br>
<span class="f_Quote"> Python is an interpreted language, unlike compiled MQL5. For us as developers, this makes life easier because we don't need a separate compilation phase to get a working program. However, the execution speed of scripts in Python is noticeably lower than those compiled in MQL5. </span><br>
<span class="f_Quote" style="font-weight: bold;">&nbsp;</span><br>
<span class="f_Quote">Python is a dynamically typed language: the type of a variable is determined by the value we put in it. On the one hand, this gives flexibility, but it also requires caution in order to avoid unforeseen errors. MQL5 uses static typing, that is, when describing variables, we must explicitly specify their type, and the compiler monitors type compatibility. </span><br>
<span class="f_Quote" style="font-weight: bold;">&nbsp;</span><br>
<span class="f_Quote">Python itself &quot;cleans the garbage&quot;, that is, frees the memory allocated by the application program for objects. In MQL5 we have to follow up the timely call of </span><span class="f_Quote" style="font-style: italic;">delete</span><span class="f_Quote"> for dynamic objects. </span><br>
<span class="f_Quote" style="font-style: italic;">&nbsp;</span><br>
<span class="f_Quote">In Python syntax, source code indentation plays an important role. If you need to write a compound statement (for example, a loop or conditional) with a block of several nested statements, then Python uses spaces or tabs for this purpose (they must be equal in size within the block). Mixing tabs and spaces is not allowed. The wrong indentation will result in an error. In MQL5, we form blocks of compound statements by enclosing them in curly brackets { ... }, but formatting does not play a role, and you can apply any style you like without breaking the program's performance. </span><br>
<span class="f_Quote" style="font-style: italic;">&nbsp;</span><br>
<span class="f_Quote">Python functions support two types of parameters: named and positional. The second type corresponds to what we are used to in MQL5: the value for each parameter must be passed strictly in its order in the list of arguments (according to the function prototype). In contrast, named parameters are passed as a combination of name and value (with '=' between them), and therefore they can be specified in any order, for example, </span><span class="f_Quote" style="font-style: italic;">func(param2 = value2, param1 = value1)</span><span class="f_Quote">.</span></p>

</div>

</body>
</html>
