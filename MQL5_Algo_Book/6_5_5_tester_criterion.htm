<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>6.5.5 Optimization criteria</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part6.htm"> Part 6. Trading automation </a> / <a class="h_m" href="6_5_tester.htm"> 6.5 Testing and optimization of Expert Advisors </a>/ 6.5.5 Optimization criteria
          </td>
          <td width="70" align="right">
          <a href="6_5_4_tester_multicurrency_sync.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="6_5_6_tester_testerstatistics.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">6.5.5 Optimization criteria</span></p>
<p class="p_Text"><span class="f_Text">An optimization criterion is a certain metric that defines the quality of the tested set of input parameters. The greater the value of the optimization criterion, the better the test result with a given set of parameters is estimated. The parameter is selected on the &quot;Settings&quot; tab to the right of the &quot;Optimization&quot; field.</span></p>
<p class="p_Text"><span class="f_Text">The criterion is important not only for the user to be able to compare the results. Without an optimization criterion, it is impossible to use a genetic algorithm, since on the basis of the criterion it &quot;decides&quot; how to select candidates for new generations. The criterion is not used during full optimization with a complete iteration of all possible variants.</span></p>
<p class="p_Text"><span class="f_Text">The following built-in optimization criteria are available in the tester:</span></p>
<ul style="list-style-type:disc">
<li class="p_li"><span class="f_li">Maximum balance</span></li>
<li class="p_li"><span class="f_li">Maximum profitability</span></li>
<li class="p_li"><span class="f_li">Maximum expected win (average profit/loss per trade)</span></li>
<li class="p_li"><span class="f_li">Minimum drawdown as a percentage of equity</span></li>
<li class="p_li"><span class="f_li">Maximum recovery factor</span></li>
<li class="p_li"><span class="f_li">Maximum Sharpe ratio</span></li>
<li class="p_li"><span class="f_li">Custom optimization criterion</span></li>
</ul>
<p class="p_Text"><span class="f_Text">When choosing the latter option, the value of the </span><span class="f_Text" style="font-style: italic;">OnTester</span><span class="f_Text"> function implemented in the Expert Advisor will be taken into account as an optimization criterion – we will consider it <a href="6_5_7_tester_ontester.htm" class="topiclink">later</a>. This parameter allows the programmer to use any custom index for optimization.</span></p>
<p class="p_Text"><span class="f_Text">A special &quot;complex criterion&quot; is also available in MetaTrader 5. This is an integral metric of the quality of the testing pass, which takes into account several parameters at once:</span></p>
<ul style="list-style-type:disc">
<li class="p_li"><span class="f_li">Number of deals</span></li>
<li class="p_li"><span class="f_li">Drawdown</span></li>
<li class="p_li"><span class="f_li">Recovery factor</span></li>
<li class="p_li"><span class="f_li">Mathematical expectation of winning</span></li>
<li class="p_li"><span class="f_li">Sharpe ratio</span></li>
</ul>
<p class="p_Text"><span class="f_Text">The formula is not disclosed by the developers, but it is known that possible values range from 0 to 100. It is important that the values of the complex parameter affect the color of the cells of the </span><span class="f_Text" style="font-style: italic;">Result</span><span class="f_Text"> column in the optimization table regardless of the criterion, i.e., highlighting following this scheme works even when another criterion is chosen for display in the </span><span class="f_Text" style="font-style: italic;">Result</span><span class="f_Text"> column. Weak combinations with values below 20 are highlighted in red, strong combinations above 80 are highlighted in dark green.</span></p>
<p class="p_Text"><span class="f_Text">The search for a universal criterion of the trading system quality factor is an urgent and difficult task for most traders, since the choice of settings based on the maximum value of one criterion (for example, profit) is, as a rule, far from the best option in terms of stable and predictable behavior of the Expert Advisor in the foreseeable future.</span></p>
<p class="p_Text"><span class="f_Text">The presence of a complex indicator allows you to level the weaknesses of each individual metric (and they are necessarily available and widely known) and provides a guideline when developing your own custom variables for calculation in </span><span class="f_Text" style="font-style: italic;">OnTester</span><span class="f_Text">. We will deal with this soon.</span></p>

</div>

</body>
</html>
