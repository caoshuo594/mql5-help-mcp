<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>5.4.19 Limitations and advantages of indicators</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part5.htm"> Part 5. Creating application programs </a> / <a class="h_m" href="5_4_indicators_make.htm"> 5.4 Creating custom indicators </a>/ 5.4.19 Limitations and advantages of indicators
          </td>
          <td width="70" align="right">
          <a href="5_4_18_indicators_test.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="5_4_20_indicators_wizard.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">5.4.19 Limitations and advantages of indicators</span></p>
<p class="p_Text"><span class="f_Text">All specialized functions discussed in this chapter are available only in the indicator source codes. It makes no sense to use them in other types of MQL programs: they will return an error.</span></p>
<p class="p_Text"><span class="f_Text">There are other functions that are prohibited in indicators:</span></p>
<ul style="list-style-type:disc">
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="6_4_7_experts_ordercalcmargin.htm" class="topiclink">OrderCalcMargin</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="6_4_8_experts_ordercalcprofit.htm" class="topiclink">OrderCalcProfit</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="6_4_11_experts_ordercheck.htm" class="topiclink">OrderCheck</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="6_4_13_experts_ordersend_ordersendasync.htm" class="topiclink">OrderSend</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="7_5_3_network_ftp.htm" class="topiclink">SendFTP</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="7_5_4_network_http.htm" class="topiclink">WebRequest</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="7_5_5_network_socket_create_connect.htm" class="topiclink">Socket***</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="4_7_4_timing_sleep.htm" class="topiclink">Sleep</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="4_8_4_output_messagebox.htm" class="topiclink">MessageBox</a></span></li>
<li class="p_li"><span class="f_li" style="font-style: italic;"><a href="5_1_7_runtime_remove.htm" class="topiclink">ExpertRemove</a></span></li>
</ul>
<p class="p_Text"><span class="f_Text">Some of them (with the prefix </span><span class="f_Text" style="font-style: italic;">Order</span><span class="f_Text">-) refer to trading calculations and are only allowed in Expert Advisors and scripts. Others are intended for executing requests that block the tread execution until the result is returned, while this is not allowed for indicators because they are executed in the terminal's interface thread. For a similar reason, the </span><span class="f_Text" style="font-style: italic;">Sleep</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">MessageBox</span><span class="f_Text"> functions are prohibited.</span></p>
<p class="p_Text"><span class="f_Text">Indicators are primarily responsible for visualizing data and, oddly enough, are not suitable for massive calculations. In particular, if you decide to create an indicator that trains a neural network or a decision tree in the process, this will most likely negatively affect the normal functioning of the terminal.</span></p>
<p class="p_Text"><span class="f_Text">The effect of a long calculation is demonstrated by the indicator </span><span class="f_Text" style="font-style: italic;">IndBarIndex.mq5</span><span class="f_Text">, which in the normal mode is designed to display bar numbers in the elements of its buffer. However, using the input parameter </span><span class="f_Text" style="font-style: italic;">SimulateCalculation</span><span class="f_Text">, which should be set to </span><span class="f_Text" style="font-style: italic;">true</span><span class="f_Text">, you can start an infinite loop on a timer.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//&nbsp;Setting&nbsp;to&nbsp;true&nbsp;will&nbsp;freeze&nbsp;the&nbsp;drawing&nbsp;of&nbsp;indicators</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;on&nbsp;charts&nbsp;of&nbsp;the&nbsp;same&nbsp;working&nbsp;symbol</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;Attention!&nbsp;Don't&nbsp;forget&nbsp;to&nbsp;remove&nbsp;the&nbsp;indicator&nbsp;after&nbsp;the&nbsp;experiment!</span>
<br><span class="f_CodeExample" style="color: #0000ff;">input</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">bool</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">SimulateCalculation</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">false</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnInit</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;...</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;if(SimulateCalculation)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">EventSetTimer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">1</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">}</span>
<br><span class="f_CodeExample">...&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnTimer</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Comment</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;Calculation&nbsp;started&nbsp;at&nbsp;&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">TimeLocal</span><span class="f_CodeExample">());</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">while</span><span class="f_CodeExample">(!</span><span class="f_CodeExample" style="color: #0000ff;">IsStopped</span><span class="f_CodeExample">())</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;infinite&nbsp;loop&nbsp;to&nbsp;emulate&nbsp;calculations</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Comment</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">In this mode, the indicator, as expected, begins to completely occupy 1 processor core, but another side effect also appears. Any indicators on the same symbol where </span><span class="f_Text" style="font-style: italic;">IndBarIndex</span><span class="f_Text"> is placed, stop updating. For example, we can run </span><span class="f_Text" style="font-style: italic;">IndBarIndex</span><span class="f_Text"> on EURUSD (any timeframe), and then on any other EURUSD chart, you can try to apply a regular moving average: it will not be displayed until you remove </span><span class="f_Text" style="font-style: italic;">IndBarIndex</span><span class="f_Text"> from the first chart. </span></p>
<p class="p_Text"><span class="f_Text">In this regard, all lengthy calculations should be placed in separate threads, that is, scripts or non-trading Expert Advisors, and only their results should be used in indicators. The MQL5 API allows you to create new <a href="5_7_charts.htm" class="topiclink">charts</a> or <a href="5_8_28_objects_chart.htm" class="topiclink">objects with charts</a>, in which it is possible to apply <a href="5_7_24_charts_tpl.htm" class="topiclink">tpl templates</a> with the required Expert Advisor or script.</span></p>

</div>

</body>
</html>
