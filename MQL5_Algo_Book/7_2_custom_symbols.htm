<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>7.2 Custom symbols</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part7.htm"> Part 7. Advanced language tools </a>/ 7.2 Custom symbols
          </td>
          <td width="70" align="right">
          <a href="7_1_10_resources_applied_usecase.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="7_2_1_custom_symbols_create_delete.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H2"><span class="f_H2">7.2 Custom symbols</span></p>
<p class="p_Text"><span class="f_Text">One of the interesting technical features of MetaTrader 5 is the support for custom financial instruments. These are the symbols that are defined not by the broker on the server side but by the trader directly in the terminal.</span></p>
<p class="p_Text"><span class="f_Text">Custom symbols can be added to the </span><span class="f_Text" style="font-style: italic;">Market Watch</span><span class="f_Text"> list along with standard symbols. The charts of such symbols with them can be used in a usual way.</span></p>
<p class="p_Text"><span class="f_Text">The easiest way to create a custom symbol is to specify its calculation formula in the corresponding property. To do this, from the terminal interface, call the context menu in the </span><span class="f_Text" style="font-style: italic;">Market Watch</span><span class="f_Text"> window, execute the </span><span class="f_Text" style="font-style: italic;">Symbols</span><span class="f_Text"> command, go to the symbol hierarchy and its </span><span class="f_Text" style="font-style: italic;">Custom</span><span class="f_Text"> branch, and press the </span><span class="f_Text" style="font-style: italic;">Create symbol</span><span class="f_Text"> button. As a result, a dialog for setting the properties of the new symbol will open. At the same place, you can import external tick history (tab </span><span class="f_Text" style="font-style: italic;">Ticks</span><span class="f_Text">) or quotes (tab </span><span class="f_Text" style="font-style: italic;">Bars</span><span class="f_Text">) into similar tools, from files. This is discussed in detail in the MetaTrader 5 <a href="https://www.metatrader5.com/en/terminal/help/trading_advanced/custom_instruments" target="_blank" class="weblink" title="MetaTrader 5 documentation">documentation</a>.</span></p>
<p class="p_Text"><span class="f_Text">However, the MQL5 API provides the most complete control over custom symbols.</span></p>
<p class="p_Text"><span class="f_Text">For custom symbols, the API provides a group of functions working with <a href="6_1_symbols.htm" class="topiclink">Financial instruments and Market Watch</a>. In particular, such symbols can be listed from the program using standard functions such as </span><span class="f_Text" style="font-style: italic;">SymbolsTotal</span><span class="f_Text">, </span><span class="f_Text" style="font-style: italic;">SymbolName</span><span class="f_Text">, and </span><span class="f_Text" style="font-style: italic;">SymbolInfo</span><span class="f_Text">. We have already briefly touched on this possibility and provided an example in the section on <a href="6_1_23_symbols_custom.htm" class="topiclink">Custom symbol properties</a>. A distinctive feature of a custom symbol is the enabled flag (property) SYMBOL_CUSTOM.</span></p>
<p class="p_Text"><span class="f_Text">Using the built-in functions, you can splice Futures, generate random time series with specified characteristics, emulate renko, equal-range bars, equivolume, and other non-standard types of charts (for example, second timeframes). Also, unlike importing static files, software-controlled custom symbols can be generated in realt-time based on the data from web services such as cryptocurrency exchanges. The conversation on integrating MQL programs with the <a href="7_5_network.htm" class="topiclink">web</a> is still ahead, but this possibility cannot be ignored.</span></p>
<p class="p_Text"><span class="f_Text">A custom symbol can be easily used to test strategies in the tester or as an additional method of technical analysis. However, this technology has its limitations.</span></p>
<p class="p_Text"><span class="f_Text">Due to the fact that custom symbols are defined in the terminal and not on the server, they cannot be traded online. In particular, if you create a renko chart, trading strategies based on it will need to be adapted in one way or another so that trading signals and trades are actually separated by different symbols: artificial user and real brokerage. We will look at a couple of <a href="7_2_8_custom_symbols_trade_specifics.htm" class="topiclink">solutions to the problem</a>.</span></p>
<p class="p_Text"><span class="f_Text">In addition, since the duration of all bars of one timeframe is the same in the platform, any emulation of bars with different periods (Renko, equivolume, etc.) is usually based on the smaller of the available M1 timeframes and does not provide a full time synchronization with reality. In other words, ticks belonging to such a bar are forced to have an artificial time within 60 seconds, even if a renko &quot;brick&quot; or a bar of a given volume actually required much more time to form. Otherwise, if we put ticks in real time, they would form the next M1 bars, violating the rules of renko or equivolume. Moreover, there are situations when a renko &quot;brick&quot; or other artificial bar should be created with a time interval smaller than 1 minute from the previous bar (for example, when there is increased fast volatility). In such cases, it will be necessary to change the time of historical bars in quotes of the custom instrument (shift them to the left &quot;retroactively&quot;) or put future times on new bars (which is highly undesirable). This problem cannot be solved in a general way within the framework of user-defined symbols technology.</span></p>

</div>

</body>
</html>
