<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>6.4.29 Transaction properties</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part6.htm"> Part 6. Trading automation </a> / <a class="h_m" href="6_4_experts.htm"> 6.4 Creating Expert Advisors </a>/ 6.4.29 Deal properties
          </td>
          <td width="70" align="right">
          <a href="6_4_28_experts_positionget_funcs.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="6_4_30_experts_history_select.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">6.4.29 Deal properties</span></p>
<p class="p_Text"><span class="f_Text">A deal is a reflection of the fact that a trading operation was performed on the basis of an order. One order can generate several deals due to the execution in parts or the opposite closing of positions.</span></p>
<p class="p_Text"><span class="f_Text">Deals are characterized by properties of three basic types: integer (and compatible with them), real, and string. Each property is described by its own constant in one of the enumerations: </span><span class="f_Text" style="letter-spacing: -1px;">ENUM_DEAL_PROPERTY_INTEGER</span><span class="f_Text">, </span><span class="f_Text" style="letter-spacing: -1px;">ENUM_DEAL_PROPERTY_DOUBLE</span><span class="f_Text">, </span><span class="f_Text" style="letter-spacing: -1px;">ENUM_DEAL_PROPERTY_STRING</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">To read deal properties, use the </span><span class="f_Text" style="font-style: italic;"><a href="6_4_32_experts_historydealget_funcs.htm" class="topiclink">HistoryDealGet</a></span><span class="f_Text"><a href="6_4_32_experts_historydealget_funcs.htm" class="topiclink"> functions</a>. All of them assume that the necessary section of history was previously requested using special functions for the <a href="6_4_30_experts_history_select.htm" class="topiclink">selection of orders and deals from history</a>.</span></p>
<p class="p_Text"><span class="f_Text">Integer properties are described in the ENUM_DEAL_PROPERTY_INTEGER enumeration.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table" style="width:33%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Type</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_TICKET</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal ticket; a unique number that is assigned to each transaction</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ulong</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_ORDER</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">The ticket of the order on the basis of which the deal was executed</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ulong</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_TIME</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal time</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">datetime</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_TIME_MSC</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal time in milliseconds</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ulong</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal type</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ENUM_DEAL_TYPE (see below)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_ENTRY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal direction; market entry, market exit, or reversal</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ENUM_DEAL_ENTRY (see below)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_MAGIC</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Magic number for the deal (based on ORDER_MAGIC)</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ulong</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_REASON</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal reason or source</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ENUM_DEAL_REASON (see below)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">DEAL_POSITION_ID</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Identifier of the position that was opened, modified or closed by the deal</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">ulong</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">Possible deal types are represented by the ENUM_DEAL_TYPE enumeration.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_BUY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Buy</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_SELL</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Sell</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_BALANCE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Balance accrued</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_CREDIT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Credit accrual</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_CHARGE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Additional charges</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_CORRECTION</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Correction</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_BONUS</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Bonuses</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_COMMISSION</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Additional commission</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_COMMISSION_DAILY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Commission charged at the end of the trading day</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_COMMISSION_MONTHLY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Commission charged at the end of the month</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_COMMISSION_AGENT_DAILY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Agent commission charged at the end of the trading day</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_COMMISSION_AGENT_MONTHLY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Agent commission charged at the end of the month</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_INTEREST</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Interest accrual on free funds</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_BUY_CANCELED</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Canceled buy deal</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TYPE_SELL_CANCELED</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Canceled sell deal</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_DIVIDEND</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Dividend accrual</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_DIVIDEND_FRANKED</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Accrual of a franked dividend (tax exempt)</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TAX</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Tax accrual</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">The DEAL_TYPE_BUY_CANCELED and DEAL_TYPE_SELL_CANCELED options reflect the situation when an earlier deal is canceled. In this case, the type of the previously executed deal (DEAL_TYPE_BUY or DEAL_TYPE_SELL) is changed to DEAL_TYPE_BUY_CANCELED or DEAL_TYPE_SELL_CANCELED, and its profit/loss is reset to zero. Previously received profit/loss is credited/debited from the account as a separate balance operation.</span></p>
<p class="p_Text"><span class="f_Text">Deals differ in the way the position is changed. This can be a simple opening of a position (entry to the market), increasing the volume of a previously opened position, closing a position with a deal in the opposite direction or position reversal when the opposite deal covers the volume of a previously opened position. The latter operation is only supported on netting accounts.</span></p>
<p class="p_Text"><span class="f_Text">All these situations are described by the elements of the ENUM_DEAL_ENTRY enumeration.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_ENTRY_IN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Market entry</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_ENTRY_OUT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Market exit</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_ENTRY_INOUT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Reversal</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_ENTRY_OUT_BY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Closing by an opposite position</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">The reasons for the deal are summarized in the ENUM_DEAL_REASON enumeration.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_CLIENT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Triggering of an order placed from the desktop terminal</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_MOBILE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Triggering of an order placed from a mobile application</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_WEB</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Triggering of an order placed from the web platform</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_EXPERT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Triggering of an order placed by an Expert Advisor or a script</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_SL</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Stop Loss order triggered</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_TP</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Take Profit order triggering</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_SO</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Stop Out event</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_ROLLOVER</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Position transfer to a new day</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_VMARGIN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Add/deduct variation margin</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_REASON_SPLIT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Split (lower price) the instrument on which there was a position</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">Real type properties are represented by the ENUM_DEAL_PROPERTY_DOUBLE enumeration.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_VOLUME</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal volume</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_PRICE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal price</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_COMMISSION</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal commission</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_SWAP</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Accumulated swap at close</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_PROFIT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Financial result of the deal</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_FEE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Fee for the deal which is charged immediately after the deal</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_SL</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Stop Loss Level</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_TP</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Take Profit level</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">The two last properties are filled as follows: for an entry or reversal deal, the </span><span class="f_Text" style="font-style: italic;">Stop Loss/Take Profit</span><span class="f_Text"> value is taken from the order by which the position was opened or expanded. For the exit deal, the </span><span class="f_Text" style="font-style: italic;">Stop Loss/Take Profit</span><span class="f_Text"> value is taken from the position at the time of its closing.</span></p>
<p class="p_Text"><span class="f_Text">String deal properties are available via ENUM_DEAL_PROPERTY_STRING enumeration constants.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_SYMBOL</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">The name of the symbol for which the deal was made</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_COMMENT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal comment</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">DEAL_EXTERNAL_ID</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Deal identifier in the external trading system (on the exchange)</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">We will test how to read the properties in the section on </span><span class="f_Text" style="font-style: italic;"><a href="6_4_32_experts_historydealget_funcs.htm" class="topiclink">HistoryDealGet</a></span><span class="f_Text"><a href="6_4_32_experts_historydealget_funcs.htm" class="topiclink"> functions</a> through the </span><span class="f_Text" style="font-style: italic;">DealMonitor</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">DealFilter</span><span class="f_Text"> classes.</span></p>

</div>

</body>
</html>
