<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>7.2.3 Setting margin rates</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part7.htm"> Part 7. Advanced language tools </a> / <a class="h_m" href="7_2_custom_symbols.htm"> 7.2 Custom symbols </a>/ 7.2.3 Setting margin rates
          </td>
          <td width="70" align="right">
          <a href="7_2_2_custom_symbols_properties.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="7_2_4_custom_symbols_sessions.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">7.2.3 Setting margin rates</span></p>
<p class="p_Text"><span class="f_Text">Previously, we studied the </span><span class="f_Text" style="font-style: italic;"><a href="6_1_7_symbols_margin_rates.htm" class="topiclink">SymbolInfoMarginRate</a></span><span class="f_Text"> function, which returns the margin rates per symbol set by the broker. For a custom symbol, we are free to set these rates using the function </span><span class="f_Text" style="font-style: italic;">CustomSymbolSetMarginRate</span><span class="f_Text">.</span></p>
<p class="p_H4"><span class="f_H4">bool CustomSymbolSetMarginRate(const string name, ENUM_ORDER_TYPE orderType, double initial, double maintenance)</span></p>
<p class="p_Text"><span class="f_Text">The function sets margin rates depending on the type and direction of the order (according to the </span><span class="f_Text" style="font-style: italic;">orderType</span><span class="f_Text"> value from the <a href="6_4_4_experts_order_type.htm" class="topiclink">ENUM_ORDER_TYPE</a> enumeration). The rates for calculating the initial and maintenance margin (collateral for each lot of an opened or existing position) are transmitted, respectively, in the </span><span class="f_Text" style="font-style: italic;">initial</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">maintenance</span><span class="f_Text"> parameters.</span></p>
<p class="p_Text"><span class="f_Text">The final margin amounts are determined based on several symbol properties (SYMBOL_TRADE_CALC_MODE, SYMBOL_MARGIN_INITIAL, SYMBOL_MARGIN_MAINTENANCE, and others) described in the section <a href="6_1_16_symbols_margin.htm" class="topiclink">Margin requirements</a>, so they should also be set on the custom symbol if needed.</span></p>
<p class="p_Text"><span class="f_Text">The function will return an indicator of success (</span><span class="f_Text" style="font-style: italic;">true</span><span class="f_Text">) or error (</span><span class="f_Text" style="font-style: italic;">false</span><span class="f_Text">).</span></p>
<p class="p_Text"><span class="f_Text">With the help of this function and the properties related to margin calculation, you can emulate trading conditions of servers that are unavailable for one reason or another, and debug your MQL programs in the tester.</span></p>

</div>

</body>
</html>
