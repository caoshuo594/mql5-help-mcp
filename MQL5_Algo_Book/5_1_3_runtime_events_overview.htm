<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>5.1.3 Overview of event handling functions</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part5.htm"> Part 5. Creating application programs </a> / <a class="h_m" href="5_1_runtime.htm"> 5.1 General principles for executing MQL programs </a>/ 5.1.3 Overview of event handling functions
          </td>
          <td width="70" align="right">
          <a href="5_1_2_runtime_threads.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="5_1_4_runtime_lifecycle.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">5.1.3 Overview of event handling functions</span></p>
<p class="p_Text"><span class="f_Text">The transfer of control to MQL programs, that is, their execution, occurs by calling special functions by the terminal or test agents, which the MQL developer defines in their application code to process predefined events. Such functions must have a specified prototype, including a name, a list of parameters (number, types, and order), and a return type.</span></p>
<p class="p_Text"><span class="f_Text">The name of each function corresponds to the meaning of the event, with the addition of the prefix </span><span class="f_Text" style="font-style: italic;">On</span><span class="f_Text">. For example, </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text"> is the main function for &quot;starting&quot; scripts and services; it is called by the terminal at the moment the script is placed on the chart or the service instance is launched.</span></p>
<p class="p_Text"><span class="f_Text">For the purposes of this book, we will refer to an event and its corresponding handler by the same name.</span></p>
<p class="p_Text"><span class="f_Text">The following table lists all event types and programs that support them (</span><img class="help" alt="indicator_small" width="23" height="23" style="margin:0;width:23px;height:23px;border:none" src="indicator_small.png"/><span class="f_Text">– indicator, </span><img class="help" alt="expert_small" width="23" height="23" style="margin:0;width:23px;height:23px;border:none" src="expert_small.png"/><span class="f_Text"> – Expert Advisor, </span><img class="help" alt="script_small" width="23" height="23" style="margin:0;width:23px;height:23px;border:none" src="script_small.png"/><span class="f_Text"> – script, </span><img class="help" alt="services_small" width="23" height="23" style="margin:0;width:23px;height:23px;border:none" src="services_small.png"/><span class="f_Text"> – service). A detailed description of the events is given in the sections of the respective program types. Many factors can cause initialization and deinitialization events: placing the program on the chart, changing its settings, changing the symbol/timeframe of the chart (or template, or profile), changing the account, and others (see chapter <a href="5_1_4_runtime_lifecycle.htm" class="topiclink">Features of starting and stopping programs of various types</a>).</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables" style="text-align: right;"><span class="f_BoldTitlesInTables">Program&nbsp;type</span></p>
<p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Event/Handler</span></p>
</th>
<th class="table" style="width:5%;"><p class="p_BoldTitlesInTables" style="text-align: center;"><img class="help" alt="Indicator" title="Indicator" width="23" height="23" style="margin:0 auto 0 auto;width:23px;height:23px;border:none" src="indicator_small.png"/></p>
</th>
<th class="table" style="width:5%;"><p class="p_BoldTitlesInTables" style="text-align: center;"><img class="help" alt="Expert" title="Expert" width="23" height="23" style="margin:0 auto 0 auto;width:23px;height:23px;border:none" src="expert_small.png"/></p>
</th>
<th class="table" style="width:5%;"><p class="p_BoldTitlesInTables" style="text-align: center;"><img class="help" alt="Script" title="Script" width="23" height="23" style="margin:0 auto 0 auto;width:23px;height:23px;border:none" src="script_small.png"/></p>
</th>
<th class="table" style="width:5%;"><p class="p_BoldTitlesInTables" style="text-align: center;"><img class="help" alt="Service" title="Service" width="23" height="23" style="margin:0 auto 0 auto;width:23px;height:23px;border:none" src="services_small.png"/></p>
</th>
<th class="table" style="width:60%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="5_1_6_runtime_onstart.htm" class="topiclink">OnStart</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">&#9679;</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">&#9679;</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Start/Execute</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="5_1_5_runtime_oninit_ondeinit.htm" class="topiclink">OnInit</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Initialization after loading (see details in section <a href="5_1_4_runtime_lifecycle.htm" class="topiclink">Features of starting and stopping programs of various types</a>)</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="5_1_5_runtime_oninit_ondeinit.htm" class="topiclink">OnDeinit</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Deinitialization before stopping and unloading</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_4_1_experts_ontick.htm" class="topiclink">OnTick</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Getting a new price (tick)</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="5_4_2_indicators_oncalculate.htm" class="topiclink">OnCalculate</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">&#9679;</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Request to recalculate the indicator due to receiving a new price or synchronizing old prices</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="5_6_2_timer_ontimer.htm" class="topiclink">OnTimer</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Timer activation with a specified frequency</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_4_36_experts_ontrade.htm" class="topiclink">OnTrade</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Completion of a trading operation on the server</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_4_34_experts_ontradetransaction.htm" class="topiclink">OnTradeTransaction</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Changing the state of the trading account (orders, deals, positions)</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_2_2_marketbook_events.htm" class="topiclink">OnBookEvent</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Change in the order book</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="5_9_1_events_onchartevent.htm" class="topiclink">OnChartEvent</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">User or MQL program action on the chart</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_5_7_tester_ontester.htm" class="topiclink">OnTester</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">End of a single tester pass</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_5_9_tester_ontester_init_pass_deinit.htm" class="topiclink">OnTesterInit</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Initialization before optimization</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_5_9_tester_ontester_init_pass_deinit.htm" class="topiclink">OnTesterDeinit</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Deinitialization after optimization</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable"><a href="6_5_9_tester_ontester_init_pass_deinit.htm" class="topiclink">OnTesterPass</a></span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">+</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:5%;"><p class="p_fortable" style="text-align: center; margin: 0 0 0 0;"><span class="f_fortable" style="font-size: 16pt;">-</span></p>
</td>
<td class="table" style="width:60%;"><p class="p_fortable"><span class="f_fortable">Receiving optimization data from the testing agent</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">Mandatory handlers are marked with symbol '&#9679;', and optional handlers are marked with '+'.</span></p>
<p class="p_Text"><span class="f_Text">Although handler functions are primarily intended to be called by the runtime, you can also call them from your own source code. For example, if an Expert Advisor needs to make some calculation based on the available quotes immediately after the start, and even in the absence of ticks (for example, on weekends), you can call </span><span class="f_Text" style="font-style: italic;">OnTick</span><span class="f_Text"> before leaving </span><span class="f_Text" style="font-style: italic;">OnInit</span><span class="f_Text">. Alternatively, it would be logical to separate the calculation into a separate function and call it both from </span><span class="f_Text" style="font-style: italic;">OnInit</span><span class="f_Text"> and from </span><span class="f_Text" style="font-style: italic;">OnTick</span><span class="f_Text">. However, it is desirable to perform the work of the initialization function quickly, and if the calculation is long, it should be performed on a <a href="5_6_timer.htm" class="topiclink">timer</a>.</span></p>
<p class="p_Text"><span class="f_Text">All MQL programs (except libraries) must have at least one event handler. Otherwise, the compiler will generate an &quot;event handling function not found&quot; error.</span></p>
<p class="p_Text"><span class="f_Text">The presence of some handler functions determines the type of the program in the absence of #property directives that set another type. For example, having the </span><span class="f_Text" style="font-style: italic;">OnCalculate</span><span class="f_Text"> handler leads to the generation of the indicator (even if it is located in another folder, for example, scripts or Expert Advisors). The presence of the </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text"> handler (if there is no </span><span class="f_Text" style="font-style: italic;">OnCalculate</span><span class="f_Text">) means creating a script. At the same time, if the indicator, in addition to </span><span class="f_Text" style="font-style: italic;">OnCalculate</span><span class="f_Text">, will face </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text">, we get a compiler warning &quot;OnStart function defined in the non-script program&quot;.</span></p>
<p class="p_Text"><span class="f_Text">The book includes two files: </span><span class="f_Text" style="font-style: italic;">AllInOne.mq5</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">AllInOne.mqh</span><span class="f_Text">. The header file describes almost empty templates of all the main event handlers. They contain nothing except outputting the name of the handler to the log. We will consider the syntax and specifics of using each of the handlers in the sections on specific types of MQL programs. The meaning of this file is to provide a field for experiments with compiling different types of programs, depending on the presence of certain handlers and property directives (</span><span class="f_Text" style="font-style: italic;">#property</span><span class="f_Text">).</span></p>
<p class="p_Text"><span class="f_Text">Some combinations may result in errors or warnings.</span></p>
<p class="p_Text"><span class="f_Text">If the compilation was successful, then the resulting program type is automatically logged after it is loaded using the following line:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">const</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">type</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><br>
<span class="f_CodeExample" style="color: #ff0000;">&nbsp;&nbsp;&nbsp;PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">EnumToString</span><span class="f_CodeExample">((</span><span class="f_CodeExample" style="color: #ff0000;">ENUM_PROGRAM_TYPE</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #0000ff;">MQLInfoInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff0000;">MQL_PROGRAM_TYPE</span><span class="f_CodeExample">)));</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">We studied the enum ENUM_PROGRAM_TYPE and function </span><span class="f_Text" style="font-style: italic;">MQLInfoInteger</span><span class="f_Text"> in the section <a href="4_9_3_env_type_license.htm" class="topiclink">Program type and license</a>.</span></p>
<p class="p_Text"><span class="f_Text">The file </span><span class="f_Text" style="font-style: italic;">AllInOne.mq5</span><span class="f_Text">, which includes </span><span class="f_Text" style="font-style: italic;">AllInOne.mqh</span><span class="f_Text">, is initially located in the directory </span><span class="f_Text" style="font-style: italic;">MQL5Book/Scripts/p5/</span><span class="f_Text">, but it can be copied to any other folder, including neighboring </span><span class="f_Text" style="font-style: italic;">Navigator</span><span class="f_Text"> branches (for example, to a folder of Expert Advisors or indicators). Inside the file, in the comments, options are left for connecting certain program assembly configurations. By default, if you do not edit the file, you will bet an Expert Advisor.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Uncomment&nbsp;the&nbsp;following&nbsp;line&nbsp;to&nbsp;get&nbsp;the&nbsp;service&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;NB:&nbsp;also&nbsp;activate&nbsp;#define&nbsp;_OnStart&nbsp;OnStart&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//#property&nbsp;service</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Uncomment&nbsp;the&nbsp;following&nbsp;line&nbsp;to&nbsp;get&nbsp;a&nbsp;library&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//#property&nbsp;library</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Uncomment&nbsp;the&nbsp;following&nbsp;line&nbsp;to&nbsp;get&nbsp;a&nbsp;script&nbsp;or&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;service&nbsp;(#property&nbsp;service&nbsp;must&nbsp;be&nbsp;enabled)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//#define&nbsp;_OnStart&nbsp;OnStart</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//|&nbsp;Uncomment&nbsp;one&nbsp;of&nbsp;the&nbsp;following&nbsp;two&nbsp;lines&nbsp;for&nbsp;the&nbsp;indicator&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
<br><span class="f_CodeExample" style="color: #808080;">//+------------------------------------------------------------------+</span>
<br><span class="f_CodeExample" style="color: #808080;">//#define&nbsp;_OnCalculate1&nbsp;OnCalculate</span>
<br><span class="f_CodeExample" style="color: #808080;">//#define&nbsp;_OnCalculate2&nbsp;OnCalculate</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#include</span><span class="f_CodeExample">&nbsp;&lt;</span><span class="f_CodeExample" style="color: #333333;">MQL5Book</span><span class="f_CodeExample">/</span><span class="f_CodeExample" style="color: #333333;">AllInOne</span><span class="f_CodeExample">.</span><span class="f_CodeExample" style="color: #333333;">mqh</span><span class="f_CodeExample">&gt;</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">If we attach the program to the chart, we will get an entry in the log:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">EnumToString((ENUM_PROGRAM_TYPE)MQLInfoInteger(MQL_PROGRAM_TYPE))=PROGRAM_EXPERT&nbsp;/&nbsp;ok</span>
<br><span class="f_CodeExample">OnInit</span>
<br><span class="f_CodeExample">OnChartEvent</span>
<br><span class="f_CodeExample">OnTick</span>
<br><span class="f_CodeExample">OnTick</span>
<br><span class="f_CodeExample">OnTick</span>
<br><span class="f_CodeExample">...</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Also, most likely, a stream of records will be generated from the </span><span class="f_Text" style="font-style: italic;">OnTick</span><span class="f_Text"> handler if the market is open.</span></p>
<p class="p_Text"><span class="f_Text">If you duplicate the mq5 file under a different name and, for example, uncomment the directive </span><span class="f_Text" style="font-style: italic;">#property service</span><span class="f_Text">, the compiler will generate the service but will return a few warnings.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">no&nbsp;OnStart&nbsp;function&nbsp;defined&nbsp;in&nbsp;the&nbsp;script</span>
<br><span class="f_CodeExample">OnInit&nbsp;function&nbsp;is&nbsp;useless&nbsp;for&nbsp;scripts</span>
<br><span class="f_CodeExample">OnDeinit&nbsp;function&nbsp;is&nbsp;useless&nbsp;for&nbsp;scripts</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">The first of them, about the absence of the </span><span class="f_Text" style="font-style: italic;">OnStart </span><span class="f_Text">function, is actually significant, because when a service instance is created, no function will be called in it, but only global variables will be initialized. However, due to this, the journal (</span><span class="f_Text" style="font-style: italic;">Experts</span><span class="f_Text"> tab in the terminal) will still print the PROGRAM_SERVICE type. But as a rule, in services, as well as in scripts, it is assumed that the </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text"> function is present.</span></p>
<p class="p_Text"><span class="f_Text">The other two warnings arise because our header file contains handlers for all occasions, and the compiler reminds us that </span><span class="f_Text" style="font-style: italic;">OnInit</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">OnDeinit</span><span class="f_Text"> are pointless (will not be called by the terminal and will not even be included in the binary image of the program). Of course, in real programs there should be no such warnings, that is, all handlers should be involved, and everything superfluous should be removed from the source code, either physically or logically, using preprocessor directives for conditional compilation.</span></p>
<p class="p_Text"><span class="f_Text">If you create another copy of AllInOne.mq5 and activate not only the </span><span class="f_Text" style="font-style: italic;">#property service</span><span class="f_Text"> directive but also the </span><span class="f_Text" style="font-style: italic;">#define _OnStart OnStart</span><span class="f_Text"> macro, you will get a fully working service as a result of its compilation. When launched, it will not only display the name of its type but also the name of the triggered handler </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">The macro was required to be able to enable/disable the standard handler </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text"> if they wish to. In the </span><span class="f_Text" style="font-style: italic;">AllInOne.mqh</span><span class="f_Text"> text, this function is described as follows:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">_OnStart</span><span class="f_CodeExample">()&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;&quot;extra&quot;&nbsp;underline&nbsp;makes&nbsp;the&nbsp;function&nbsp;customized&nbsp;</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff0000;">__FUNCTION__</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">The name starting with an underscore makes it not a standard handler, but just a user-defined function with a similar prototype. When we include a macro, during compilation the compiler replaces </span><span class="f_Text" style="font-style: italic;">_OnStart</span><span class="f_Text"> on </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text">, and the result is already a standard handler. If we explicitly named the </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text"> function, then, according to the priorities of the characteristics that determine the type of the MQL program (see section <a href="5_1_1_runtime_features_by_progtype.htm" class="topiclink">Features of MQL programs of various types</a>), it would not allow you to get an Expert Advisor template (because </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text"> identifies the program as a script or service).</span></p>
<p class="p_Text"><span class="f_Text">Similar custom compilation with macros </span><span class="f_Text" style="font-style: italic;">_OnCalculate1</span><span class="f_Text"> or </span><span class="f_Text" style="font-style: italic;">_OnCalculate2</span><span class="f_Text"> required to optionally &quot;hide&quot; the handler with a standard name </span><span class="f_Text" style="font-style: italic;">OnCalculate</span><span class="f_Text">: otherwise, if it was present, we would always get an indicator.</span></p>
<p class="p_Text"><span class="f_Text">f in the next copy of the program you activate the macro </span><span class="f_Text" style="font-style: italic;">#define _OnCalculate1 OnCalculate</span><span class="f_Text">, you will get an example indicator (even though it is empty and does nothing). As we will see later, there are two different forms of the handler </span><span class="f_Text" style="font-style: italic;">OnCalculate</span><span class="f_Text"> for indicators, in connection with which they are presented under numbered names (</span><span class="f_Text" style="font-style: italic;">_OnCalculate1</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">_OnCalculate2</span><span class="f_Text">). If you run the indicator on the chart, you can see in the log the names of events </span><span class="f_Text" style="font-style: italic;">OnCalculate</span><span class="f_Text"> (upon arrival of ticks) and </span><span class="f_Text" style="font-style: italic;">OnChartEvent</span><span class="f_Text"> (for example, on a mouse click).</span></p>
<p class="p_Text"><span class="f_Text">When compiling the indicator, the compiler will generate two warnings:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">no&nbsp;indicator&nbsp;window&nbsp;property&nbsp;is&nbsp;defined,&nbsp;indicator_chart_window&nbsp;is&nbsp;applied</span>
<br><span class="f_CodeExample">no&nbsp;indicator&nbsp;plot&nbsp;defined&nbsp;for&nbsp;indicator</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">This is because indicators, as data visualization tools, require some specific settings in their code that are not here. At this stage of superficial acquaintance with different types of programs, this is not important. But further on, we will learn how to describe their properties and arrays in indicators, which determine what and how should be visualized on the chart. Then these warnings will disappear.</span></p>
<p class="p_H4"><a name="5_1_3_runtime_events_queue" class="hmanchor"></a><span class="f_H4">Event queue</span></p>
<p class="p_Text"><span class="f_Text">When a new event occurs, it must be delivered to all MQL programs running on the corresponding chart. Due to the single-threaded execution model of MQL programs (see section <a href="5_1_2_runtime_threads.htm" class="topiclink">Threads</a>), it may happen that the next event arrives when the previous one is still being processed. For such cases, the terminal maintains an event queue for each interactive MQL program. All events in it are processed one after another in order of receipt.</span></p>
<p class="p_Text"><span class="f_Text">Event queues have a limited size. Therefore, an irrationally written program can provoke an overflow of its queue due to slow actions. On overflow, new events are discarded without being queued.</span></p>
<p class="p_Text"><span class="f_Text">Not processing events fast enough can negatively affect the user experience or data quality (imagine you record <a href="6_2_marketbook.htm" class="topiclink">Market Depth</a> changes and skip a few messages). To solve this problem, you can look for more efficient algorithms or use the parallel operation of several interconnected MQL programs (for example, assign calculations to an indicator, and only read ready-made data in an Expert Advisor).</span></p>
<p class="p_Text"><span class="f_Text">It should be borne in mind that the terminal does not place all events in the queue but operates selectively. Some types of events are processed according to the principle &quot;no more than one event of this type in the queue&quot;. For example, if there is already the </span><span class="f_Text" style="font-style: italic;">OnTick</span><span class="f_Text"> event in the queue, or it is being processed, then a new </span><span class="f_Text" style="font-style: italic;">OnTick</span><span class="f_Text"> event is not queued. If there is already the </span><span class="f_Text" style="font-style: italic;">OnTimer</span><span class="f_Text"> event or a chart change event in the queue, then new events of these types are also discarded (ignored). It is about a specific instance of the program. Other, less &quot;busy&quot; programs will receive this message.</span></p>
<p class="p_Text"><span class="f_Text">We do not provide a complete list of such event types because this optimization by skipping &quot;overlapping&quot; events can be changed by the terminal developers.</span></p>
<p class="p_Text"><span class="f_Text">The approach to organizing the work of programs in response to incoming events is called event-driven. It can also be called asynchronous because the queuing of an event in the program queue and its extraction (together with processing) occur at different moments (ideally, separated by a microscopic interval, but the ideal is not always achievable). However, of the four types of MQL programs, only indicators and Expert Advisors fully follow this approach. Scripts and services have, in fact, only the main function, which, when called, must either quickly perform the required action and complete or start an endless loop to maintain some activity (for example, reading data from the network) until the user stops. We have seen examples of such loops:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">while</span><span class="f_CodeExample">(!</span><span class="f_CodeExample" style="color: #0000ff;">IsStopped</span><span class="f_CodeExample">())</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;useful&nbsp;code</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;...</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Sleep</span><span class="f_CodeExample">(...);</span>
<br><span class="f_CodeExample">}&nbsp;</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">In such loops, it is important not to forget to use </span><span class="f_Text" style="font-style: italic;">Sleep</span><span class="f_Text"> with some period to share CPU resources with other programs. The value of the period is selected based on the estimated intensity of the activity being implemented.</span></p>
<p class="p_Text"><span class="f_Text">This approach can be referred to as cyclic or synchronous, or even as real-time, since you can select the sleep period to provide a constant frequency of data handling, for example:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">rhythm</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">100</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;100&nbsp;ms,&nbsp;10&nbsp;times&nbsp;per&nbsp;sec</span>
<br><span class="f_CodeExample" style="color: #0000ff;">while</span><span class="f_CodeExample">(!</span><span class="f_CodeExample" style="color: #0000ff;">IsStopped</span><span class="f_CodeExample">())</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">const</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">&nbsp;=&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #0000ff;">GetTickCount</span><span class="f_CodeExample">();</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;useful&nbsp;code</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;...</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Sleep</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">rhythm</span><span class="f_CodeExample">&nbsp;-&nbsp;((</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #0000ff;">GetTickCount</span><span class="f_CodeExample">()&nbsp;-&nbsp;</span><span class="f_CodeExample" style="color: #333333;">start</span><span class="f_CodeExample">));</span>
<br><span class="f_CodeExample">}&nbsp;</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Of course, the &quot;useful code&quot; must fit in the allotted frame.</span></p>
<p class="p_Text"><span class="f_Text">In contrast, with the event approach, it is not known in advance when the next time the piece of code (handler) will work. For example, in a fast market, during the news, ticks can come in batches, and at night they can be absent for whole seconds. In the limiting case, after the final tick on Friday evening, the next price change for some financial instrument can be broadcast only on Monday morning, and therefore the events </span><span class="f_Text" style="font-style: italic;">OnTick</span><span class="f_Text"> will be absent for two days. In other words, in events (and moments of activation of event handlers) there is no regularity, no clear schedule.</span></p>
<p class="p_Text"><span class="f_Text">But if necessary, you can combine both trips. In particular, the timer event (</span><span class="f_Text" style="font-style: italic;"><a href="5_6_2_timer_ontimer.htm" class="topiclink">OnTimer</a></span><span class="f_Text">) provides regularity, and the developer can periodically generate <a href="5_9_7_events_custom.htm" class="topiclink">custom events</a> for a chart inside a loop (for example, flashing a warning label).</span></p>

</div>

</body>
</html>
