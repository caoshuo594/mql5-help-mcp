<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>4.5.11 Getting file properties</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part4.htm"> Part 4. Common APIs </a> / <a class="h_m" href="4_5_files.htm"> 4.5 Working with files </a>/ 4.5.11 Getting file properties
          </td>
          <td width="70" align="right">
          <a href="4_5_10_files_cursor.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="4_5_12_files_flush.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">4.5.11 Getting file properties</span></p>
<p class="p_Text"><span class="f_Text">In the process of working with files, in addition to directly writing and reading data, it often becomes necessary to analyze their properties. One of the main properties, the file size, can be obtained using the </span><span class="f_Text" style="font-style: italic;">FileSize</span><span class="f_Text"> function. But there are a few more characteristics which can be requested using </span><span class="f_Text" style="font-style: italic;">FileGetInteger</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">Please note that the </span><span class="f_Text" style="font-style: italic;">FileSize</span><span class="f_Text"> function requires an open file handle. </span><span class="f_Text" style="font-style: italic;">FileGetInteger</span><span class="f_Text"> has some properties, including the size, that can be recognized by the file name, and you do not need to open it first.</span></p>
<p class="p_H4"><span class="f_H4">ulong FileSize(int handle)</span></p>
<p class="p_Text"><span class="f_Text">The function returns the size of an open file by its descriptor. In case of an error, the result is equal to 0, which is a valid size for the normal execution of the function, so you should always analyze potential errors using </span><span class="f_Text" style="font-style: italic;">_LastError</span><span class="f_Text"> (or </span><span class="f_Text" style="font-style: italic;"><a href="4_9_15_env_last_error.htm" class="topiclink">GetLastError</a></span><span class="f_Text">).</span></p>
<p class="p_Text"><span class="f_Text">The file size can also be obtained by moving the pointer to the end of the file </span><span class="f_Text" style="font-style: italic;">FileSeek(handle, 0, SEEK_END)</span><span class="f_Text"> and calling </span><span class="f_Text" style="font-style: italic;">FileTell(handle)</span><span class="f_Text">. These two functions are described in the previous section.</span></p>
<p class="p_H4"><span class="f_H4" style="letter-spacing: -1px;">long FileGetInteger(int handle, ENUM_FILE_PROPERTY_INTEGER property)</span></p>
<p class="p_H4" style="margin: 0 23px 1px 17px;"><span class="f_H4" style="letter-spacing: -1px;">long FileGetInteger(const string filename, ENUM_FILE_PROPERTY_INTEGER property, bool common = false)</span></p>
<p class="p_Text"><span class="f_Text">The function has two options: to work through an open file descriptor, and by the file name (including a closed one).</span></p>
<p class="p_Text"><span class="f_Text">The function returns one of the file properties specified in the </span><span class="f_Text" style="font-style: italic;">property</span><span class="f_Text"> parameter. The list of valid properties is different for each of the options (see below). Even though the value type is </span><span class="f_Text" style="font-style: italic;">long</span><span class="f_Text">, depending on the requested property, it can contain not only an integer number but also </span><span class="f_Text" style="font-style: italic;">datetime</span><span class="f_Text"> or </span><span class="f_Text" style="font-style: italic;">bool</span><span class="f_Text">: perform the required typecast explicitly.</span></p>
<p class="p_Text"><span class="f_Text">When requesting a property by the file name, you can additionally use the </span><span class="f_Text" style="font-style: italic;">common</span><span class="f_Text"> parameter to specify in which folder the file should be searched: the current terminal folder </span><span class="f_Text" style="font-style: italic;">MQL5/Files</span><span class="f_Text"> (</span><span class="f_Text" style="font-style: italic;">false</span><span class="f_Text">, default) or the common folder </span><span class="f_Text" style="font-style: italic;">Users/&lt;user_name&gt;...MetaQuotes/Terminal/Common/Files</span><span class="f_Text"> (</span><span class="f_Text" style="font-style: italic;">true</span><span class="f_Text">). If the MQL program is running in the tester, the working directory is located inside the test agent folder (</span><span class="f_Text" style="font-style: italic;">Tester/&lt;agent&gt;/MQL5/Files</span><span class="f_Text">), see the introduction of the chapter <a href="4_5_files.htm" class="topiclink">Working with files</a>.</span></p>
<p class="p_Text"><span class="f_Text">The following table lists all the members of ENUM_FILE_PROPERTY_INTEGER.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table" style="width:30%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Property</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_EXISTS </span><span class="f_fortable" style="font-size: 7pt; vertical-align: super;">*</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Check for existence (similar to FileIsExist)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_CREATE_DATE </span><span class="f_fortable" style="font-size: 7pt; vertical-align: super;">*</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Creation date</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_MODIFY_DATE </span><span class="f_fortable" style="font-size: 7pt; vertical-align: super;">*</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Last modified date</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_ACCESS_DATE </span><span class="f_fortable" style="font-size: 7pt; vertical-align: super;">*</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Last access date</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_SIZE </span><span class="f_fortable" style="font-size: 7pt; vertical-align: super;">*</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File size in bytes (similar to FileSize)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_POSITION</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Pointer position in the file (similar to FileTell)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_END</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Position at the end of the file (similar to FileIsEnding)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_LINE_END</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Position at the end of a string (similar to FileIsLineEnding)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_IS_COMMON</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File opened in terminals shared folder (FILE_COMMON)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_IS_TEXT</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File opened as text (FILE_TXT)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_IS_BINARY</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File opened as binary (FILE_BIN)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_IS_CSV</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File opened as CSV (FILE_CSV)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_IS_ANSI</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File opened as ANSI (FILE_ANSI)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_IS_READABLE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File opened for reading (FILE_READ)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:30%;"><p class="p_fortable"><span class="f_fortable">FILE_IS_WRITABLE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">File opened for writing (FILE_WRITE)</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">Properties allowed for use by filename are marked with an asterisk. If you try to get other properties, the second version of the function will return an error 4003 (INVALID_PARAMETER).</span></p>
<p class="p_Text"><span class="f_Text">Some properties can change while working with an open file: FILE_MODIFY_DATE, FILE_ACCESS_DATE, FILE_SIZE, FILE_POSITION, FILE_END, FILE_LINE_END (for text files only).</span></p>
<p class="p_Text"><span class="f_Text">In case of an error, the result of the call is -1.</span></p>
<p class="p_Text"><span class="f_Text">The second version of the function allows you to check if the specified name is the name of a file or directory. If a directory is specified when getting properties by name, the function will set a special internal error code 5018 (ERR_MQL_FILE_IS_DIRECTORY), while the returned value will be correct.</span></p>
<p class="p_Text"><span class="f_Text">We will test the functions of this section using the script </span><span class="f_Text" style="font-style: italic;">FileProperties.mq5</span><span class="f_Text">. It will work on a file with a predefined name.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">const</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">fileprop</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;MQL5Book/fileprop&quot;</span><span class="f_CodeExample">;</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">At the beginning of </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text">, let's try to request the size by a wrong descriptor (it was not received through the </span><span class="f_Text" style="font-style: italic;">File Open</span><span class="f_Text"> call). After </span><span class="f_Text" style="font-style: italic;">FileSize</span><span class="f_Text">, the </span><span class="f_Text" style="font-style: italic;">_LastError</span><span class="f_Text"> variable check is required, and </span><span class="f_Text" style="font-style: italic;">FileGetInteger</span><span class="f_Text"> immediately returns a special value, an error indicator (-1).</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">ulong</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">size</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">FileSize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">if</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #800080;">_LastError</span><span class="f_CodeExample">)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;FileSize&nbsp;error=&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">E2S</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #800080;">_LastError</span><span class="f_CodeExample">)&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;(&quot;</span><span class="f_CodeExample">&nbsp;+&nbsp;(</span><span class="f_CodeExample" style="color: #0000ff;">string</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #800080;">_LastError</span><span class="f_CodeExample">&nbsp;+&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;)&quot;</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;We&nbsp;will&nbsp;get:&nbsp;FileSize&nbsp;0,&nbsp;error=WRONG_FILEHANDLE(5008)</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;}</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_SIZE</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;-1&nbsp;/&nbsp;WRONG_FILEHANDLE(5008)</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Next, we create a new file or open an existing file and reset it, and then write the test text.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileOpen</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">fileprop</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_TXT</span><span class="f_CodeExample">&nbsp;|&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_WRITE</span><span class="f_CodeExample">&nbsp;|&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_ANSI</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;1</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileWriteString</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #008080;">&quot;Test&nbsp;Text\n&quot;</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;11</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">We selectively request some of the properties.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">fileprop</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_SIZE</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0,&nbsp;not&nbsp;written&nbsp;to&nbsp;the&nbsp;disk&nbsp;yet</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_SIZE</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;11</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileSize</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;11</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_MODIFY_DATE</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//</span><span class="f_CodeExample" style="font-weight: bold; color: #808080;">1629730884</span><span class="f_CodeExample" style="color: #808080;">,&nbsp;number&nbsp;of&nbsp;seconds&nbsp;since&nbsp;1970</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_IS_TEXT</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;1,&nbsp;bool&nbsp;true</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_IS_BINARY</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0,&nbsp;bool&nbsp;false</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Information about the length of the file by its descriptor takes into account the current caching buffer, and by the file name, the actual length will become available only after the file is closed, or if you call the </span><span class="f_Text" style="font-style: italic;">FileFlush</span><span class="f_Text"> function (see section <a href="4_5_12_files_flush.htm" class="topiclink">Force write cache to disk</a>).</span></p>
<p class="p_Text"><span class="f_Text">The function returns dates and times as the number of seconds of the standard epoch since January 1, 1970, which corresponds to the </span><span class="f_Text" style="font-style: italic;">datetime</span><span class="f_Text"> type and can be brought to it.</span></p>
<p class="p_Text"><span class="f_Text">The request for file open flags (its mode) is successful for the function version with a descriptor, in particular, we received a response that the file is text and not binary. However, the next similar request for a filename will fail because the property is only supported when a valid handle is passed. This happens even though the name points to the same file that we have opened.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">fileprop</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_IS_TEXT</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;-1&nbsp;/&nbsp;INVALID_PARAMETER(4003)</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Let's wait for one second, close the file, and check the modification date again (this time by name, since the descriptor is no longer valid).</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Sleep</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">1000</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">FileClose</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">handle</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">fileprop</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_MODIFY_DATE</span><span class="f_CodeExample">));&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;</span><span class="f_CodeExample" style="font-weight: bold; color: #808080;">1629730885</span><span class="f_CodeExample" style="color: #808080;">&nbsp;/&nbsp;ok</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Here you can clearly see that the time has increased by 1.</span></p>
<p class="p_Text"><span class="f_Text">Finally, make sure that properties are available for directories (folders).</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">PRTF</span><span class="f_CodeExample">((</span><span class="f_CodeExample" style="color: #0000ff;">datetime</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #0000ff;">FileGetInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #008080;">&quot;MQL5Book&quot;</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">FILE_CREATE_DATE</span><span class="f_CodeExample">));</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;We&nbsp;will&nbsp;get:&nbsp;2021.08.09&nbsp;22:38:00&nbsp;/&nbsp;FILE_IS_DIRECTORY(5018)</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Since all examples of the book are located in the &quot;MQL5Book&quot; folder, it must already exist. However, your actual creation time will be different. The FILE_IS_DIRECTORY error code in this case is displayed for us by the PRTF macro. In the working program, the function call should be made without a macro, and then the code should be read in </span><span class="f_Text" style="font-style: italic;">_LastError</span><span class="f_Text">.</span></p>

</div>

</body>
</html>
