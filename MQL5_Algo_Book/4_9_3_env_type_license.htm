<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>4.9.3 Program type and license</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part4.htm"> Part 4. Common APIs </a> / <a class="h_m" href="4_9_environment.htm"> 4.9 MQL program execution environment </a>/ 4.9.3 Program type and license
          </td>
          <td width="70" align="right">
          <a href="4_9_2_env_build.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="4_9_4_env_mode.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">4.9.3 Program type and license</span></p>
<p class="p_Text"><span class="f_Text">The same source code can somehow be included in MQL programs of different types. In addition to the option of <a href="2_9_1_preprocessor_include.htm" class="topiclink">including source codes</a> (preprocessor directive </span><span class="f_Text" style="font-style: italic;">#include</span><span class="f_Text">) into a common product at the compilation stage, it is also possible to assemble the <a href="7_7_libraries.htm" class="topiclink">libraries</a> – binary program modules connected to the main program at the execution stage.</span></p>
<p class="p_Text"><span class="f_Text">However, some functions are only allowed to be used in certain types of programs. For example, the </span><span class="f_Text" style="font-style: italic;"><a href="6_4_7_experts_ordercalcmargin.htm" class="topiclink">OrderCalcMargin</a></span><span class="f_Text"> function cannot be used in <a href="5_4_indicators_make.htm" class="topiclink">indicators</a>. Although this limitation does not seem to be fundamentally justified, the developer of a universal algorithm for calculating collateral funds, which can be built into not only Expert Advisors but also indicators, should take this nuance into account and provide an alternative calculation method for indicators.</span></p>
<p class="p_Text"><span class="f_Text">A complete list of restrictions on program types will be given in a suitable section of each chapter. In all such cases, it is important to know the type of the &quot;parent&quot; program.</span></p>
<p class="p_Text"><span class="f_Text">To determine the program type, there is the MQL_PROGRAM_TYPE property in ENUM_MQL_INFO_INTEGER. Possible property values are described in the ENUM_PROGRAM_TYPE enumeration.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table" style="width:20%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Value</span></p>
</th>
<th class="table" style="width:50%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">PROGRAM_SCRIPT</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">1</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Script</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">PROGRAM_EXPERT</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">2</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Expert Advisor</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">PROGRAM_INDICATOR</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">4</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Indicator</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">PROGRAM_SERVICE</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">5</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Service</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">In the log snippet in the previous section, we saw that the PROGRAM_SCRIPT property is set to 1 because our test is a script. To get a string description, you can use the function </span><span class="f_Text" style="font-style: italic;">EnumToString</span><span class="f_Text">.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #ff0000;">ENUM_PROGRAM_TYPE</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">type</span><span class="f_CodeExample">&nbsp;=&nbsp;(</span><span class="f_CodeExample" style="color: #ff0000;">ENUM_PROGRAM_TYPE</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #0000ff;">MQLInfoInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff0000;">MQL_PROGRAM_TYPE</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">EnumToString</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">type</span><span class="f_CodeExample">));</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Another property of an MQL program that is convenient to analyze for enabling/disabling certain features is the type of license. As you know, MQL programs can be distributed freely or within the MQL5 Market. Moreover, the program in the store can be purchased or downloaded as a demo version. These factors are easy to check and, if desired, adapt the algorithms for them. For these purposes, there is the MQL_LICENSE_TYPE property in ENUM_MQL_INFO_INTEGER, which uses the ENUM_LICENSE_TYPE enumeration as a type.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table" style="width:20%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Value</span></p>
</th>
<th class="table" style="width:50%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">LICENSE_FREE</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">0</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Free unlimited version</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">LICENSE_DEMO</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">1</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Demo version of a paid product from the Market that works only in the strategy tester</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">LICENSE_FULL</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">2</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Purchased licensed version, allows at least 5 activations (can be increased by the seller)</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">LICENSE_TIME</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">3</span></p>
</td>
<td class="table" style="width:50%;"><p class="p_fortable"><span class="f_fortable">Time-limited version (not implemented yet)</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">It is important to note here that the license refers to the binary ex5 module from which the request is made using </span><span class="f_Text" style="font-style: italic;">MQLInfoInteger(MQL_LICENSE_TYPE)</span><span class="f_Text">. Within a library, this function will return the library's own license, not the main program that the library is linked to.</span></p>
<p class="p_Text"><span class="f_Text">As an example to test both functions of this section, a simple service </span><span class="f_Text" style="font-style: italic;">EnvType.mq5</span><span class="f_Text"> is included with the book. It does not contain a work cycle and therefore will terminate immediately after executing the two instructions in </span><span class="f_Text" style="font-style: italic;">OnStart</span><span class="f_Text">.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">service</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">EnumToString</span><span class="f_CodeExample">((</span><span class="f_CodeExample" style="color: #ff0000;">ENUM_PROGRAM_TYPE</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #0000ff;">MQLInfoInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff0000;">MQL_PROGRAM_TYPE</span><span class="f_CodeExample">)));</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">Print</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #0000ff;">EnumToString</span><span class="f_CodeExample">((</span><span class="f_CodeExample" style="color: #ff0000;">ENUM_LICENSE_TYPE</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #0000ff;">MQLInfoInteger</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #ff0000;">MQL_LICENSE_TYPE</span><span class="f_CodeExample">)));</span>
<br><span class="f_CodeExample">}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">To simplify its launch, i.e., to eliminate the need to create an instance of the service and run it through the context menu of the Navigator in the terminal, it is proposed to use the debugger: just open the source code in MetaEditor and execute the command </span><span class="f_Text" style="font-style: italic;">Debugging -&gt; Start on real data</span><span class="f_Text"> (F5, or button in the toolbar).</span></p>
<p class="p_Text"><span class="f_Text">We should get the following log entries:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">EnvType&nbsp;(debug) &nbsp; &nbsp; &nbsp; &nbsp;PROGRAM_SERVICE</span>
<br><span class="f_CodeExample">EnvType&nbsp;(debug) &nbsp; &nbsp; &nbsp; &nbsp;LICENSE_FREE</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Here you can clearly see that the type of program is a service, and there is actually no license (free use).</span></p>

</div>

</body>
</html>
