<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>4.6 Global Variables of Client Terminal</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part4.htm"> Part 4. Common APIs </a>/ 4.6 Client terminal global variables
          </td>
          <td width="70" align="right">
          <a href="4_5_17_files_select.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="4_6_1_globals_set_get.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H2"><span class="f_H2">4.6 Client terminal global variables</span></p>
<p class="p_Text"><span class="f_Text">In the previous chapter, we studied MQL5 functions that work with files. They provide wide, flexible options for writing and reading arbitrary data. However, sometimes an MQL program needs an easier way to save and restore the state of an attribute between runs.</span></p>
<p class="p_Text"><span class="f_Text">For example, we want to calculate certain statistics: how many times the program was launched, how many instances of it are executed in parallel on different charts, etc. It is impossible to accumulate this information within the program itself. There must be some kind of external long-term storage. But it would be expensive to create a file for this, though it is also feasible.</span></p>
<p class="p_Text"><span class="f_Text">Many programs are designed to interact with each other, i.e., they must somehow exchange information. If we are talking about integration with a program external to the terminal, or about transferring a large amount of data, then it is really difficult to do it without using files. However, when there is not enough data to be sent, and all programs are written in MQL5 and run inside MetaTrader 5, the use of files seems redundant. The terminal provides a simpler technology for this case: global variables.</span></p>
<p class="p_Text"><span class="f_Text">A global variable is a named location in the terminal's shared memory. It can be created, modified, or deleted by any MQL program, but will not belong to it exclusively, and is available to all other MQL programs. The name of a global variable is any unique (among all variables) string of no more than 63 characters. This string does not have to meet the requirements for variable identifiers in MQL5, since global variables of the terminal are not variables in the usual sense. The programmer does not define them in the source code according to the syntax we learned in <a href="2_3_variables.htm" class="topiclink">Variables</a>, they are not an integral part of the MQL program, and any action with them is performed only by calling one of the special functions that we will describe in this chapter.</span></p>
<p class="p_Text"><span class="f_Text">The global variables allow you to store only values of type </span><span class="f_Text" style="font-style: italic;">double</span><span class="f_Text">. If necessary, you can pack/convert values of other types to </span><span class="f_Text" style="font-style: italic;">double</span><span class="f_Text"> or use part of the variable name (following a certain prefix, for example) to store strings.</span></p>
<p class="p_Text"><span class="f_Text">While the terminal is running, global variables are stored in RAM and are available almost instantly: the only overhead is associated with function calls. This definitely gives a headstart to global variables against using files, since when dealing with the latter, obtaining a handle is a relatively slow process, and the handle itself consumes some additional resources.</span></p>
<p class="p_Text"><span class="f_Text">At the end of the terminal session, global variables are unloaded into a special file (</span><span class="f_Text" style="font-style: italic;">gvariables.dat</span><span class="f_Text">) and then restored from it the next time you run the terminal.</span></p>
<p class="p_Text"><span class="f_Text">A particular global variable is automatically destroyed by the terminal if it has not been claimed within 4 weeks. This behavior relies on keeping track of and storing the time of the last use of a variable, where use refers to setting a new value or reading an old one (but not checking for existence or getting the time of last use).</span></p>
<p class="p_Quote"><span class="f_Quote">Please note that global variables are not tied to an account, profile, or any other characteristics of the trading environment. Therefore, if they are supposed to store something related to the environment (for example, some general limits for a particular account), variable names should be constructed taking into account all factors that affect the algorithm and decision-making. To distinguish between global variables of multiple instances of the same Experts Advisor (EA), you may need to add a working symbol, timeframe, or &quot;magic number&quot; from the EA settings to the name.</span></p>
<p class="p_Text"><span class="f_Text">In addition to MQL programs, global variables can also be manually created by the user. The list of existing global variables, as well as the means of their interactive management, can be found in the dialog opened in the terminal by the command </span><span class="f_Text" style="font-style: italic;">Tools -&gt; Global Variables</span><span class="f_Text"> (F3).</span></p>
<p class="p_Text"><span class="f_Text">By using the corresponding buttons here you can </span><span class="f_Text" style="font-style: italic;">Add</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">Delete</span><span class="f_Text"> global variables, and double-clicking in columns </span><span class="f_Text" style="font-style: italic;">Variable</span><span class="f_Text"> or </span><span class="f_Text" style="font-style: italic;">Meaning</span><span class="f_Text"> allows you to edit the name or value of a particular variable. The following hotkeys work from the keyboard: F2 for name editing, F3 for value editing, Ins for adding a new variable, Del for deleting the selected variable.</span></p>
<p class="p_Text"><span class="f_Text">A little later, we will study two main types of MQL programs – Expert Advisors and Indicators. Their special feature is the ability to run in the tester, where functions for global variables also work. However, global variables are created, stored, and managed by the tester agent in the tester. In other words, the lists of terminal global variables are not available in the tester, and those variables that are created by the program under test belong to a specific agent, and their lifetime is limited to one test pass. That is, the agent's global variables are not visible from other agents and will be removed at the end of the test run. In particular, if the EA is <a href="6_5_tester.htm" class="topiclink">optimized</a> on several agents, it can manipulate global variables to &quot;communicate&quot; with the indicators it uses in the context of the same agent since they are executed there together, but on parallel agents, other copies of the EA will form their own lists of variables.</span></p>
<p class="p_Quote"><span class="f_Quote">Data exchange between MQL programs using global variables is not the only available, and not always the most appropriate way. In particular, EAs and indicators are interactive types of MQL programs that can generate and accept <a href="5_9_events.htm" class="topiclink">events on charts</a>. You can pass various types of information in event parameters. In addition, arrays of calculated data can be prepared and provided to other MQL programs in the form of <a href="5_4_5_indicators_setindexbuffer.htm" class="topiclink">indicator buffers</a>. MQL programs located on charts can use UI <a href="5_8_objects.htm" class="topiclink">graphic objects</a> to transfer and store information.</span></p>
<p class="p_Text"><span class="f_Text">From the technical point of view, the maximum number of global variables is limited only by the resources of the operating system. However, for a large number of elements, it is recommended to use more suitable means: <a href="4_5_files.htm" class="topiclink">files</a> or <a href="7_6_sqlite.htm" class="topiclink">databases</a>.</span></p>

</div>

</body>
</html>
