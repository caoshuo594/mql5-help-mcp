<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>2.5.7 Bitwise operations</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part2.htm"> Part 2. Programming fundamentals </a> / <a class="h_m" href="2_5_expressions.htm"> 2.5 Expressions </a>/ 2.5.7 Bitwise operations
          </td>
          <td width="70" align="right">
          <a href="2_5_6_operators_logical.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="2_5_8_operators_compound.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">2.5.7 Bitwise operations</span></p>
<p class="p_Text"><span class="f_Text">Sometimes you may need to process numbers at the bit level. For this purpose, there is a group of bitwise operations applicable to integer types.</span></p>
<p class="p_Text"><span class="f_Text">All symbols and descriptions of bitwise operators are provided with their associativity and in order of their priority in the table below.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table" style="vertical-align:middle; width:50px;"><p class="p_BoldTitlesInTables" style="text-align: right;"><span class="f_BoldTitlesInTables">P</span></p>
</th>
<th class="table" style="width:100px;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Symbols</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables" style="text-align: left;"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
<th class="table" style="vertical-align:middle; width:150px;"><p class="p_BoldTitlesInTables" style="text-align: center;"><span class="f_BoldTitlesInTables">Example</span></p>
</th>
<th class="table" style="width:50px;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">A</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table" style="vertical-align:middle; width:50px;"><p class="p_fortable" style="text-align: right;"><span class="f_fortable">2</span></p>
</td>
<td class="table" style="width:100px;"><p class="p_fortable"><span class="f_fortable">~</span></p>
</td>
<td class="table"><p class="p_fortable" style="text-align: left;"><span class="f_fortable">Bitwise complement (inversion)</span></p>
</td>
<td class="table" style="vertical-align:middle; width:150px;"><p class="p_fortable" style="text-align: center;"><span class="f_fortable">~e1</span></p>
</td>
<td class="table" style="width:50px;"><p class="p_fortable"><span class="f_fortable">R</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="vertical-align:middle; width:50px;"><p class="p_fortable" style="text-align: right;"><span class="f_fortable">5</span></p>
</td>
<td class="table" style="width:100px;"><p class="p_fortable"><span class="f_fortable">&lt;&lt;</span></p>
</td>
<td class="table"><p class="p_fortable" style="text-align: left;"><span class="f_fortable">Shift to the left</span></p>
</td>
<td class="table" style="vertical-align:middle; width:150px;"><p class="p_fortable" style="text-align: center;"><span class="f_fortable">e1 &lt;&lt; e2</span></p>
</td>
<td class="table" style="width:50px;"><p class="p_fortable"><span class="f_fortable">L</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="vertical-align:middle; width:50px;"><p class="p_fortable" style="text-align: right;"><span class="f_fortable">5</span></p>
</td>
<td class="table" style="width:100px;"><p class="p_fortable"><span class="f_fortable">&gt;&gt;</span></p>
</td>
<td class="table"><p class="p_fortable" style="text-align: left;"><span class="f_fortable">Shift to the right</span></p>
</td>
<td class="table" style="vertical-align:middle; width:150px;"><p class="p_fortable" style="text-align: center;"><span class="f_fortable">e1 &gt;&gt; e2</span></p>
</td>
<td class="table" style="width:50px;"><p class="p_fortable"><span class="f_fortable">L</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="vertical-align:middle; width:50px;"><p class="p_fortable" style="text-align: right;"><span class="f_fortable">8</span></p>
</td>
<td class="table" style="width:100px;"><p class="p_fortable"><span class="f_fortable">&amp;</span></p>
</td>
<td class="table"><p class="p_fortable" style="text-align: left;"><span class="f_fortable">Bitwise AND</span></p>
</td>
<td class="table" style="vertical-align:middle; width:150px;"><p class="p_fortable" style="text-align: center;"><span class="f_fortable">e1 &amp; e2</span></p>
</td>
<td class="table" style="width:50px;"><p class="p_fortable"><span class="f_fortable">L</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="vertical-align:middle; width:50px;"><p class="p_fortable" style="text-align: right;"><span class="f_fortable">9</span></p>
</td>
<td class="table" style="width:100px;"><p class="p_fortable"><span class="f_fortable">^</span></p>
</td>
<td class="table"><p class="p_fortable" style="text-align: left;"><span class="f_fortable">Bitwise exclusive OR</span></p>
</td>
<td class="table" style="vertical-align:middle; width:150px;"><p class="p_fortable" style="text-align: center;"><span class="f_fortable">e1 ^ e2</span></p>
</td>
<td class="table" style="width:50px;"><p class="p_fortable"><span class="f_fortable">L</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="vertical-align:middle; width:50px;"><p class="p_fortable" style="text-align: right;"><span class="f_fortable">10</span></p>
</td>
<td class="table" style="width:100px;"><p class="p_fortable"><span class="f_fortable">|</span></p>
</td>
<td class="table"><p class="p_fortable" style="text-align: left;"><span class="f_fortable">Bitwise OR</span></p>
</td>
<td class="table" style="vertical-align:middle; width:150px;"><p class="p_fortable" style="text-align: center;"><span class="f_fortable">e1 | e2</span></p>
</td>
<td class="table" style="width:50px;"><p class="p_fortable"><span class="f_fortable">L</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">Of the entire group, only the bitwise complement operation '~' is unary, while all others are binary.</span></p>
<p class="p_Text"><span class="f_Text">In all cases, if the operand size is less than </span><span class="f_Text" style="font-style: italic;">int/uint</span><span class="f_Text">, it is preliminarily extended to </span><span class="f_Text" style="font-style: italic;">int</span><span class="f_Text">/</span><span class="f_Text" style="font-style: italic;">uint</span><span class="f_Text"> by adding 0 bits into higher order. Based on the operand type being signed/unsigned, a high-order bit may affect the sign.</span></p>
<p class="p_Text"><span class="f_Text">Standard Windows application, Calculator, may help understand the representation of numbers at the bit level. If you select the Programmer operation mode in the View menu, the groups of toggle buttons will appear in the program to select representing the number in a hexadecimal (Hex), decimal (Dec), octal (Oct), or binary (Bin) form. It is the latter one that shows bits. Moreover, you can select the number size: 1, 2, 4, and 8 bytes. The buttons allow executing all the operations considered: Not ('~'), And ('&amp;'), Or ('|'), Xor ('^'), Lsh ('&lt;&lt;'), and Rsh ('&gt;&gt;').</span><br>
<span class="f_Text">&nbsp;</span><br>
<span class="f_Text">Since the Calculator uses signed numbers, negative values may appear when toggling to the decimal mode (remember that the high-order bit is interpreted as a sign). For convenient analysis, it is reasonable to exclude the minus that appears, for which purpose it is necessary to select the size in bytes one grade higher. For example, to check the values within the range up to 255 (uchar, unsigned one-byte integer), you should select 2 bytes (otherwise, only decimal values through 127 will be positive, while the others will be displayed in the negative region).</span></p>
<p class="p_Text"><span class="f_Text">Bitwise complement creates a value, in which the 0-bit is in the place of all 1-bits, while 1-bit is in the place of 0-bits. For example, the negation of a byte with all zero bits gives a byte with all 1 bits. Number 50 appears in the bitwise format as '00110010' (byte). Its inversion gives '11001101'.</span></p>
<p class="p_Text"><span class="f_Text">Unity represented hexadecimally is 0x0001 (for </span><span class="f_Text" style="font-style: italic;">short</span><span class="f_Text">). Inversion of these bits gives 0xFFFE (see script </span><span class="f_Text" style="font-style: italic;">ExprBitwise.mq5</span><span class="f_Text">).</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">short</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">v</span><span class="f_CodeExample">&nbsp;=&nbsp;~</span><span class="f_CodeExample" style="color: #333333;">1</span><span class="f_CodeExample">;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0xfffe&nbsp;=&nbsp;-2</span>
<br><span class="f_CodeExample" style="color: #0000ff;">ushort</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">w</span><span class="f_CodeExample">&nbsp;=&nbsp;~</span><span class="f_CodeExample" style="color: #333333;">1</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0xfffe&nbsp;=&nbsp;65534</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Bitwise AND checks each bit in both operands and in the positions where two set bits (1) are found, stores the 1-bit into the result. In all other cases (where there is only a set bit in one operand or they are reset in both places), the 0-bit is written in the result.</span></p>
<p class="p_Text"><span class="f_Text">Bitwise OR writes 1-bits into the result if they are on the positions where there is a set bit in at least one of two operands.</span></p>
<p class="p_Text"><span class="f_Text">Bitwise exclusive OR writes in the result the 1-bits on the positions where there is a set bit in either the first or second operand, but not in both at the same time. The binary representation of two numbers, X and Y, and the results of bitwise operations with them are shown below.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10011010&nbsp;&nbsp;&nbsp;154</span>
<br><span class="f_CodeExample">Y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00110111&nbsp;&nbsp;&nbsp;&nbsp;55</span>
<br><span class="f_CodeExample">&nbsp;</span>
<br><span class="f_CodeExample">X&nbsp;&amp;&nbsp;Y&nbsp;&nbsp;&nbsp;00010010&nbsp;&nbsp;&nbsp;&nbsp;18</span>
<br><span class="f_CodeExample">X&nbsp;|&nbsp;Y&nbsp;&nbsp;&nbsp;10111111&nbsp;&nbsp;&nbsp;191</span>
<br><span class="f_CodeExample">X&nbsp;^&nbsp;Y&nbsp;&nbsp;&nbsp;10101101&nbsp;&nbsp;&nbsp;173</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">When writing complex expressions from several different operators, use grouping with parentheses in order not to become confused with priorities.</span></p>
<p class="p_Text"><span class="f_Text">Shift operations move bits to the left ('&lt;&lt;') or right ('&gt;&gt;') by the quantity of bits, defined in the second operand that must be a non-negative integer. As a result, left (for '&lt;&lt;') or right (for '&gt;&gt;') bits are dropped, since they go beyond the memory cell boundaries. With the left shift, the relevant number of 0 bits are added on the right. With the right shift, either 0 bits are added on the left (if the operand is unsigned) or the sign bit is reproduced (if the operand is signed). In the latter case, 0 bits are added on the left for positive numbers and 1 bits for negative ones; i.e., the sign retains.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">short</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">q</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">v</span><span class="f_CodeExample">&nbsp;&lt;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">5</span><span class="f_CodeExample">;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0xffc0&nbsp;=&nbsp;-64</span>
<br><span class="f_CodeExample" style="color: #0000ff;">ushort</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">p</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">w</span><span class="f_CodeExample">&nbsp;&lt;&lt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">5</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0xffc0&nbsp;=&nbsp;65472</span>
<br><span class="f_CodeExample" style="color: #0000ff;">short</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">r</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">q</span><span class="f_CodeExample">&nbsp;&gt;&gt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">5</span><span class="f_CodeExample">;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0xfffe&nbsp;=&nbsp;-2</span>
<br><span class="f_CodeExample" style="color: #0000ff;">ushort</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">s</span><span class="f_CodeExample">&nbsp;=&nbsp;</span><span class="f_CodeExample" style="color: #333333;">p</span><span class="f_CodeExample">&nbsp;&gt;&gt;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">5</span><span class="f_CodeExample">;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;0x07fe&nbsp;=&nbsp;2046</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">In the example above, the initial left shift &quot;destroyed&quot; the high-order bits of variable </span><span class="f_Text" style="font-style: italic;">p</span><span class="f_Text">, while the subsequent right shift by the same quantity of bits filled them with zeros, which led to decreasing the value from 0xffc0 to 0x07fe.</span></p>
<p class="p_Text"><span class="f_Text">Shift size (quantity of bits) must be less than that of the operand type (considering its potential extension). Otherwise, all initial bits will get lost.</span></p>
<p class="p_Text"><span class="f_Text">Shifting by 0 bits leaves the number unchanged.</span></p>
<p class="p_Text"><span class="f_Text">Bitwise operations '&amp;' and '|' should not be mixed with logical operations '&amp;&amp;' and '||' (considered in the <a href="2_5_6_operators_logical.htm" class="topiclink">preceding section</a>).</span></p>

</div>

</body>
</html>
