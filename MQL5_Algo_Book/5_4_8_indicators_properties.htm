<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>5.4. Applying directives to customize graphic plots</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part5.htm"> Part 5. Creating application programs </a> / <a class="h_m" href="5_4_indicators_make.htm"> 5.4 Creating custom indicators </a>/ 5.4.8 Applying directives to customize plots
          </td>
          <td width="70" align="right">
          <a href="5_4_7_indicators_buffer_to_plot_mapping.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="5_4_9_indicators_labels.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">5.4.8 Applying directives to customize plots</span></p>
<p class="p_Text"><span class="f_Text">So far, we have been customizing graphic plots using </span><span class="f_Text" style="font-style: italic;">PlotIndexSetInteger</span><span class="f_Text"> function calls. MQL5 allows you to do the same using </span><span class="f_Text" style="font-style: italic;">#property</span><span class="f_Text"> preprocessor directives. The main difference between these two methods is that the directives are processed at compile time and the properties described with them are read from the executable file during loading, even before the handler </span><span class="f_Text" style="font-style: italic;">OnInit</span><span class="f_Text"> is executed (if it exists). That is, the directives provide some default values which may be used as is if you don't need to change them.</span></p>
<p class="p_Text"><span class="f_Text">On the other hand, the </span><span class="f_Text" style="font-style: italic;">PlotIndexSetInteger</span><span class="f_Text"> function call allows you to change properties on the go, during program execution. Changing properties dynamically using functions allows you to create more flexible scenarios for using the indicator. The directives and the relevant </span><span class="f_Text" style="font-style: italic;">PlotIndexSetInteger</span><span class="f_Text"> function calls are shown in the table below.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table" style="width:25%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Directives</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Function</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table" style="width:25%;"><p class="p_fortable"><span class="f_fortable">indicator_colorN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">PlotIndexSetInteger(N-1, PLOT_LINE_COLOR, color)</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Line color for plotting</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:25%;"><p class="p_fortable"><span class="f_fortable">indicator_styleN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">PlotIndexSetInteger(N-1, PLOT_LINE_STYLE, type)</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Drawing style from the ENUM_LINE_STYLE enumeration</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:25%;"><p class="p_fortable"><span class="f_fortable">indicator_typeN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">PlotIndexSetInteger(N-1, PLOT_DRAW_TYPE, type)</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Drawing type from the ENUM_DRAW_TYPE enumeration</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:25%;"><p class="p_fortable"><span class="f_fortable">indicator_widthN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">PlotIndexSetInteger(N-1, PLOT_LINE_WIDTH, width)</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Line thickness in pixels (1 - 5)</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">Please note that the numbering of plots in directives starts from 1, while in functions it starts from 0. For example, the directive </span><span class="f_Text" style="font-style: italic;">#property indicator_type1 DRAW_ZIGZAG</span><span class="f_Text"> is equivalent to calling </span><span class="f_Text" style="font-style: italic;">PlotIndexSetInteger(0, PLOT_DRAW_TYPE, DRAW_ZIGZAG)</span><span class="f_Text">.</span></p>
<p class="p_Text"><span class="f_Text">It is also worth noting that by using the function, you can set many more properties than through directives: the <a href="5_4_6_indicators_plotindexsetinteger.htm" class="topiclink">ENUM_PLOT_PROPERTY_INTEGER</a> enumeration provides ten elements.</span></p>
<p class="p_Quote"><span class="f_Quote">The properties described by the directives are available (visible and can be edited by the user) in the indicator settings dialog even when it is placed on the chart for the first time. In particular, this includes the thickness, color, and style of the lines (tab </span><span class="f_Quote" style="font-style: italic;">Colors</span><span class="f_Quote">), the number and placement of levels (tab </span><span class="f_Quote" style="font-style: italic;">Levels</span><span class="f_Quote">). The same properties set by functions (and if they do not have default values in directives) appear in the dialog only the second and subsequent times.</span></p>
<p class="p_Text"><span class="f_Text">Let's adjust the </span><span class="f_Text" style="font-style: italic;">IndHighLowClose.mq5</span><span class="f_Text"> indicator to use directives. The new version is in the file </span><span class="f_Text" style="font-style: italic;">IndPropHighLowClose.mq5</span><span class="f_Text">. The use of directives simplifies the </span><span class="f_Text" style="font-style: italic;">OnInit</span><span class="f_Text"> handler; </span><span class="f_Text" style="font-style: italic;">OnCalculate</span><span class="f_Text"> does not change.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_chart_window</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_buffers</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">3</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_plots</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">2</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;High-Low&nbsp;histogram&nbsp;rendering&nbsp;settings&nbsp;(change&nbsp;index&nbsp;0&nbsp;to&nbsp;1&nbsp;in&nbsp;the&nbsp;directive)</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_type1</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">DRAW_HISTOGRAM2</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_style1</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">STYLE_SOLID</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;by&nbsp;default,&nbsp;can&nbsp;be&nbsp;omitted</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_color1</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">clrBlue</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_width1</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">5</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #808080;">//&nbsp;close&nbsp;line&nbsp;drawing&nbsp;settings&nbsp;(change&nbsp;index&nbsp;1&nbsp;to&nbsp;2&nbsp;in&nbsp;the&nbsp;directive)</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_type2</span><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">DRAW_LINE</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_style2</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">STYLE_SOLID</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;by&nbsp;default,&nbsp;can&nbsp;be&nbsp;omitted</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_color2</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">clrRed</span>
<br><span class="f_CodeExample" style="color: #0000ff;">#property</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">indicator_width2</span><span class="f_CodeExample">&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">2</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">highs</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">lows</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample" style="color: #0000ff;">double</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">closes</span><span class="f_CodeExample">[];</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnInit</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #808080;">//&nbsp;arrays&nbsp;for&nbsp;buffers&nbsp;for&nbsp;3&nbsp;price&nbsp;types</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">SetIndexBuffer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">0</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">highs</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">SetIndexBuffer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">1</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">lows</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">SetIndexBuffer</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">2</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #333333;">closes</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">return</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">INIT_SUCCEEDED</span><span class="f_CodeExample">;</span>
<br><span class="f_CodeExample">}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">The new indicator looks absolutely the same as the old one.</span></p>

</div>

</body>
</html>
