<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>2.9.2 Overview of macro substitution directives</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part2.htm"> Part 2. Programming fundamentals </a> / <a class="h_m" href="2_9_preprocessor.htm"> 2.9 Preprocessor </a>/ 2.9.2 Overview of macro substitution directives
          </td>
          <td width="70" align="right">
          <a href="2_9_1_preprocessor_include.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="2_9_3_preprocessor_define_simple.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">2.9.2 Overview of macro substitution directives</span></p>
<p class="p_Text"><span class="f_Text">Macro substitution directives include two forms of the #define directive:</span></p>
<ul>
<li class="p_li"><span class="f_li">simple, usually to define a constant</span></li>
<li class="p_li"><span class="f_li">defining a macro as a pseudo-function with parameters</span></li>
</ul>
<p class="p_Text"><span class="f_Text">In addition, there is a </span><span class="f_Text" style="font-style: italic;">#undef</span><span class="f_Text"> directive to undo any of the previous </span><span class="f_Text" style="font-style: italic;">#define</span><span class="f_Text"> definitions. If </span><span class="f_Text" style="font-style: italic;">#undef</span><span class="f_Text"> is not used, each defined macro is valid until the end of source compilation.</span></p>
<p class="p_Text"><span class="f_Text">Macros are registered and then used in code by name, following the rules of identifiers. By convention, macro names are written in capital letters. Macro names can overlap the names of variables, functions, and other elements of the source code. Purposeful use of this fact allows the flexibility to change and generate source code on the fly. However, an unintentional coincidence of a macro name with a program element will result in errors.</span></p>
<p class="p_Text"><span class="f_Text">The principle of operation of both forms of macro substitutions is the same. Using the </span><span class="f_Text" style="font-style: italic;">#define</span><span class="f_Text"> directive, an identifier is introduced, which is associated with a certain piece of text – a definition. If the preprocessor finds a given identifier later in the source code, it replaces it with the text associated with it. We emphasize that the macro name can be used in compiled code only after registration (this is similar to the variable declaration principles, but only at the compilation stage).</span></p>
<p class="p_Text"><span class="f_Text">Replacing a macro name with its definition is called expansion. The analysis of the source code occurs progressively and by one line in a pass, but the expansion in each line can be performed an arbitrary number of times, as in a loop, as long as macro names are found in the result. You cannot include the same name in a macro definition: when substituting, such a macro will result in an &quot;unknown identifier&quot; error.</span></p>
<p class="p_Text"><span class="f_Text">In Part 3 of the book, we'll learn about <a href="3_3_templates.htm" class="topiclink">templates</a>, which also allow you to generate (or, in fact, replicate) source code, but with different rules. If there are both, macro substitution directives and templates in the source code, the macros are expanded first, and then the code is generated from the templates.</span></p>
<p class="p_Text"><span class="f_Text">Macro names are highlighted in red in MetaEditor.</span></p>

</div>

</body>
</html>
