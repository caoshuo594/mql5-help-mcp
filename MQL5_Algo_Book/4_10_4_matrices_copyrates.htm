<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>4.10.4 Copying timeseries to matrices and vectors</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part4.htm"> Part 4. Common APIs </a> / <a class="h_m" href="4_10_matrices.htm"> 4.10 Matrices and vectors </a>/ 4.10.4 Copying timeseries to matrices and vectors
          </td>
          <td width="70" align="right">
          <a href="4_10_3_matrices_copy.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="4_10_5_matrices_copyticks.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">4.10.4 Copying timeseries to matrices and vectors</span></p>
<p class="p_Text"><span class="f_Text">The </span><span class="f_Text" style="font-style: italic;">matrix&lt;T&gt;::CopyRates</span><span class="f_Text"> method copies timeseries with the quoting history directly into a matrix or vector. This method works similarly to the functions which we will cover in detail in Part 5, in the chapter on <a href="5_3_timeseries.htm" class="topiclink">timeseries</a>, namely: </span><span class="f_Text" style="font-style: italic;"><a href="5_3_7_timeseries_mqlrates.htm" class="topiclink">CopyRates</a></span><span class="f_Text"> and separate </span><span class="f_Text" style="font-style: italic;"><a href="5_3_6_timeseries_copy_funcs_overview.htm" class="topiclink">Copy functions</a></span><span class="f_Text"> for each field of the </span><span class="f_Text" style="font-style: italic;"><a href="5_3_7_timeseries_mqlrates.htm" class="topiclink">MqlRates</a></span><span class="f_Text"> structure.</span></p>
<p class="p_H4"><span class="f_H4">bool matrix&lt;T&gt;::CopyRates(const string symbol, ENUM_TIMEFRAMES tf, ulong rates_mask,</span><br>
<span class="f_H4"> &nbsp; ulong start, ulong count)</span></p>
<p class="p_H4" style="margin: 0 23px 1px 17px;"><span class="f_H4">bool matrix&lt;T&gt;::CopyRates(const string symbol, ENUM_TIMEFRAMES tf, ulong rates_mask,</span><br>
<span class="f_H4"> &nbsp; datetime from, ulong count)</span></p>
<p class="p_H4" style="margin: 0 23px 1px 17px;"><span class="f_H4">bool matrix&lt;T&gt;::CopyRates(const string symbol, ENUM_TIMEFRAMES tf, ulong rates_mask,</span><br>
<span class="f_H4"> &nbsp; datetime from, datetime to)</span></p>
<p class="p_Text"><span class="f_Text">In the parameters, you need to specify the symbol, timeframe, and the range of requested bars: either by number and quantity, or by date range. The data is copied so that the oldest element is placed at the beginning of the matrix/vector.</span></p>
<p class="p_Text"><span class="f_Text">The </span><span class="f_Text" style="font-style: italic;">rates_mask</span><span class="f_Text"> parameter specifies a combination of flags from the ENUM_COPY_RATES enumeration with a set of available fields. The combination of flags allows you to get several timeseries from history in one request. In this case, the order of rows in the matrix will correspond to the order of values in the ENUM_COPY_RATES enumeration, in particular, the row with </span><span class="f_Text" style="font-style: italic;">High</span><span class="f_Text"> data in the matrix will always be above the row with </span><span class="f_Text" style="font-style: italic;">Low</span><span class="f_Text"> data.</span></p>
<p class="p_Text"><span class="f_Text">When copying to a vector, only one value from the ENUM_COPY_RATES enumeration can be specified. Otherwise, an error will occur.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table" style="width:20%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Value</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_OPEN</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">1</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable" style="font-style: italic;">Open </span><span class="f_fortable">prices</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_HIGH</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">2</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable" style="font-style: italic;">High </span><span class="f_fortable">prices</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_LOW</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">4</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable" style="font-style: italic;">Low </span><span class="f_fortable">prices</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_CLOSE</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">8</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable" style="font-style: italic;">Close </span><span class="f_fortable">prices</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_TIME</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">16</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Bar opening times</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_VOLUME_TICK</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">32</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Tick volumes</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_VOLUME_REAL</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">64</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Real volumes</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_SPREAD</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">128</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Spreads</span></p>
</td>
</tr>
<tr class="table">
<td class="table" colspan="2"><p class="p_fortable"><span class="f_fortable">&nbsp;</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable" style="font-weight: bold;">Combinations</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_OHLC</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">15</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable" style="font-style: italic;">Open, High, Low, Close</span></p>
</td>
</tr>
<tr class="table">
<td class="table"><p class="p_fortable"><span class="f_fortable">COPY_RATES_OHLCT</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">31</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable" style="font-style: italic;">Open, High, Low, Close, Time</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">We will view an example of using this function in the <a href="4_10_12_matrices_sle.htm" class="topiclink">Solving equations</a> section.</span></p>

</div>

</body>
</html>
