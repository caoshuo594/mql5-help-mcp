<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>7.4.1 Overview of available information transformation methods</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part7.htm"> Part 7. Advanced language tools </a> / <a class="h_m" href="7_4_crypt.htm"> 7.4 Cryptography </a>/ 7.4.1 Overview of available information transformation methods
          </td>
          <td width="70" align="right">
          <a href="7_4_crypt.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="7_4_2_crypt_encode.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">7.4.1 Overview of available information transformation methods</span></p>
<p class="p_Text"><span class="f_Text">Information protection can be implemented for different purposes and therefore use different methods. In particular, it may be necessary to completely hide the essence of information from an outside observer or to ensure its transmission, while guaranteeing an unchanged state, but the information itself remains available. In the first case, we are talking about encryption, and the second case refers to a digital fingerprint (hash). Thus, encryption and hashing are reduced to processing the original data into a new representation using, if necessary, additional parameters.</span></p>
<p class="p_Text"><span class="f_Text">Both encryption and hashing come in many varieties.</span></p>
<p class="p_Text"><span class="f_Text">The most general gradation divides encryption into public-key (asymmetric) and private-key (symmetric) encryption.</span></p>
<p class="p_Quote"><span class="f_Quote">An asymmetric scheme implies the presence of 2 keys – public and private – for each participant in the data exchange. Pairs of public and private keys are pre-generated using special algorithms. Each private key is known only to the owner. Everyone's public keys are known to everyone. Public keys will need to be exchanged in one way or another before the encrypted data can be transmitted. Next, the data provider uses its private key, known only to them, in conjunction with one or more public keys of the data recipients. Those, in turn, use their private keys and the sender's public key to decrypt.</span></p>
<p class="p_Text"><span class="f_Text">A symmetric encryption scheme uses the same secret (private) key for both encryption and decryption.</span></p>
<p class="p_Text"><span class="f_Text">MQL5 supports the out-of-the-box private key feature (symmetric). The built-in MQL5 tools do not provide an electronic signature that uses asymmetric encryption.</span></p>
<p class="p_Text"><span class="f_Text">Primitive algorithms without keys stand out among the encryption methods. With their help users achieve conditional hiding of information or transformation of the information type. These include, for example, ROT13 (replacement of characters with a shift of their alphanumeric codes by 13, used, in particular, in the Windows registry) or Base64 (translation of binary files to text and vice versa, usually in web projects). Another popular data transformation task is data compression. This one also can be thought of in a sense as encryption, as the data becomes unreadable by a human or application program.</span></p>
<p class="p_Text"><span class="f_Text">There are also a lot of hashing methods on offer. And CRC (Cyclic Redundancy Check) is perhaps the most famous and simple. Unlike encryption, which allows you to restore the original message from the encrypted one, hashing only creates a fingerprint (a characteristic set of bytes) based on the original information, in such a way that its unchanged state while it is subsequently recalculated guarantees (with a high probability) the invariance of the original information. Of course, this assumes that the information is available to all participants/users of the respective software system. It is impossible to recover information by hash. As a rule, the size of the hash (the number of bytes in it) is limited and standardized for each method, so that for a string of 80 characters long and for a file of 1 MB we will get a hash of the same size. An application of hashing that most users will find really useful is the hashing of passwords by sites and programs, i.e., the latter are stored at home and verified during login with the password hash, and not with the password in its original form.</span></p>
<p class="p_Text"><span class="f_Text">It should be noted that we already encountered the term &quot;hash&quot; in the previous chapter: we used a hashing function to index economic calendar structures. That simple hash has a very weak degree of protection, which, in particular, is expressed in a high probability of collisions (coincidence of results for different data), which we specially processed in the algorithm. It is suitable for problems of uniform pseudo-random distribution of data over a limited number of &quot;baskets&quot;. In contrast, industrial standards of hashing focus specifically on verifying the integrity of information and use much more complex calculation methods. But the length of the hash in this case is several tens of bytes and not a single number.</span></p>
<p class="p_Text"><span class="f_Text">Information encryption and hashing methods available to MQL programs are collected in the ENUM_CRYPT_METHOD enumeration.</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table" style="width:33%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Constant</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_BASE64</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Base64 re-encoding</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_DES</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">DES encryption with a 56-bit (7-byte) key</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_AES128</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">AES encryption with a 128-bit (16-byte) key</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_AES256</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">AES encryption with a 256-bit (32-byte) key</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_HASH_MD5</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">MD5 hash calculation (16 bytes)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_HASH_SHA1</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">SHA1 hash calculation (20 bytes)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_HASH_SHA256</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">SHA256 hash calculation (32 bytes)</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortable"><span class="f_fortable">CRYPT_ARCH_ZIP</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Compression using the &quot;deflate&quot; method</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">The specified enumeration is used in both cryptographic API functions &#8722; </span><span class="f_Text" style="font-style: italic;">CryptEncode</span><span class="f_Text"> (encryption/hashing) and </span><span class="f_Text" style="font-style: italic;">CryptDecode</span><span class="f_Text"> (decryption). They will be discussed in the following sections.</span></p>
<p class="p_Text"><span class="f_Text">AES and DES encryption methods require, in addition to data, the encryption key – an array of bytes of a predefined length (it is indicated in brackets in the table). As already mentioned, the key must be kept secret and remain known only to the developer of the program or the owner of the information. The cryptographic strength of encryption, that is, the difficulty of selecting a key by an attacker's computer, directly depends on the size of the key: the larger it is, the more reliable the protection. Therefore, DES is considered obsolete and has been replaced in the financial sector by its improved version of Triple DES: it implies the successive applying of DES for three times with three different keys, which is easy to implement in MQL5. There is a popular version of Triple DES, which performs decryption at the second iteration instead of encryption with key number 2, that is, as it were, restores data to an intermediate, deliberately incorrect representation before the final, third round of DES. But Triple DES is also planned to be removed from industry standards after 2024.</span></p>
<p class="p_Text"><span class="f_Text">At the same time, cryptographic strength should be commensurate with the lifetime of the secret (key and information). If a fast flow of secure messages is required, shorter keys that are updated regularly will provide better performance.</span></p>
<p class="p_Text"><span class="f_Text">Of the hashing methods, the most modern is SHA256 (a subset of the SHA-2 standard). SHA1 and MD5 methods are considered insecure but are still widely used in order to be compatible with existing services. For hashing methods, the size of the resulting byte array with a digital fingerprint of the data is indicated in brackets. A key is not needed for hashing, but in many applications, the &quot;salt&quot; is attached to the hashed data – a secret component that makes it difficult for attackers to reproduce the required hashes (for example, when guessing a password).</span></p>
<p class="p_Text"><span class="f_Text">The CRYPT_ARCH_ZIP element provides ZIP archiving and transmission/reception of data requests on the Internet (see </span><span class="f_Text" style="font-style: italic;"><a href="7_5_4_network_http.htm" class="topiclink">WebRequest</a></span><span class="f_Text">).</span></p>
<p class="p_Quote"><span class="f_Quote">Despite the fact that the name of the method includes ZIP, the compressed data is not equivalent to the usual ZIP archives, which, in addition to the &quot;deflate&quot; containers, always contain meta-data: special headers, a list of files, and their attributes. On the site mql5.com, in the articles and the source code library, you can find ready-made implementations of compressing files into a ZIP archive and extracting them from there. The compression and extraction are performed by the </span><span class="f_Quote" style="font-style: italic;">CryptEncode</span><span class="f_Quote">/</span><span class="f_Quote" style="font-style: italic;">CryptDecode</span><span class="f_Quote"> functions, and all additional necessary ZIP format structures are described and filled in the MQL5 code.</span></p>
<p class="p_Text"><span class="f_Text">The Base64 method is designed to convert binary data to text and back. Binary data generally contains many non-printable characters and is not supported by editing and input tools such as input variables in MQL program properties dialogs. Base64 can be useful, for example, when working with the popular JSON object data interchange text format.</span></p>
<p class="p_Text"><span class="f_Text">Every 3 original bytes are encoded in Base64 with 4 characters, resulting in an increase of the data size by a third. The book is accompanied by test files that we will experiment with in the following examples, in particular, the web page </span><span class="f_Text" style="font-style: italic;">MQL5/Files/MQL5Book/clock10.htm</span><span class="f_Text"> and the file used in it with the image of the clock </span><span class="f_Text" style="font-style: italic;">MQL5/Files/MQL5Book/clock10.png</span><span class="f_Text">. Already at this introductory stage, you can clearly see the possibilities and the difference in the internal representation of binary data and Base64 text, while maintaining an identical appearance.</span></p>
<p class="p_ImageCaption"><img class="help" alt="Web page with embedded binary image and in Base64 format" title="Web page with embedded binary image and in Base64 format" width="600" height="200" style="margin:0 auto 0 auto;width:600px;height:200px;border:none" src="clockweb.png"/></p>
<p class="p_ImageCaption"><span class="f_ImageCaption">Web page with embedded binary image and in Base64 format</span></p>
<p class="p_Text"><span class="f_Text">The same image with a clock face is inserted into the page as an external file </span><span class="f_Text" style="font-style: italic;">clock10.png</span><span class="f_Text">, as well as its Base64 encoding in the </span><span class="f_Text" style="font-style: italic;">img</span><span class="f_Text"> tag (in its </span><span class="f_Text" style="font-style: italic;">src</span><span class="f_Text"> attribute: this is the &quot;data URL&quot;). Directly in the text of the web page itself, it looks like this (it is not necessary to wrap a long Base64 string across a width of 76 characters, but it is allowed by the standard and done here for publication):</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">&lt;img&nbsp;src=&quot;data:image/png;base64,</span>
<br><span class="f_CodeExample">iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAAAXNSR0IArs4c6QAAAAJiS0dEAP+</span>
<br><span class="f_CodeExample">Hj8y/AAABdUlEQVQoz1WSPUiVYRiGr/f4qaRwyAMOLpVnSGuvBh3SoSnLwclwqQa3CNxaWxwcrS</span>
<br><span class="f_CodeExample">D/CAQH4ShF4RBnqCWQWiQwAp1C6WBi4B/5Xg7f1+fxgXd4eC5e7ue+nxAFgADABj+Bq1wGIBsRU</span>
<br><span class="f_CodeExample">ihwwCMa6eE6ga+s0sgLmv5j0ahOOOqxqq98q+qeI86o0ShRfWpFHVC105uq3lOnfa5G0UXn1Ji9</span>
<br><span class="f_CodeExample">8bw7Ucf9pBbgNX9ZI2TijzjMRBf4zCWeAckbxuijgXV2aadMfd2gl4QVkhXmAegiUGKDlhyRZmC</span>
<br><span class="f_CodeExample">IxyRFdomUgB1qlDlmtu6vbYqckES+U6SEtNFGjScMcUhz5tAmrTTAiGZupI79cv9crw8sXGM9Dw</span>
<br><span class="f_CodeExample">WkgwtncQBf6CfoQ8rcpjcfkSPL/OYdSyRwkWHKSDiHBeQ+39hJs9Nb7qmTmdNpTapb9qexpPLu+</span>
<br><span class="f_CodeExample">NGqqlVXVf1gxcGzgFNswQGn/OOB/9zypXd9n28Z6o/uBxU2kW4GuVJ3dKeW6inhKgZyVwAAAABJ</span>
<br><span class="f_CodeExample">RU5ErkJggg==&quot;&nbsp;title=&quot;Clock&nbsp;10:00&nbsp;Base64&nbsp;built-it&quot;&nbsp;/&gt;</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">Soon we will reproduce this sequence of characters using the </span><span class="f_Text" style="font-style: italic;">CryptEncode</span><span class="f_Text"> function, but for now, just note that using a similar technique, we can generate HTML reports with embedded graphics from MQL5.</span></p>

</div>

</body>
</html>
