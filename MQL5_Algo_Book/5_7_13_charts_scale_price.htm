<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <title>5.7.13 Vertical scale (by price and indicator readings)</title>
  <meta name="keywords" content="" />
  <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>


</head>

<body style="background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;">



<table width="100%" height="49"  border="0" cellpadding="0" cellspacing="0" style="margin-top:0px; background-color:#1660af;">
  <tr>
    <td></td>
    <td valign="middle">
      <table style="margin-top:4px; margin-bottom:5px;" width="100%"  border="0" cellspacing="0" cellpadding="5">
        <tr valign="middle">
          <td class="nav">
<a class="h_m" href="index.htm">          MQL5 Programming for Traders </a> / <a class="h_m" href="part5.htm"> Part 5. Creating application programs </a> / <a class="h_m" href="5_7_charts.htm"> 5.7 Working with charts </a>/ 5.7.13 Vertical scale (by price and indicator readings)
          </td>
          <td width="70" align="right">
          <a href="5_7_12_charts_scale_time.htm"><img style="vertical-align:middle;" src="previous.png" alt="?????" width="27" height="27" border=0></a>&nbsp;
          <a href="5_7_14_charts_color.htm"><img style="vertical-align:middle;" src="next.png" alt="??????" width="27" height="27" border="0"></a>
          </td>
        </tr>
      </table>
    </td>
    <td width="5"></td>
  </tr>
</table>



<div id="help">
<p class="p_H3"><span class="f_H3">5.7.13 Vertical scale (by price and indicator readings)</span></p>
<p class="p_Text"><span class="f_Text">Properties related to the vertical scale are set and parsed using the elements of two enumerations: ENUM_CHART_PROPERTY_INTEGER and ENUM_CHART_PROPERTY_DOUBLE. In the following table, the properties are listed along with their value type.</span></p>
<p class="p_Text"><span class="f_Text">Some properties allow you to access not only the main window but also a subwindow, for which </span><span class="f_Text" style="font-style: italic;">ChartSet</span><span class="f_Text"> and </span><span class="f_Text" style="font-style: italic;">ChartGet</span><span class="f_Text"> functions should use the parameter </span><span class="f_Text" style="font-style: italic;">window</span><span class="f_Text"> (0 means the main window and is the default value for the short form of </span><span class="f_Text" style="font-style: italic;">ChartGet</span><span class="f_Text">).</span></p>
<div style="text-align: justify; text-indent: 0; padding: 0 0 0 0; margin: 7px 17px 6px 17px;"><table class="table" cellspacing="0" cellpadding="5" border="1">
<thead>
<tr class="table">
<th class="table" style="width:33%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Identifier</span></p>
</th>
<th class="table"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Description</span></p>
</th>
<th class="table" style="width:20%;"><p class="p_BoldTitlesInTables"><span class="f_BoldTitlesInTables">Value&nbsp;type</span></p>
</th>
</tr>
</thead>
<tbody>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_SCALEFIX</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Fixed scale mode</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">bool</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_FIXED_MAX</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Fixed maximum of the </span><span class="f_fortable" style="font-style: italic;">window</span><span class="f_fortable"> subwindow or the initial maximum of the main window </span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">double</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_FIXED_MIN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Fixed minimum of the </span><span class="f_fortable" style="font-style: italic;">window</span><span class="f_fortable"> subwindow or the initial minimum of the main window</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">double</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_SCALEFIX_11</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Scale mode 1:1</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">bool</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_SCALE_PT_PER_BAR</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Scale indication mode in points per bar</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">bool</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_POINTS_PER_BAR</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Scale value in points per bar</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">double</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_PRICE_MIN</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Minimum values in the </span><span class="f_fortable" style="font-style: italic;">window</span><span class="f_fortable"> window or subwindow (r/o)</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">double</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_PRICE_MAX</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Maximum values in the </span><span class="f_fortable" style="font-style: italic;">window</span><span class="f_fortable"> window or subwindow (r/o)</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">double</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_HEIGHT_IN_PIXELS</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Fixed height of window or subwindow in pixels, </span><span class="f_fortable" style="font-style: italic;">window</span><span class="f_fortable"> parameter required</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">int</span></p>
</td>
</tr>
<tr class="table">
<td class="table" style="width:33%;"><p class="p_fortableCondensed"><span class="f_fortableCondensed">CHART_WINDOW_YDISTANCE</span></p>
</td>
<td class="table"><p class="p_fortable"><span class="f_fortable">Distance in pixels along the vertical Y-axis between the top frame of the </span><span class="f_fortable" style="font-style: italic;">window</span><span class="f_fortable"> subwindow and the upper frame of the main chart window. (r/o)</span></p>
</td>
<td class="table" style="width:20%;"><p class="p_fortable"><span class="f_fortable">int</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_Text"><span class="f_Text">By default, charts support adaptive scale so that quotes or indicator lines fit completely vertically on a visible time period. For some applications, it is desirable to fix the scale, for which the terminal offers several modes. In them, the chart can be scrolled with the mouse or with the keys (Shift + arrow) not only left/right, but also up/down, and a slider bar appears at the right scale, using which you can quickly scroll the chart with the mouse.</span></p>
<p class="p_Text"><span class="f_Text">The fixed mode is set by turning on the CHART_SCALEFIX flag and specifying the required maximum and minimum in the CHART_FIXED_MAX and CHART_FIXED_MIN fields (in the main window, the user will be able to move the chart up or down, due to which the CHART_FIXED_MAX and CHART_FIXED_MIN values will change synchronously, but the vertical scale will remain the same). The user will also be able to change the vertical scale by pressing the mouse button on the price scale and, without releasing it, moving it up or down. Subwindows do not provide interactive editing of the vertical scale. In this regard, we will later present an indicator </span><span class="f_Text" style="font-style: italic;">SubScaler.mq5</span><span class="f_Text"> (see <a href="5_9_4_events_keyboard.htm" class="topiclink">keyboard events section</a>), which will allow the user to control the range of values in the subwindow using the keyboard, rather than from the settings dialog, using the fields on the </span><span class="f_Text" style="font-style: italic;">Scale</span><span class="f_Text"> tab.</span></p>
<p class="p_Text"><span class="f_Text">The CHART_SCALEFIX_11 mode provides an approximate visual equality of the sides of the square on the screen: X bars in pixels (horizontally) will be equal to X points in pixels (vertically). The equality is approximate, because the size of the pixels, as a rule, is not the same vertically and horizontally.</span></p>
<p class="p_Text"><span class="f_Text">Finally, there is a mode for fixing the ratio of the number of points per bar, which is enabled by the CHART_SCALE_PT_PER_BAR option, and the required ratio itself is set using the CHART_POINTS_PER_BAR property. Unlike the CHART_SCALEFIX mode, the user will not be able to interactively change the scale with the mouse on the chart. In this mode, a horizontal distance of one bar will be displayed on the screen in the same ratio to the specified number of vertical points as the aspect ratio of the chart (in pixels). If the timeframes and sizes of the two charts are equal, one will look compressed in price compared to the other according to the ratio of their CHART_POINTS_PER_BAR values. Obviously, the smaller the timeframe, the smaller the range of bars, and therefore, with the same scale, small timeframes look more &quot;flattened&quot;.</span></p>
<p class="p_Text"><span class="f_Text">Programmatically setting the CHART_HEIGHT_IN_PIXELS property makes it impossible for the user to edit the window/subwindow size. This is often used for windows that host trading panels with a predefined set of controls (buttons, input fields, etc.). In order to remove the fixation of the size, set the value of the property to -1.</span></p>
<p class="p_Text"><span class="f_Text">The CHART_WINDOW_YDISTANCE value is required to convert the absolute coordinates of the main chart into local coordinates of the subwindow for correct work with graphical objects. The point is that when <a href="5_9_5_events_mouse.htm" class="topiclink">mouse events</a> occur, cursor coordinates are transferred relative to the main chart window, while the coordinates of graphical objects in the indicator subwindow are set relative to the upper left corner of the subwindow.</span></p>
<p class="p_Text"><span class="f_Text">Let's prepare the </span><span class="f_Text" style="font-style: italic;">ChartScalePrice.mq5</span><span class="f_Text"> script for analyzing changes in vertical scales and sizes.</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample" style="color: #0000ff;">void</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">OnStart</span><span class="f_CodeExample">()</span>
<br><span class="f_CodeExample">{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #0000ff;">int</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">flags</span><span class="f_CodeExample">[]&nbsp;=</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;{</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_SCALEFIX</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_SCALEFIX_11</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_SCALE_PT_PER_BAR</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_POINTS_PER_BAR</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_FIXED_MAX</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_FIXED_MIN</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_PRICE_MIN</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_PRICE_MAX</span><span class="f_CodeExample">,</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_HEIGHT_IN_PIXELS</span><span class="f_CodeExample">,&nbsp;</span><span class="f_CodeExample" style="color: #ff0000;">CHART_WINDOW_YDISTANCE</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;};</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample" style="color: #333333;">ChartModeMonitor</span><span class="f_CodeExample">&nbsp;</span><span class="f_CodeExample" style="color: #333333;">m</span><span class="f_CodeExample">(</span><span class="f_CodeExample" style="color: #333333;">flags</span><span class="f_CodeExample">);</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;...</span>
<br><span class="f_CodeExample">}</span></p>
</td>
</tr>
</table>
</div>
<p class="p_Text"><span class="f_Text">It reacts to chart manipulation in the following way:</span></p>
<div style="text-align: left; text-indent: 0; line-height: 1.0; page-break-inside: avoid; page-break-after: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0 0 0 0; margin: 2px 17px 2px 17px;"><table cellspacing="0" cellpadding="3" border="0" style="text-align: justify;border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; padding:3px; border:none"><p class="p_CodeExample" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_CodeExample">Initial&nbsp;state:</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;[key]&nbsp;[value]&nbsp;&nbsp;&nbsp;//&nbsp;ENUM_CHART_PROPERTY_INTEGER</span>
<br><span class="f_CodeExample">[0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</span>
<br><span class="f_CodeExample">[1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</span>
<br><span class="f_CodeExample">[2]&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</span>
<br><span class="f_CodeExample">[3]&nbsp;&nbsp;&nbsp;107&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;357</span>
<br><span class="f_CodeExample">[4]&nbsp;&nbsp;&nbsp;110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</span>
<br><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;[key]&nbsp;&nbsp;[value]&nbsp;&nbsp;//&nbsp;ENUM_CHART_PROPERTY_DOUBLE</span>
<br><span class="f_CodeExample">[0]&nbsp;&nbsp;&nbsp;&nbsp;11&nbsp;10.00000</span>
<br><span class="f_CodeExample">[1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;&nbsp;1.13880</span>
<br><span class="f_CodeExample">[2]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;1.12330</span>
<br><span class="f_CodeExample">[3]&nbsp;&nbsp;&nbsp;108&nbsp;&nbsp;1.12330</span>
<br><span class="f_CodeExample">[4]&nbsp;&nbsp;&nbsp;109&nbsp;&nbsp;1.13880</span>
<br><span class="f_CodeExample">//&nbsp;reduced&nbsp;the&nbsp;vertical&nbsp;size&nbsp;of&nbsp;the&nbsp;window</span>
<br><span class="f_CodeExample">CHART_HEIGHT_IN_PIXELS&nbsp;357&nbsp;-&gt;&nbsp;370</span>
<br><span class="f_CodeExample">CHART_HEIGHT_IN_PIXELS&nbsp;370&nbsp;-&gt;&nbsp;408</span>
<br><span class="f_CodeExample">CHART_FIXED_MAX&nbsp;1.1389&nbsp;-&gt;&nbsp;1.1388</span>
<br><span class="f_CodeExample">CHART_FIXED_MIN&nbsp;1.1232&nbsp;-&gt;&nbsp;1.1233</span>
<br><span class="f_CodeExample">CHART_PRICE_MIN&nbsp;1.1232&nbsp;-&gt;&nbsp;1.1233</span>
<br><span class="f_CodeExample">CHART_PRICE_MAX&nbsp;1.1389&nbsp;-&gt;&nbsp;1.1388</span>
<br><span class="f_CodeExample">//&nbsp;reduced&nbsp;the&nbsp;horizontal&nbsp;scale,&nbsp;which&nbsp;increased&nbsp;the&nbsp;price&nbsp;range</span>
<br><span class="f_CodeExample">CHART_FIXED_MAX&nbsp;1.1388&nbsp;-&gt;&nbsp;1.139</span>
<br><span class="f_CodeExample">CHART_FIXED_MIN&nbsp;1.1233&nbsp;-&gt;&nbsp;1.1183</span>
<br><span class="f_CodeExample">CHART_PRICE_MIN&nbsp;1.1233&nbsp;-&gt;&nbsp;1.1183</span>
<br><span class="f_CodeExample">CHART_PRICE_MAX&nbsp;1.1388&nbsp;-&gt;&nbsp;1.139</span>
<br><span class="f_CodeExample">CHART_FIXED_MAX&nbsp;1.139&nbsp;-&gt;&nbsp;1.1406</span>
<br><span class="f_CodeExample">CHART_FIXED_MIN&nbsp;1.1183&nbsp;-&gt;&nbsp;1.1167</span>
<br><span class="f_CodeExample">CHART_PRICE_MIN&nbsp;1.1183&nbsp;-&gt;&nbsp;1.1167</span>
<br><span class="f_CodeExample">CHART_PRICE_MAX&nbsp;1.139&nbsp;-&gt;&nbsp;1.1406</span>
<br><span class="f_CodeExample">//&nbsp;expand&nbsp;the&nbsp;price&nbsp;range&nbsp;using&nbsp;the&nbsp;mouse&nbsp;(quotes&nbsp;&quot;shrink&quot;&nbsp;vertically)</span>
<br><span class="f_CodeExample">CHART_FIXED_MAX&nbsp;1.1406&nbsp;-&gt;&nbsp;1.1454</span>
<br><span class="f_CodeExample">CHART_FIXED_MIN&nbsp;1.1167&nbsp;-&gt;&nbsp;1.1119</span>
<br><span class="f_CodeExample">CHART_PRICE_MIN&nbsp;1.1167&nbsp;-&gt;&nbsp;1.1119</span>
<br><span class="f_CodeExample">CHART_PRICE_MAX&nbsp;1.1406&nbsp;-&gt;&nbsp;1.1454</span></p>
</td>
</tr>
</table>
</div>

</div>

</body>
</html>
